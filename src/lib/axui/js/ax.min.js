"use strict";const axError={formatError:"This is not a valid data format!",paraError:"The parameters do not meet the requirements!",arrayRequired:"The value must be an array type!",noNode:"This page can not find the node!",required:"Required field is missing!",notExist:"The program cannot be executed because the object does not exist!"},axIsMobi=()=>{let t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];for(let s=0;s<e.length;s++)return t.indexOf(e[s])>0},axIsDate=t=>isNaN(t)&&!isNaN(Date.parse(t)),axClient=()=>{let t=window.screen.width;return t<500?"phone":t>500&&t<900?"pad":t>900&&t<1200?"padflip":t>1200&&t<1500?"padpro":"pc"},axType=t=>Object.prototype.toString.call(t).slice(8,-1),axIsEmpty=t=>{let e=axType(t);return!t||("Function"===e?"{}"==t.toString().replace(/\s+/g,"").match(/{.*}/g)[0]:"Array"===e?""==t.join(""):"Object"===e&&0===Object.keys(t).length)},axIsVnode=t=>!getComputedStyle(t).display,axTrim=(t,e=!1)=>e?t.replace(/\s+/g,""):t.trim().replace(/\s+/gi," "),axSplitToArr=(t,e=",",s="all")=>{let i=axType(t),o="",a=[];return"String"===i?(o="one"===s?axTrim(t,!1):"none"===s?axTrim(t,!0):t.trim(),a=o.split(e)):"Array"===i&&(a=t),a},axPreventDefault=t=>{t.preventDefault?t.preventDefault():t.returnValue=!1},axStrEnd=(t,e,s="afterend",i=!0)=>{if(!t||!e)return!1;if(t=t.trim(),t.includes(e)){let o,a,n=e.length;return"beforebegin"===s?(o=t.indexOf(e),i&&(o+=n),a=t.substring(0,o)):"afterbegin"===s?(o=t.indexOf(e),!i&&(o+=n),a=t.substring(o,t.length)):"beforeend"===s?(o=t.lastIndexOf(e),i&&(o+=n),a=t.substring(0,o)):"afterend"===s?(o=t.lastIndexOf(e),!i&&(o+=n),a=t.substring(o,t.length)):a="",a}return""},axStrType=t=>{if("string"!=typeof t)return console.error("Argument must be a string!"),!1;t=t.trim();let e=t=>{if(t>="A"&&t<="Z")return!0},s="";return t&&(t.includes(" ")?s="level":t.startsWith("#")?s="id":t.startsWith(".")?s="class":t.startsWith("[")&&t.endsWith("]")?s="name":[...t].every(t=>e(t))&&(s="node")),s},axStrToDom=t=>{if("string"!=typeof t)return!1;let e;return t=t.trim(),t.startsWith("<tr")||t.endsWith("</tr>")?(e=document.createElement("tr"),e.innerHTML=t,e):(e=document.createElement("div"),e.innerHTML=t,e.firstElementChild)},axIdToDom=t=>{let e=axType(t);if(t){if("String"===e){let e=t.trim();return axStrType(e)?("name"!==axStrType(e)||e.includes("=")||(e=e.slice(0,1)+"name="+e.slice(1)),document.querySelector(e)):(console.warn("No node is found with this string!"),!1)}return!!e.includes("HTML")&&t}return console.warn("Node selector is empty!"),!1},axAllToDoms=t=>{if(axIsEmpty(t))return[];let e=[],s=axType(t);if(s.includes("HTML"))e.push(t);else if("String"===s){let s=axTrim(t),i=",";s.includes(" ")&&(i=" "),s.split(i).forEach(t=>{let s=axIdToDom(t);s&&e.push(s)})}else"Array"===s?t.forEach(t=>{let s=axIdToDom(t);s&&e.push(s)}):"NodeList"===s&&(e=[...t]);return e},axValueToArr=t=>{let e=[];if(!axIsEmpty(t)||0===t)if(Array.isArray(t))e=t;else if("string"==typeof t){let s=t.trim(),i=t.includes(",")?",":" ";s.includes(i)?e=s.split(i):e.push(t)}else e.push(t);return e},axUnique=(t,e)=>{if(e){let s=new Map;for(let i of t)s.has(i[e])||s.set(i[e],i);return[...s.values()]}return[...new Set(t)]},axClass={get:function(t){return axValueToArr(t)},add:function(t,e,s){let i=axIdToDom(t),o=this.get(e);return!(!i||0===o.length)&&(o.forEach(t=>{let e=!s||s(t);e&&i.classList.add(t)}),this)},del:function(t,e,s){let i=axIdToDom(t),o=this.get(e);return!(!i||0===o.length)&&(o.forEach(t=>{let e=!s||s(t);e&&i.classList.remove(t)}),this)}},axArrToDom=(t,e)=>{let s=t.split(","),i=[],o=/^[0-9]*$/,a="";return a="string"==typeof e?document.querySelector(e):e,s.forEach(t=>{if(!o.test(t.substr(0,1)))if("class"==axStrType(t))i=a?i.concat([...a.querySelectorAll(t)]):i.concat([...document.querySelectorAll(t)]);else if("id"==axStrType(t))i.push(document.querySelector(t));else{if(!t)return i;{let e=document.querySelectorAll(t);e&&(i=a?i.concat([...a.querySelectorAll(t)]):i.concat([...document.querySelectorAll(t)]))}}}),i},axArrToFlat=t=>{let e=[],s=[...t];return s.forEach(t=>{t.children?e=[...e,t,...axArrToFlat(t.children)]:e.push(t)}),e},axIncreaseId=(t,e=!0)=>{let s,i=[];return e?(t.forEach(t=>{i.push(~~t.id)}),s=Math.max(...i)+1):s=t.length,s},axMultiValues=(t,e="checkbox",s="array",i,o=",")=>{let a,n=[],r=i?axIdToDom(i):"";if("NodeList"==axType(t)||"Array"==axType(t)){if(e.includes("select")||"file"==e)return console.warn("Can not be an node array in this type!"),!1;a=t}else if("object"==typeof t||axStrType(t)&&"name"!==axStrType(t)){let s=axIdToDom(t);e.includes("select")||"SELECT"==t.nodeName?(e="select",a=s.options):"file"==e||"file"==s.type?(e="file",a=[s]):a=[...s.querySelectorAll("input")]}else{let s="";s="name"===axStrType(t)?t.replace("[","[name="):`[name=${t}]`,a=e.includes("select")?r?r.querySelector(s).options:document.querySelector(s).options:"file"==e?r?[r.querySelector(s)]:[document.querySelector(s)]:r?[...r.querySelectorAll(s)]:[...document.querySelectorAll(s)]}for(let t=0;t<a.length;t++){let s,i=a[t];s=e.includes("select")?i.selected:i.checked,"file"==e?n=[...i.files]:s&&n.push(i.value)}return"string"==s&&(n=n.join(o)),n},axDebounce=(t,e=200)=>{let s=null,i=function(){s&&clearTimeout(s),s=setTimeout(()=>{t.apply(this,arguments)},e)};return i.cancel=function(){s&&clearTimeout(s)},i},axThrottle=(t,e=500)=>{let s=0,i=null,o=function(){let o=(new Date).getTime();o-s>e?(i&&(clearTimeout(i),i=null),t.apply(this,arguments),s=o):null===i&&(i=setTimeout(()=>{i=null,t.apply(this,arguments)},e))};return o.cancel=function(){clearTimeout(i),i=null},o},axMoveArr=(t,e,s)=>{if(e>t.length||s>t.length||e<0||s<0)return console.error("Exceeded array length!"),!1;let i=t[e];return t.splice(e,1),t.splice(s,0,i),t},axIsVisible=t=>{let e=axIdToDom(t),s=!0,i="none"!=getComputedStyle(e).display&&"hidden"!=getComputedStyle(e).visibility;for(;s&&i;)e=e.parentNode,e&&e!=document.body?i="none"!=getComputedStyle(e).display&&"hidden"!=getComputedStyle(e).visibility:s=!1;return i},axChildVisible=(t,e)=>{let s=axIdToDom(e),i=axIdToDom(t),o=s.scrollTop,a=s.getBoundingClientRect().height;return i.offsetTop+i.offsetHeight>o&&i.offsetTop<o+a},axPreventScroll=(t,e)=>{let s=t?axIdToDom(t):null,i=e?axIdToDom(e):null,o=60,a=navigator.userAgent.indexOf("Firefox")>0?{event:"DOMMouseScroll",detail:"detail"}:{event:"mousewheel",detail:"wheelDelta"},n=t=>{t&&t.scrollHeight>t.clientHeight&&t.addEventListener(a.event,e=>{t.scrollTop+=e[a.detail]>0?-o:o},!1)};return navigator.userAgent.indexOf("Firefox")>0?(o=-60,s.addEventListener(a.event,t=>{t.preventDefault()},!1),n(i||s)):(s.addEventListener(a.event,t=>{t=t||window.event,t.returnValue=!1},!1),n(i||s)),this},axUlToArr=(t,e=0,s=!0)=>{let i=axIdToDom(t),o=e;if(!t)return console.error(axError.notExist),!1;let a=()=>{let t=[];return[...i.children].forEach(e=>{t.push(r(e,o++))}),t},n=(t,e)=>{let s=[...t.attributes].filter(t=>"label"!==t.name&&"value"!==t.name);s.forEach(t=>{["selected","disabled","readonly","active","checked","expanded"].includes(t.name)?e[t.name]=!0:e[t.name]=t.value.trim()})},r=(t,e)=>{let i=t.firstElementChild,a={id:e,node:i};a.label=i.textContent.trim(),s?a.value=i.hasAttribute("value")?i.getAttribute("value"):a.label:i.hasAttribute("value")&&(a.value=i.getAttribute("value")),n(i,a);let l=t.querySelector("ul")||t.querySelector("ol");return l&&(a.children=[],[...l.children].forEach(t=>{a.children.push(r(t,o++))})),a};return{data:a(),index:o}},axSelectToArr=(t,e=0,s=!0)=>{let i=axIdToDom(t),o=e;if(!i)return console.error(axError.notExist),!1;let a=()=>{let t=[];return[...i.children].forEach(e=>{t.push(r(e,o++))}),t},n=(t,e)=>{let s=[...t.attributes].filter(t=>"label"!==t.name&&"value"!==t.name);s.forEach(t=>{["selected","disabled","readonly","active","checked","expanded"].includes(t.name)?e[t.name]=!0:e[t.name]=t.value.trim()})},r=(t,e)=>{let i={id:e,node:t},a=t.textContent.trim(),l=t.hasAttribute("value")?t.getAttribute("value").trim():"";return n(t,i),"OPTGROUP"==t.nodeName?(i.label=t.getAttribute("label").trim(),i.value=i.label,i.children=[],[...t.children].forEach(t=>{i.children.push(r(t,o++))})):(i.label=a||l.trim(),i.value=s?l||i.label:l),i};return{data:a(),index:o}},axTableToJson=t=>{let e=axIdToDom(t),s=e.querySelector("tbody"),i=s.rows,o=[];return[...i].forEach(t=>{let e=t.cells,s=[];[...e].forEach(t=>{s.push(t.innerText.trim())}),o.push(s)}),o},axArrToTree=t=>{let e=t[0].pId;return t.forEach(e=>{let s=t.filter(t=>e.id==t.pId);s.length&&(e.children=s)}),t.filter(t=>t.pId==e)},axFindItem=(t,e,s)=>{let i,o=axType(t),a=Object.assign({string:"label",number:"id",dom:"headerDom"},s),n=(t,e)=>{let s=Object.keys(t),i=e.find(e=>{let i=!0;for(let o of s)if(e[o]!=t[o]){i=!1;break}return i});return i};return i="Object"===o?e.find(e=>e===t)||n(t,e):"Array"===o?e.find(e=>e===t):"Number"===o?e[0].hasOwnProperty(a.number)?e.find(e=>String(e[a.number])===String(t)):e[t]:"String"===o?t.startsWith("#")?e.find(e=>"#"+e[a.dom].id===t):e.find(e=>String(e[a.number])===t||String(e[a.string])===t):!!o.includes("HTML")&&e.find(e=>e[a.dom]===t),i},axTreeMethod={addPath:(t,e=-1,s=0)=>{if(!Array.isArray(t)||0===t.length)return!1;let i=0,o=0,a=!!t[0].hasOwnProperty("id"),n=s,r=(t,s,l=e)=>{t.forEach(t=>{if(a||(t.id=n,n++),t.floor=s,t.pId=t.pId||0===t.pId?t.pId:e,s>=i&&(i=s),isNaN(t.id)||t.id>=o&&(o=t.id),t.children&&t.children.length>0){let e=l.toString()+">"+t.id.toString();t.children.forEach(s=>{s.path=e+">"+s.id,s.pId=t.id}),r(t.children,s+1,e)}t.path||(t.path=t.pId+">"+t.id)})};return r(t,1),{data:t,floorMax:i,idMax:o}},remove:(t,e,s,i)=>{if(1!==t.floor){let s=e.find(e=>e.id==t.pId),i=s.children,o=i.indexOf(t);i.splice(o,1)}else s&&(s=s.filter(e=>e!=t));return e=e.filter(e=>e!==t&&!e.path.includes(">"+t.id+">")),t.wrapperDom.remove(),i&&i(t,e),{flat:e,tree:s}},createData:(t,e,s,i)=>{let o={},a=axType(t),n=axIncreaseId(s),r="String"===a?t:"新节点"+n;if("Object"===a){let s=i?{path:e.path+">"+t.id,floor:e.floor+1}:{path:e.path.replace(new RegExp("(.*)"+e.id),"$1"+t.id),floor:e.floor};!t.hasOwnProperty("id")&&(t.id=n),o=Object.assign(t,s)}else o=i?{id:n,label:r,pId:e.id,path:e.path+">"+n,floor:e.floor+1}:{id:n,label:r,pId:e.pId,path:e.path.replace(new RegExp("(.*)"+e.id),"$1"+n),floor:e.floor};return o},existChildPush:(t,e,s=!0)=>{s?(e.children.unshift(t),e.bodyDom.insertAdjacentElement("afterBegin",t.wrapperDom)):(e.children.push(t),e.bodyDom.insertAdjacentElement("beforeEnd",t.wrapperDom))},noExistChildPush:(t,e,s)=>{e.children=[],e.children.push(t),e=s(e),e.bodyDom.appendChild(t.wrapperDom),e.wrapperDom.appendChild(e.bodyDom)},fullData:async(t={})=>{if(axIsEmpty(t.source))return!1;let e=axType(t.source),s=Object.assign({idStart:0,rootStart:-1,replace:!1,ajaxData:{},ajaxType:"post",async:!1,addPath:!0},t),i=[],o={},a=t=>{let e=t.nodeName,i=[];return"SELECT"===e||"DATALIST"===e?i=axSelectToArr(t,s.idStart,s.replace).data:"UL"!==e&&"OL"!==e||(i=axUlToArr(t,s.idStart,s.replace).data),i},n=t=>{let e=[],s=axClone(t);return e=s[0].hasOwnProperty("pId")&&s[0].hasOwnProperty("id")?axArrToTree(s):s,e};if(!axIsEmpty(s.ajaxData)&&(s.async=!0),s.async){let t=s.source.loadDom?axIdToDom(s.source.loadDom):null;await axAjax({url:s.source,data:axIsEmpty(s.ajaxData)?"":s.ajaxData,type:s.ajaxType,opened:t=>{s.opened?s.opened(t):s.instance&&s.xhrName&&(s.instance[s.xhrName]=t.xhr)},before:e=>{s.before?s.before(e):t&&t.setAttribute("loading","")},success:e=>{if(axIsEmpty(e.content))return console.warn("No data obtained!"),!1;t&&t.hasAttribute("loading")&&t.removeAttribute("loading"),s.success&&s.success(e),i=n(e.content)}})}else e.includes("HTML")?i=a(s.source):"String"===e?axStrType(s.source)&&(i=a(axIdToDom(s.source))):"Array"===e&&(i=n(s.source));return o=s.addPath?axTreeMethod.addPath(i,s.rootStart,s.idStart):i,s.callback&&s.callback(o),o}},axDateMethod={toSlash:t=>t.replace("-","/"),toDate:(t,e)=>{let s,i=axType(t);return"Date"===i?s=new Date(t.valueOf()):"String"===i?s=new Date(axDateMethod.toSlash(t)):"Object"===i?(s=new Date,t.hasOwnProperty("YYYY")&&s.setFullYear(t.YYYY),t.hasOwnProperty("MM")&&s.setMonth(t.MM),t.hasOwnProperty("DD")&&s.setDate(t.DD),t.hasOwnProperty("hh")&&s.setHours(t.hh),t.hasOwnProperty("mm")&&s.setMinutes(t.mm),t.hasOwnProperty("ss")&&s.setSeconds(t.ss)):s=new Date,"date"===e?(s.setHours(0),s.setMinutes(0),s.setSeconds(0)):"month"===e?(s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0)):"year"===e&&(s.setMonth(0),s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0)),s},toObj:(t,e=!1,s)=>{let i,o=axType(t),a="";if("Object"===o)a=t;else if("String"===o&&!t.trim().includes(" ")&&t.includes(":")){let e=t.split(":");a={hh:~~e[0],mm:~~e[1],ss:~~e[2]}}else i=axDateMethod.toDate(t),a={YYYY:i.getFullYear(),MM:i.getMonth(),DD:i.getDate(),hh:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds()};return e&&(!a.hasOwnProperty("hh")&&(a.hh=0),!a.hasOwnProperty("mm")&&(a.mm=0),!a.hasOwnProperty("ss")&&(a.ss=0)),"year"===s?(Reflect.deleteProperty(a,"MM"),Reflect.deleteProperty(a,"DD"),Reflect.deleteProperty(a,"hh"),Reflect.deleteProperty(a,"mm"),Reflect.deleteProperty(a,"ss")):"month"===s?(Reflect.deleteProperty(a,"DD"),Reflect.deleteProperty(a,"hh"),Reflect.deleteProperty(a,"mm"),Reflect.deleteProperty(a,"ss")):"date"===s&&(Reflect.deleteProperty(a,"hh"),Reflect.deleteProperty(a,"mm"),Reflect.deleteProperty(a,"ss")),a},strToTimeObj:t=>{t=t.replace(" ","");let e=t.split(":");return{hh:~~e[0]||0,mm:~~e[1]||0,ss:~~e[2]||0}},getDays:t=>{let e=axDateMethod.toDate(t),s=e.getFullYear(),i=e.getMonth();return new Date(s,i+1,0).getDate()},getChain:(t,e={YYYY:0,MM:0,DD:0,hh:0,mm:0,ss:0})=>{let s=axDateMethod.toDate(t);return e.hasOwnProperty("ss")&&s.setDate(s.getSeconds()+e.ss),e.hasOwnProperty("mm")&&s.setDate(s.getMinutes()+e.mm),e.hasOwnProperty("hh")&&s.setDate(s.getHours()+e.hh),e.hasOwnProperty("DD")&&s.setDate(s.getDate()+e.DD),e.hasOwnProperty("MM")&&s.setMonth(s.getMonth()+e.MM),e.hasOwnProperty("YYYY")&&s.setFullYear(s.getFullYear()+e.YYYY),s},fillZero:t=>{let e=~~t;return e<10?"0"+e:e},fillFormat:(t,e)=>{let s,i,o,a,n,r,l,h=["日","一","二","三","四","五","六"];return t instanceof Date?(s=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),a=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),l=t.getDay()):(s=t.YYYY,i=t.MM+1,o=t.DD,a=t.hh,n=t.mm,r=t.ss,t.hasOwnProperty("DD")&&(l=new Date(t.YYYY,t.MM,t.DD).getDay())),e.includes("YYYY")&&(e=e.replace("YYYY",s)),e.includes("MM")&&(e=e.replace("MM",axDateMethod.fillZero(i))),e.includes("DD")&&(e=e.replace("DD",axDateMethod.fillZero(o))),e.includes("hh")&&(e=e.replace("hh",axDateMethod.fillZero(a))),e.includes("mm")&&(e=e.replace("mm",axDateMethod.fillZero(n))),e.includes("ss")&&(e=e.replace("ss",axDateMethod.fillZero(r))),e.includes("WW")&&void 0!==l&&(e=e.replace("WW",h[l])),e},sort:t=>t.sort((t,e)=>axDateMethod.toDate(t)-axDateMethod.toDate(e)),trim:t=>t.trim().replace(/\s+/gi," "),type:t=>{let e="";return RegExp(/^(?=.*YYYY)(?=.*MM)(?=.*DD)(?=.*hh).*$/).test(t)?e="datetime":RegExp(/^(?=.*YYYY)(?=.*MM)(?=.*DD).*$/).test(t)?e="date":RegExp(/^(?=.*YYYY)(?=.*MM).*$/).test(t)?e="month":RegExp(/^(?=.*YYYY).*$/).test(t)?e="year":RegExp(/^(?=.*hh).*$/).test(t)&&(e="time"),e},isSameDay:(t,e)=>{let s={...t},i={...e};return Reflect.deleteProperty(s,"hh"),Reflect.deleteProperty(s,"mm"),Reflect.deleteProperty(s,"ss"),Reflect.deleteProperty(i,"hh"),Reflect.deleteProperty(i,"mm"),Reflect.deleteProperty(i,"ss"),JSON.stringify(s)==JSON.stringify(i)}},axIsOutside=(t,e,s,i)=>{if(!e)return!0;let o=axIdToDom(e);if(!o)return!0;let a,n,r,l,h=t.clientX,d=t.clientY;return a=s||o.getBoundingClientRect().left,n=i||o.getBoundingClientRect().top,r=a+o.offsetWidth,l=n+o.offsetHeight,h<a||h>r||d<n||d>l},axStyle=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t);return document.defaultView.getComputedStyle(s,e)},axTplEngine=(t,e)=>{if(!t)return console.error("No html!"),!1;let s,i=/<#([^#>]+)?#>/g,o=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,a="let r=[];\n",n=0,r=(t,e)=>(a+=e?t.match(o)?t+"\n":"r.push("+t+");\n":""!=t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",r);for(;s=i.exec(t);)r(t.slice(n,s.index))(s[1],!0),n=s.index+s[0].length;return r(t.substr(n,t.length-n)),a+='return r.join("");',new Function(a.replace(/[\r\t\n]/g,"")).apply(e)},axClone=t=>{let e=t=>{if(null===t)return null;if("object"!=typeof t)return t;if(t.constructor===Date)return new Date(t);{let e={};for(let s in t)if(null==t[s])e[s]=null;else if("object"!=typeof t[s]||t[s].nodeType)e[s]=t[s];else if(e[s]=axClone(t[s]),t[s]instanceof Array){let i=[];for(let e of t[s])i.push(axClone(e));e[s]=i}return e}};return Array.isArray(t)?t.map(t=>e(t)):e(t)},axMerge=(t,e,s={arrAppend:!1,clone:!1,attrAppend:!0})=>{if("object"!=typeof t||"object"!=typeof e)return e;if(!e)return t;let i=s.copy?axClone(t):t;for(let t in e)e.hasOwnProperty(t)&&i.hasOwnProperty(t)?"Array"!=axType(e[t])?i[t]=axMerge(i[t],e[t],s):s.arrAppend?i[t].push(...e[t]):i[t]=e[t]:e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&s.attrAppend&&(i[t]=e[t]);return i},axStrToArr=(t,e,s)=>{let i=[],o={};return axIsEmpty(e)||e.forEach((t,e)=>{o[t]=axIsEmpty(s)?"":s[e]}),"["==t.substr(0,1)&&"]"==t.substr(-1)?i=JSON.parse(t):-1!=t.replace(/\s*/g,"").indexOf("},{")?i=JSON.parse("["+t+"]"):"{"==t.replace(/\s*/g,"").substr(0,1)&&"}"==t.replace(/\s*/g,"").substr(-1)?i=JSON.parse("["+t+"]"):(i=t.split(","),i.forEach((t,s)=>{if(t=t.trim(),"string"==typeof t&&!axIsEmpty(e)){let o={};e.forEach((e,s)=>{o[e]=0==s?t:""}),i.splice(s,1,o)}})),i.forEach(t=>{if(!axIsEmpty(o))for(let e in o)t.hasOwnProperty(e)?t.hasOwnProperty(e)&&!t[e]&&(t[e]=o[e]):t[e]=o[e]?o[e]:""}),i},axTplToArr=(t,e,s,i,o)=>{let a=axIdToDom(t),n=[];if(i){let t=a.querySelectorAll(i);t.forEach(t=>{let i={};e.forEach((e,a)=>{let n=t.querySelector("["+e+"]");i[s[a]]=n?n.getAttribute(e)?n.getAttribute(e).trim():n.innerHTML.trim():o[a]||""}),n.push(i)})}else{let t={};e.forEach((e,i)=>{let n=a.querySelector("["+e+"]");t[s[i]]=n?n.getAttribute(e)?n.getAttribute(e).trim():n.innerHTML.trim():o[i]||""}),n.push(t)}return n},axDataset=(t,e)=>{let s=t?axIdToDom(t):null,i=/^\d+(\.\d+)?$/,o=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;if(s){let t=[...s.attributes].filter(t=>0==t.name.indexOf("data-"));if(!axIsEmpty(t)){let s=axClone(e),a=t=>{for(let e in t){let s=e.toLowerCase();t[s]=t[e],"Object"===axType(t[e])&&a(t[e]),s!=e&&delete t[e]}};a(s);for(let e=0;e<t.length;e++){let a=t[e].value.trim(),n=t[e].name;"true"==a?a=JSON.parse("true"):"false"==a?a=JSON.parse("false"):"null"==a?a=null:"["==a.substr(0,1)&&"]"==a.substr(-1)?a=JSON.parse(a):-1!=a.replace(/\s*/g,"").indexOf("},{")&&(a=JSON.parse("["+a+"]")),"string"==typeof a&&(i.test(a)||o.test(a))&&(a=Number(a));let r=n.split("-");r.length-1==1?s[r[1]]=a:r.length-1==2?s[r[1]][r[2]]=a:r.length-1==3?s[r[1]][r[2]][r[3]]=a:console.error("Three levels are supported!")}let n=(t,e)=>{for(let s in t){let i=s.toLowerCase();"Object"===axType(t[s])?n(t[s],e[i]):t[s]=e[i]}};n(e,s)}}return e},axAttrToJson=(t,e)=>{let s=axIdToDom(t);if(!s)return console.warn("The attribute node does not exist!"),{};let i=s.getAttribute(e);if(!e||!i)return{};if(!i.includes(":"))return{};let o=i.trim();return o.startsWith("{")||(o="{"+o+"}"),new Function("return "+o)()},axExtend=(t,e,s,i)=>{if(!t)return console.error(axError.notExist),!1;let o=s?axIdToDom(s):null;return axMerge(t,e),o&&axMerge(t,axAttrToJson(o,i)),t},axAddPlan=(t,e,s)=>{s.handlers.hasOwnProperty(t)||(s.handlers[t]=[]);let i=e.toString().replace(/\s/g,"").replace(/\;/g,"").match(/{(\S*)}/)[1],o=s.handlers[t].toString().replace(/\s/g,"").replace(/\;/g,"");!(o.indexOf(i)>-1)&&s.handlers[t].push(e)},axExePlan=(t,e,...s)=>{if(!e.handlers.hasOwnProperty(t))return console.warn(`The ${t} event is unregistered or unusable!`);e.handlers[t].forEach(t=>{t.call(e,...s)})},axDelPlan=(t,e,s)=>{if(!s.handlers.hasOwnProperty(t))return console.warn(`The ${t} event is invalid or unusable!`);if(e){let i=s.handlers[t].findIndex(t=>t===e);if(void 0===i)return console.warn(`The ${t} event is not bound!`);s.handlers[t].splice(i,1),0===s.handlers[t].length&&delete s.handlers[t]}else delete s.handlers[t]},axAddElem=(t,e,s)=>{t.toLowerCase();let i=document.createElement(t);if(e)for(let t in e)i.setAttribute(t,e[t]);let o=function(t,e){if(!e)return!1;Array.isArray(e)?e.length>0&&e.forEach(e=>{o(t,e)}):"object"==typeof e?t.appendChild(e):t.insertAdjacentHTML("beforeEnd",e)};return o(i,s),i},axStrToFilter=(t,e,s)=>{let i=`source.filter(item =>${t})`,o=new Function("source","return "+i)(e);return s&&s(o),o},axRangeReplace=(t,e,s,i,o)=>{"string"!=typeof t&&(t=JSON.stringify(t)),"string"!=typeof e&&(t=JSON.stringify(e));let a="";return a=s||i?i?s?t.substring(0,s)+e+t.substring(i):o?t.substring(i-o)+e+t.substring(0,s):e+t.substring(i):o?t.substring(0,s)+e+t.substring(s+o):t.substring(0,s)+e:e,a},axArrange=(t,e,s=0,i=[],o=[])=>{let a=t.length;if(!(s+e>a)){for(let n=s;n<a;n++){if(1===e){o.push([...i,t[n]]),n+1<a&&axArrange(t,e,n+1,i,o);break}axArrange(t,e-1,n+1,[...i,t[n]],o)}return o}},axAjax=(t,e,s)=>{if(!t)return console.error("There is no options!"),!1;let i=axAddElem("SPAN",{"ajax-message":""}),o=e?axIdToDom(e):null;o&&o.appendChild(i);let a={url:"",selector:"",type:"post",async:!0,data:{},delay:6e4,contentType:"",headers:{},responseType:"",catchable:!1,abort:()=>{o?(i.innerHTML='<i class="ax-color-warning">中止了请求！</i>',o.setAttribute("ajax-result","abort")):console.error("中止了请求！")},timeout:()=>{o?(i.innerHTML='<i class="ax-color-danger">请求超时了！</i>',o.setAttribute("ajax-result","timeout")):console.error("请求超时了！")},loading:'<span class="ax-loading"><i></i></span>',opened:"",before:t=>{o&&(i.innerHTML=t.content,o.setAttribute("ajax-result","before"))},downloading:()=>{},uploading:()=>{},success:t=>{o&&(o.innerHTML=t.content,o.setAttribute("ajax-result","success"))},error:t=>{o?(i.innerHTML=`<i class="ax-color-danger">错误状态：${t.status}</i>`,o.setAttribute("ajax-result","error")):console.error(`错误状态：${t.status}`)}};for(let e in t)a[e]=t[e];let n="";n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");let r="";if("FormData"==axType(a.data))r=a.data;else if("Object"==axType(a.data))if(a.contentType.includes("json"))r=JSON.stringify(a.data);else{for(let t in a.data)r+="&"+t+"="+a.data[t];a.contentType="application/x-www-form-urlencoded"}else a.data=a.data.trim(),r=a.data.startsWith("&")?a.data.slice(1):a.data,a.contentType="application/x-www-form-urlencoded";if(a.headers["Content-Type"]=a.contentType,!a.contentType.includes("urlencoded")&&"get"==a.type.toLowerCase())return console.error("Please request data with post!"),!1;let l,h=()=>{for(let t in a.headers)a.headers[t]&&n.setRequestHeader(t,a.headers[t])};n.timeout=a.delay,n.responseType=a.responseType;let d=()=>{l&&n.removeEventListener("timeout",l),n.abort(),!axIsEmpty(a.abort)&&a.abort(o,n)},p=new Promise((t,e)=>{let i=(t,e)=>{let s=t.loaded,i=t.total,a=0,n=0,r="0%",l=new Date(t.timeStamp).getTime();t.lengthComputable&&(a=s/i,n=Math.round(100*a),r=n+"%",e&&e({result:r,percent:n,current:s,total:i,ratio:a,time:l,dom:o}))};n.upload.onprogress=(t=>{i(t,t=>{!axIsEmpty(a.uploading)&&a.uploading(t)})}),n.onprogress=(t=>{i(t,t=>{!axIsEmpty(a.downloading)&&a.downloading(t)})}),n.onerror=(t=>{let s={content:n.response,status:n.status,dom:o,xhr:n};!axIsEmpty(a.error)&&a.error(s),a.catchable&&e(s)}),l=(()=>{let t={content:n.response,status:n.status,dom:o,xhr:n};o&&o.setAttribute("ajax-result","timeout"),!axIsEmpty(a.timeout)&&a.timeout(t),a.catchable&&e(t)}),n.addEventListener("timeout",l),n.onreadystatechange=function(){if(n.readyState<4){let t={content:a.loading,status:n.status,dom:o,xhr:n,abort:d};1===n.readyState&&!axIsEmpty(a.opened)&&a.opened(t),!axIsEmpty(a.before)&&a.before(t),s&&s(t)}else if(n.status>=200&&n.status<300||304==n.status)if(a.responseType&&"text"!=n.responseType){o&&o.setAttribute("ajax-result","success");let e={content:n.response,status:n.status,dom:o,xhr:n};!axIsEmpty(a.success)&&a.success(e),t(e)}else{let e=document.createElement("div"),s="",i=/(<head\b[^<]*(?:(?!<\/head>)<[^<]*)*<\/head>)|(<\/?html.*?>)|(<\!DOCTYPE.*?html.*?>)|(<\/?body.*?>)/gi,r=axStrEnd(a.url,"#"),l=a.selector||r;e.innerHTML=n.responseText,l&&e.querySelector(l)?s=e.querySelector(l).innerHTML:l&&!e.querySelector(l)?(console.warn(`The node of "${l}" is not exist!`),s=n.responseText.replace(i,"").trim()):s="{"==n.responseText.trim().substr(0,1)||"["==n.responseText.trim().substr(0,1)?JSON.parse(n.responseText.trim()):n.responseText.replace(i,"").trim(),o&&o.setAttribute("ajax-result","success");let h={content:s,status:n.status,dom:o,xhr:n};!axIsEmpty(a.success)&&a.success(h),t(h)}else{let t={content:n.response,status:n.status,dom:o,xhr:n};!axIsEmpty(a.error)&&a.error(t),a.catchable&&e(t)}},"get"==a.type.toLowerCase()?(n.open("get",a.url+"?now="+(new Date).getTime()+"&"+r,a.async),h(),n.send()):"post"==a.type.toLowerCase()&&(n.open("post",a.url,a.async),h(),n.send(r))});return p.xhr=n,p.abort=d,p},axAjaxSubmit=(t,e,s,i={type:type,success:success,loading:loading,delay:delay,before:before,error:error,opended:opended,other:other})=>{if(!t)return console.error("Url is required!"),!1;if(!e)return console.error("Form node is required!"),!1;i.type=i.type||"post",i.other=i.other||{};let o=axIdToDom(e),a=s?axIdToDom(s):null,n=a?a.innerHTML:"",r=i.loading||"button",l=Object.assign(i.other,{formClass:"ax-form-submitting",buttonClass:"ax-button-submitting",buttonText:"正在提交",overlayClass:"ax-form-overlay",overlayShowClass:"ax-show",successText:"恭喜！提交成功！",errorText:"对不起，提交失败！"}),h=o.querySelector(".ax-form-overlay")?o.querySelector(".ax-form-overlay"):axAddElem("div",{class:"ax-form-overlay"});if(o.classList.contains(l.formClass))return!1;if(a&&a.classList.contains(l.buttonClass))return!1;let d,p={};return o.querySelectorAll("[name]").forEach(function(t){p[t.getAttribute("name")]=t.value.trim()}),d=axAjax({url:t,data:p,type:i.type,before:t=>{i.opened&&i.opened(t)},before:t=>{o.classList.add(l.formClass),a&&a.classList.add(l.buttonClass),"button"==r&&a?(a.innerHTML=l.buttonText,a.insertAdjacentHTML("afterbegin",'<i class="ax-btn-loading"></i>')):(h.innerHTML=t.content,h.classList.add(l.overlayClass),o.querySelector(".ax-form-overlay")||o.appendChild(h)),i.before&&i.before(t)},success:t=>{setTimeout(()=>{o.classList.remove(l.formClass),a&&a.classList.remove(l.buttonClass),"button"==r&&a?a.innerHTML=n:h.classList.remove(l.overlayClass),new axMessage({content:l.successText,result:"success",iconShow:!0}),i.success&&i.success(t)},0===i.delay?0:i.delay||1e3)},error:t=>{"button"==r&&a?a.innerHTML=n:h.classList.remove(l.overlayClass),new axMessage({content:l.errorText,result:"error",iconShow:!0}),i.error&&i.error(t)}}),d},axOffset=t=>{if(!t)return console.error(axError.notExist),!1;let e,s,i=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=axIdToDom(t);return e=a.getBoundingClientRect().left+i,s=a.getBoundingClientRect().top+o,{left:e,top:s}},axWidth=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t),{width:i,paddingLeft:o,paddingRight:a,marginLeft:n,marginRight:r,borderLeftWidth:l,borderRightWidth:h}=getComputedStyle(s);return i=parseInt(i,10),o=parseInt(o,10),a=parseInt(a,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),h=parseInt(h,10),"inner"==e?i+o+a:"outer"==e?i+o+a+n+r+l+h:i},axHeight=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t),{height:i,paddingTop:o,paddingBottom:a,marginTop:n,marginBottom:r,borderTopWidth:l,borderBottomWidth:h}=getComputedStyle(s);return i=parseInt(i,10),o=parseInt(o,10),a=parseInt(a,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),h=parseInt(h,10),"inner"==e?i+o+a:"outer"==e?i+o+a+n+r+l+h:i},axArrHeight=t=>{if(!t)return console.error(axError.notExist),!1;let e=axIdToDom(t),{height:s,paddingTop:i,paddingBottom:o,marginTop:a,marginBottom:n,borderTopWidth:r,borderBottomWidth:l}=getComputedStyle(e);return s=parseInt(s,10),i=parseInt(i,10),o=parseInt(o,10),a=parseInt(a,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),{height:s,paddingTop:i,paddingBottom:o,marginTop:a,marginBottom:n,borderTopWidth:r,borderBottomWidth:l}},axSelector=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t),i=!0;if(e){e=String(e).replace(/\s+/g,""),e=String(e).split(",");for(let t=0;t<e.length;t++){if(!e[t]){i=!0;break}if("class"==axStrType(e[t])){let o=e[t].replace(".","");if(s.classList.contains(o)){i=!0;break}i=!1}else if("id"==axStrType(e[t])){let o=e[t].replace("#","");if(s.getAttribute("id")==o){i=!0;break}i=!1}else{let o=e[t].toUpperCase();if(s.nodeName==o){i=!0;break}i=!1}}}else i=!0;return i},axNot=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t),i=!0;if(e){e=String(e).replace(/\s+/g,""),e=String(e).split(",");for(let t=0;t<e.length;t++)if("class"==axStrType(e[t])){let o=e[t].replace(".","");if(s.classList.contains(o)){i=!0;break}i=!1}else if("id"==axStrType(e[t])){let o=e[t].replace("#","");if(s.getAttribute("id")==o){i=!0;break}i=!1}else if(e){let o=e[t].toUpperCase();if(s.nodeName==o){i=!0;break}i=!1}else i=!1}else i=!1;return i},axSiblings=(t,e,s,i)=>{if(!t)return console.error(axError.notExist),!1;let o=axIdToDom(t);return[...o.parentNode.children].filter(t=>e?axSelector(t,s)&&!axNot(t,i):t!==o&&axSelector(t,s)&&!axNot(t,i))},axChildren=(t,e,s)=>{if(!t)return console.error(axError.notExist),!1;let i=axIdToDom(t);return[...i.children].filter(t=>axSelector(t,e)&&!axNot(t,s))},axParents=(t,e,s,i,o=[])=>{if(!t)return console.error("No node to start!"),!1;let a=axIdToDom(t),n=e?axIdToDom(e):null;return"BODY"!==a.parentElement.nodeName?(s&&o.indexOf(a)<0&&o.push(a),n?(i&&o.indexOf(n)<0&&o.push(n),a.parentElement!==n?(o.push(a.parentElement),axParents(a.parentElement,n,s,i,o)):o):(o.push(a.parentElement),axParents(a.parentElement,n,s,i,o))):o},axCurves={linear:t=>t,easeIn:t=>t*t*t,easeOut:t=>(t-1)*(t-1)*(t-1)+1,easeInOut:t=>t<.5?2*t*t:-2(t-1)*(t-1)+1,easeOutIn:t=>t<.5?Math.sqrt(.5*t):1-Math.sqrt(.5*(1-t))},axSlideDown=(t,e,s,i,o="easeOut")=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t),n=t=>t/3+250,r=a.style.cssText;if(e=e||"block","none"===window.getComputedStyle(a).display){a.style.cssText=`${r}display: ${e};`;const{height:t,paddingTop:l,paddingBottom:h,marginTop:d,marginBottom:p}=axArrHeight(a);let c;c=void 0!==i&&"number"==typeof i?i:n(t),a.style.cssText=`${r}display: ${e}; padding-top: 0; padding-bottom: 0;margin-top: 0; margin-bottom: 0;`;const m=(new Date).getTime(),u=()=>{const i=(new Date).getTime()-m,n=i/c,g=axCurves[o](n),f=0+t*g,x=0+l*g,y=0+h*g,b=0+d*g,v=0+p*g;i<=c&&Math.ceil(f)<t?a.style.cssText=`${r}overflow:hidden;display: ${e}; padding-top: ${x}px; padding-bottom: ${y}px;margin-top: ${b}px; margin-bottom: ${v}px; height: ${f}px`:a.style.cssText=`${r}display: ${e};`;const D=requestAnimationFrame(u);(Math.ceil(f)>=t||!t)&&(cancelAnimationFrame(D),s&&s())};u()}return a},axHeightDown=(t,e,s,i,o="easeOut")=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t),n=t=>t/3+250;const r=e&&e.height?e.height:axArrHeight(a).height,l=e&&e.paddingTop?e.paddingTop:axArrHeight(a).paddingTop,h=e&&e.paddingBottom?e.paddingBottom:axArrHeight(a).paddingBottom,d=e&&e.marginTop?e.marginTop:axArrHeight(a).marginTop,p=e&&e.marginBottom?e.marginBottom:axArrHeight(a).marginBottom;let c;c=void 0!==i&&"number"==typeof i?i:n(r),a.style.overflow="hidden",a.style.height=0,l&&(a.style.paddingTop=0),h&&(a.style.paddingBottom=0),d&&(a.style.marginTop=0),p&&(a.style.marginBottom=0);const m=(new Date).getTime(),u=()=>{const t=(new Date).getTime()-m,e=t/c,i=axCurves[o](e),n=0+r*i,g=0+l*i,f=0+h*i,x=0+d*i,y=0+p*i;t<=c&&Math.ceil(n)<r?(a.style.height=n+"px",l&&(a.style.paddingTop=g+"px"),h&&(a.style.paddingBottom=f+"px"),d&&(a.style.marginTop=x+"px"),p&&(a.style.marginBottom=y+"px")):(a.style.height=r+"px",l&&(a.style.paddingTop=l+"px"),h&&(a.style.paddingBottom=h+"px"),
d&&(a.style.marginTop=d+"px"),p&&(a.style.marginBottom=p+"px"));const b=requestAnimationFrame(u);(Math.ceil(n)>=r||!r)&&(cancelAnimationFrame(b),s&&s())};return u(),a},axSlideUp=(t,e,s,i,o="easeOut")=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t),n=t=>t/3+250,r=a.style.cssText;if(e=e||"block","none"!==window.getComputedStyle(a).display){const{height:t,paddingTop:l,paddingBottom:h,marginTop:d,marginBottom:p}=axArrHeight(a);let c;c=void 0!==i&&"number"==typeof i?i:n(t),a.style.cssText=`${r}display: ${e}; padding-top: 0; padding-bottom: 0;margin-top: 0; margin-bottom: 0;`;const m=(new Date).getTime(),u=()=>{const i=(new Date).getTime()-m,n=i/c,g=axCurves[o](n),f=t+-t*g,x=l+-l*g,y=h+-h*g,b=d+-d*g,v=p+-p*g;i<=c&&Math.floor(f)>0?a.style.cssText=`${r}overflow:hidden;display: ${e}; padding-top: ${x}px; padding-bottom: ${y}px;margin-top: ${b}px; margin-bottom: ${v}px; height: ${f}px`:a.style.cssText=`${r}display: none`;const D=requestAnimationFrame(u);(Math.floor(f)<=0||!t)&&(cancelAnimationFrame(D),s&&s())};u()}return a},axHeightUp=(t,e,s,i,o="easeOut")=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t),n=t=>t/3+250;const r=e&&e.height?e.height:axArrHeight(a).height,l=e&&e.paddingTop?e.paddingTop:axArrHeight(a).paddingTop,h=e&&e.paddingBottom?e.paddingBottom:axArrHeight(a).paddingBottom,d=e&&e.marginTop?e.marginTop:axArrHeight(a).marginTop,p=e&&e.marginBottom?e.marginBottom:axArrHeight(a).marginBottom;let c;c=void 0!==i&&"number"==typeof i?i:n(r),a.style.overflow="hidden";const m=(new Date).getTime(),u=()=>{const t=(new Date).getTime()-m,e=t/c,i=axCurves[o](e),n=r+-r*i,g=l+-l*i,f=h+-h*i,x=d+-d*i,y=p+-p*i;t<=c&&Math.floor(n)>0?(a.style.height=n+"px",l&&(a.style.paddingTop=g+"px"),h&&(a.style.paddingBottom=f+"px"),d&&(a.style.marginTop=x+"px"),p&&(a.style.marginBottom=y+"px")):(a.style.height=0,l&&(a.style.paddingTop=0),h&&(a.style.paddingBottom=0),d&&(a.style.marginTop=0),p&&(a.style.marginBottom=0));const b=requestAnimationFrame(u);(Math.floor(n)<=0||!r)&&(cancelAnimationFrame(b),s&&s())};return u(),a},axSlideToggle=(t,e,s,i,o,a="easeOut")=>{if(!t)return console.error(axError.notExist),!1;let n=axIdToDom(t);return e=e||"block","none"===window.getComputedStyle(n).display?axSlideDown(n,e,s,o,a):axSlideUp(n,e,i,o,a),n},axFadeIn=(t,e,s,i=200,o="linear")=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t);if(e=e||"block",a){let t=window.getComputedStyle(a).display,s=window.getComputedStyle(a).opacity;if("none"===t){a.style.display=e,a.style.opacity=0;let t=(new Date).getTime(),s=()=>{let e=(new Date).getTime()-t,n=e/i,r=axCurves[o](n);a.style.opacity=e<=i&&r<=1?r:1;let l=requestAnimationFrame(s);r>=1&&cancelAnimationFrame(l)};s()}else if("none"!==t&&1!==Number(s)){let t=(new Date).getTime(),e=()=>{let n=(new Date).getTime()-t,r=n/i,l=axCurves[o](r)+Number(s);a.style.opacity=n<=i&&l<=1?l:1;let h=requestAnimationFrame(e);l>=1&&cancelAnimationFrame(h)};e()}}return s&&s(),a},axFadeOut=(t,e,s=200,i="linear")=>{if(!t)return console.error(axError.notExist),!1;let o=axIdToDom(t);if(o){let t=window.getComputedStyle(o).display,e=window.getComputedStyle(o).opacity;if("none"!==t||0!==Number(e)){o.style.opacity=e;let t=(new Date).getTime(),a=()=>{let n=(new Date).getTime()-t,r=n/s,l=Number(e)-axCurves[i](r);n<=s&&l>0?o.style.opacity=l:(o.style.opacity=0,o.style.display="none");let h=requestAnimationFrame(a);l<=0&&cancelAnimationFrame(h)};a()}}return e&&e(),o},axFadeToggle=(t,e,s,i,o=200,a="linear")=>{if(!t)return console.error(axError.notExist),!1;let n=axIdToDom(t);if(n){let t=window.getComputedStyle(n).display,r=window.getComputedStyle(n).opacity;"none"===t?axFadeIn(n,e,s,o,a):Number(r)<=.5?axFadeIn(n,e,s,o,a):(Number(r),axFadeOut(n,i,o,a))}return n},axShow=(t,e,s)=>{if(!t)return console.error(axError.notExist),!1;let i=axIdToDom(t);"visible"==e?i.style.visibility="visible":i.style.display=e||"block",s&&s()},axHide=(t,e,s)=>{if(!t)return console.error(axError.notExist),!1;let i=axIdToDom(t);"hidden"==e?i.style.visibility="hidden":i.style.display="none",s&&s()},axToggle=(t,e,s,i,o)=>{if(!t)return console.error(axError.notExist),!1;let a=axIdToDom(t);axIsVisible(a)?axHide(a,s,o):axShow(a,e,i)},axScrollTo=(t,e={})=>{let s,i=e.parent?axIdToDom(e.parent):null,o=i||window,a=~~e.offset||0,n=e.curve||"easeOut",r="number"==typeof t?"":axIdToDom(t),l=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,h=i?i.scrollTop:l,d=(new Date).getTime();i&&"static"===axStyle(document.querySelector("#spys01")).position&&(i.style.position="relative"),s=r?i?r.offsetTop-i.scrollTop:r.getBoundingClientRect().top:"number"==typeof t?t-h:-h;let p=e.duration&&"number"==typeof e.duration?e.duration:Math.abs(s)/4+1e3,c=()=>{let t=(new Date).getTime()-d,e=t/p,i=h+(s-a)*axCurves[n](e);o.scrollTo(0,i),c.timer=requestAnimationFrame(c),t>=p&&(o.scrollTo(0,i),cancelAnimationFrame(c.timer))};return c(),t},axIcon={font:{success:'<i class="ax-iconfont ax-icon-check-o"></i>',error:'<i class="ax-iconfont ax-icon-close-o"></i>',warning:'<i class="ax-iconfont ax-icon-warning-o"></i>',info:'<i class="ax-iconfont ax-icon-info-o"></i>',question:'<i class="ax-iconfont ax-icon-question-o"></i>',successFill:'<i class="ax-iconfont ax-icon-check-o-f"></i>',errorFill:'<i class="ax-iconfont ax-icon-close-o-f"></i>',warningFill:'<i class="ax-iconfont ax-icon-warning-o-f"></i>',infoFill:'<i class="ax-iconfont ax-icon-info-o-f"></i>',questionFill:'<i class="ax-iconfont ax-icon-question-o-f"></i>'},svg:{success:'<svg class="svg-success" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M26.316,42.859L37.9984,54.5414L60.3826,32.1572"></path></svg>',error:'<svg class="svg-error" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M28.774,57.9246L57.9247,28.7739"></path><path class="svg-line svg-in-2" d="M57.9246,57.9246L28.7739,28.7739"></path></svg>',warning:'<svg class="svg-warning" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M43.4611 7.24c2.8081,0.0924 4.39,1.7 5.3045,3.1159l17.4543 29.9414 17.3445 29.7538c0.5448,1.0193 1.596,4.0544 0.1109,6.4168 -1.4849,2.3626 -3.6815,2.9155 -5.3768,2.992l-34.9082 0.0002 -34.6892 -0.0002c-1.1636,-0.0421 -4.3433,-0.6583 -5.6666,-3.1131 -1.3232,-2.4549 -0.7085,-4.6157 0.0723,-6.1078l17.454 -29.9417 17.3449 -29.7537c0.6185,-0.977 2.7471,-3.396 5.5554,-3.3036z"></path><path class="svg-line svg-out" d="M43.4611 7.24c2.8081,0.0924 4.39,1.7 5.3045,3.1159l17.4543 29.9414 17.3445 29.7538c0.5448,1.0193 1.596,4.0544 0.1109,6.4168 -1.4849,2.3626 -3.6815,2.9155 -5.3768,2.992l-34.9082 0.0002 -34.6892 -0.0002c-1.1636,-0.0421 -4.3433,-0.6583 -5.6666,-3.1131 -1.3232,-2.4549 -0.7085,-4.6157 0.0723,-6.1078l17.454 -29.9417 17.3449 -29.7537c0.6185,-0.977 2.7471,-3.396 5.5554,-3.3036z"></path><path class="svg-line svg-in-1" d="M43.3493,27.8713L43.3493,57.2858"></path><circle class="svg-circle svg-in-2" cx="43.3492" cy="64.3337" r="2.1166"></circle></svg>',info:'<svg class="svg-info" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M43.3493,65.0602L43.3493,30.9723"></path><circle class="svg-circle svg-in-2" cx="43.3492" cy="23.5856" r="2.1166"></circle></svg>',question:'<svg class="svg-question" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M32.3757 35.7255c-0.2203,-11.823 12.5789,-14.1087 18.4056,-9.4189 5.4663,4.3995 4.7426,12.804 -3.1088,17.9938 -3.0015,1.9839 -3.0003,3.8403 -3.0003,10.1707"></path><circle class="svg-circle svg-in-2" cx="44.6612" cy="60.5502" r="2.1166"></circle></svg>'}},axResult=(t,e)=>{if(!t)return console.error(axError.notExist),!1;let s=axIdToDom(t),i="";switch(e){case"success":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M26.316,42.859L37.9984,54.5414L60.3826,32.1572"></path>',s.querySelector("svg").classList.add("svg-success");break;case"error":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M28.774,57.9246L57.9247,28.7739"></path>\n            <path class="svg-line svg-in-2" d="M57.9246,57.9246L28.7739,28.7739"></path>',s.querySelector("svg").classList.add("svg-error");break;case"question":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M32.3757 35.7255c-0.2203,-11.823 12.5789,-14.1087 18.4056,-9.4189 5.4663,4.3995 4.7426,12.804 -3.1088,17.9938 -3.0015,1.9839 -3.0003,3.8403 -3.0003,10.1707"></path>\n            <circle class="svg-circle svg-in-2" cx="44.6612" cy="60.5502" r="2.1166"></circle>',s.querySelector("svg").classList.add("svg-question");break;case"info":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M43.3493,65.0602L43.3493,30.9723"></path>\n            <circle class="svg-circle svg-in-2" cx="43.3492" cy="23.5856" r="2.1166"></circle>',s.querySelector("svg").classList.add("svg-info")}s.classList.add("ax-result-show"),-1==s.querySelector("svg").innerHTML.indexOf("svg-in-1")&&s.querySelector("svg").insertAdjacentHTML("beforeend",i)},axCreateContent=(t,e,s)=>{let i,o=t.content,a={};if(t.url)if("async"===t.type){let n="",r="";"id"==axStrType(t.url)?(n=t.url.match(/(\S*)\#/)[1],r="#"+t.url.match(/\#(\S*)/)[1]):n=t.url,a=axAjax({url:n,selector:r,type:t.ajaxType||"post",opened:t=>{e.contentXhr=t.xhr},before:t=>{i=t.content},success:t=>{i="function"==typeof o?o(t.content):t.content,s&&s.call(e,i)}})}else"iframe"===t.type?(i=`<iframe src="${t.url}" frameborder="0" width="100%" height="100%"></iframe>`,t.footerShow=!1):"picture"===t.type?i=`\n            <div class="ax-media-container"><img src="${t.url}" /></div>\n            <div class="ax-media-title">${t.name}</div>\n            ${o}\n            `:"video"===t.type?i=`\n                <div class="ax-media-container"><video src="${t.url}" controls="controls" ></video></div>\n                <div class="ax-media-title">${t.name}</div>\n                ${o}\n                `:"audio"===t.type&&(i=`\n                <div class="ax-media-container"><audio src="${t.url}" controls="controls" ></audio></div>\n                <div class="ax-media-title">${t.name}</div>\n                ${o}\n                `),s&&s.call(e,i);else i="html"==t.type?"string"==typeof o&&"id"==axStrType(o)?document.querySelector(o).innerHTML:"function"==typeof o?o.call(e):o:o||"没有任何内容！",s&&s.call(e,i);return a.content=i,s&&s(i),a},axFooterBtns=t=>{let e=t.footerBreak?'<div class="ax-break-line"></div>':"",s="";if(t.note&&(t.note=`<div class="ax-note">${t.note}</div>`),t.footerShow)if("right"==t.footerType){let i="",o="",a="";t.confirm.text&&(o=`<a href="###" class="ax-btn ax-primary ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(i=`<a href="###" class="ax-btn ax-text ax-ignore ${t.cancel.classname}"  cancel>${t.cancel.icon}${t.cancel.text}</a>`),t.diy.text&&t.diy.callback?a=`<a href="###" class="ax-btn ax-text ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a>`:t.diy.text&&!t.diy.callback&&(a=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-btn ax-text ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a>`),s=`\n                                        ${e}\n                                        <div class="ax-padding">\n                                              <div class="ax-row">\n                                                  <div class="ax-col">\n                                                  ${t.note}\n                                                  </div>\n                                                  <div class="ax-btns">${a}${i}${o}</div>\n                                              </div>\n                                          </div>\n                          `}else if("line"==t.footerType){let e="",i="",o="";t.confirm.text&&(i=`<a href="###" class="ax-col ax-col-12 ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(e=`<a href="###" class="ax-col ax-col-12 ${t.cancel.classname}"  cancel>${t.cancel.icon}${t.cancel.text}</a><span class="ax-gutter-line"></span>`),t.diy.text&&t.diy.callback?o=`<a href="###" class="ax-col ax-col-12 ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a><span class="ax-gutter-line"></span>`:t.diy.text&&!t.diy.callback&&(o=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-col ax-col-12 ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a><span class="ax-gutter-line"></span>`),s=`\n                          <div class="ax-break-line"></div>\n                          <div class="ax-row">${o}${e}${i}</div>${t.note}\n                          `}else{let i="",o="",a="";t.confirm.text&&(o=`<a href="###" class="ax-btn ax-primary ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(i=`<a href="###" class="ax-btn ax-ignore ${t.cancel.classname}" cancel>${t.cancel.icon}${t.cancel.text}</a>`),t.diy.text&&t.diy.callback?a=`<a href="###" class="ax-btn ${t.diy.classname}" diy>${t.diy.icon}${t.diy.text}</a>`:t.diy.text&&!t.diy.callback&&(a=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-btn ${t.diy.classname}" diy>${t.diy.icon}${t.diy.text}</a>`),s=`\n                                        ${e}\n                                         <div class="ax-padding ax-align-center">${a}${i}${o}</div>\n                                         <div class="ax-break"></div>${t.note}\n                         `}else s="";return s},axLocalTime=(t,e)=>{let s,i,o,a,n;if(t){if(t=t.trim(),i=new Date(t),o=i instanceof Date&&!isNaN(i.getTime()),!o)return console.error('Date format must be "YYYY-MM-DD" or "YYYY/MM/DD"');s=t.replace(/-/g,"/"),a=new Date(s).getTime(),n=-1!==s.indexOf(":")?0:6e4*new Date(s).getTimezoneOffset()}else a=(new Date).getTime(),n=0;return e?a-n:a},axCreateData=(t,e=["src","cover","caption","type"],s=["media","cover","caption","type"],i="figure",o=["","","","image"],a)=>{let n=[],r="";return"String"===axType(t)&&"id"==axStrType(t)?n=axTplToArr(t,e,s,i,o):("Array"===axType(t)||"Object"===axType(t)?r=JSON.stringify(t):"String"===axType(t)&&(r=t),n=axStrToArr(r,s,o)),n=n.filter(t=>t[s[0]]),a&&a(n),n},axSort=(t,e,s)=>{let i=[];Array.isArray(e)?i=e.filter(t=>t.order):e.order&&i.push(e);let o=(t,e,i)=>{if(0==i.length)return 0;let a,n,r,l=i.shift(),h=l.col,d=l.order,p=l.attr||"label";return"table"==s?"number"==typeof h?(n=t.children.filter(t=>t.index===h)[0][p],r=e.children.filter(t=>t.index===h)[0][p]):(n=t.children.find(t=>t.name===h)[p],r=e.children.find(t=>t.name===h)[p]):(n=t[h],r=e[h]),a=isNaN(n-r)?"desc"===d?r.localeCompare(n,"zh-CN-u-kf-lower"):n.localeCompare(r,"zh-CN-u-kf-lower"):"desc"===d?r-n:n-r,n===r?o(t,e,i):a};return t.sort((t,e)=>o(t,e,[...i]))},axSerialize=(t,e="string",s=",")=>{let i,o,a=[];if(i=Array.isArray(t)?t:[...axIdToDom(t).querySelectorAll("[name]")].filter(t=>["INPUT","SELECT","TEXTAREA"].includes(t.nodeName)&&t.name&&!t.name.includes("_ax_alt")),i.forEach(t=>{let e=a.find(e=>e.name==t.name);e?"checkbox"!=t.type&&"radio"!=t.type||e.dom.push(t):a.push({name:t.name,type:t.type,dom:[t]})}),a.forEach(t=>{"file"==t.type?t.value=axMultiValues(t.dom[0],"file","array"):"checkbox"==t.type?t.value=axMultiValues(t.dom,"checkbox","string","",s):"radio"==t.type?t.value=axMultiValues(t.dom,"radio","string"):t.type.includes("select")?t.value=axMultiValues(t.dom[0],"select","string","",s):t.value=t.dom[0].value}),"string"==e){let t="";a.forEach(e=>{t+="&"+e.name+"="+e.value}),o=t}else if("json"==e){let t={};a.forEach(e=>{t[e.name]=e.value}),o=t}else"array"==e&&(a.forEach(t=>{delete t.type,delete t.dom}),o=a);return o},axArrSearch=(t,e,s,i)=>{if(axIsEmpty(t)||axIsEmpty(e)||!s||0===s.length)return[];let o=Object.assign({fuzzy:!0,separator:" ",limit:0,reorder:!1,ignore:!0},i),a=axSplitToArr(t,o.separator),n=axSplitToArr(e,","),r=[],l="("+a.join("|")+")",h=new RegExp(l,`${o.ignore?"i":""}g`);for(let t of s){let e=n.map(e=>t[e]).join("■"),s=e.match(h),i={};s&&(i={source:t,weight:s.length,keys:[...new Set(s)]},o.fuzzy?r.push(i):[...new Set(s)].length===a.length&&r.push(i))}return o.reorder&&r.sort((t,e)=>e.weight-t.weight),o.limit&&r.length>o.limit&&r.splice(o.limit),r};class axObserve{constructor(t,e){if(this.dataType=axType(t),"Object"!==this.dataType&&"Array"!==this.dataType)return{instance:this,proxy:t};if(this.options=axExtend({deep:!1,accept:!0,once:!1,methods:["set","deleteProperty"],callback:""},e),this.handlers={},this.completeIndex=0,this.reacts=0,this.proxys=[],this.data=t,this.fullMethods={get:(t,e,s)=>{let i=t[e];return this.options.callback&&this.options.callback({target:t,key:e,proxy:s,value:i,type:"get"}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,proxy:s,value:i,type:"get"}),Reflect.get(t,e,s)},set:(t,e,s,i)=>{if(JSON.stringify(t[e])==JSON.stringify(s))return!0;let o=axType(s),a=t[e],n=void 0===t[e]?"add":"edit";return"Object"!==o&&"Array"!==o||!this.options.deep||(s=this.proxy(s)),this.options.accept&&Reflect.set(t,e,s,i),this.options.callback&&this.options.callback({target:t,key:e,proxy:i,value:s,raw:a,type:n}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,proxy:i,value:s,raw:a,type:n}),this.reacts++,this.complete(this.reacts),!0},deleteProperty:(t,e)=>{let s=t[e];return this.options.accept&&Reflect.deleteProperty(t,e),this.options.callback&&this.options.callback({target:t,key:e,value:s,type:"delete"}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,value:s,type:"delete"}),this.reacts++,this.complete(this.reacts),!0}},this.methods={},this.options.methods.forEach(t=>{this.methods[t]=this.fullMethods[t]}),this.options.deep)for(let e in t)if(t.hasOwnProperty(e)){let s=axType(t[e]);"Object"!==s&&"Array"!==s||(t[e]=this.proxy(t[e]))}return{instance:this,proxy:this.proxy(t)}}complete(t){setTimeout(()=>{if(t===this.reacts){if(this.options.once&&0!==this.completeIndex)return!1;this.options.callback&&this.options.callback({target:this.data,proxy:this.proxys[0],type:"complete"}),this.handlers.hasOwnProperty("complete")&&this.emit("complete",{target:this.data,proxy:this.proxys[0],type:"complete"}),this.completeIndex++}},0)}proxy(t){let e=new Proxy(t,this.methods);return 0===this.proxys.length&&this.proxys.push(e),e}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self,t.axSwiper=e())})(this,function(){function t(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function e(s,i){void 0===s&&(s={}),void 0===i&&(i={}),Object.keys(i).forEach(o=>{void 0===s[o]?s[o]=i[o]:t(i[o])&&t(s[o])&&Object.keys(i[o]).length>0&&e(s[o],i[o])})}function s(){const t="undefined"!=typeof document?document:{};return e(t,ze),t}function i(){const t="undefined"!=typeof window?window:{};return e(t,Re),t}function o(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get:()=>e,set(t){e.__proto__=t}})}function a(t){void 0===t&&(t=[]);const e=[];return t.forEach(t=>{Array.isArray(t)?e.push(...a(t)):e.push(t)}),e}function n(t,e){return Array.prototype.filter.call(t,e)}function r(t){const e=[];for(let s=0;s<t.length;s+=1)-1===e.indexOf(t[s])&&e.push(t[s]);return e}function l(t,e){if("string"!=typeof t)return[t];const s=[],i=e.querySelectorAll(t);for(let t=0;t<i.length;t+=1)s.push(i[t]);return s}function h(t,e){const o=i(),a=s();let n=[];if(!e&&t instanceof Fe)return t;if(!t)return new Fe(n);if("string"==typeof t){const s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let t="div";0===s.indexOf("<li")&&(t="ul"),0===s.indexOf("<tr")&&(t="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(t="tr"),0===s.indexOf("<tbody")&&(t="table"),0===s.indexOf("<option")&&(t="select");const e=a.createElement(t);e.innerHTML=s;for(let t=0;t<e.childNodes.length;t+=1)n.push(e.childNodes[t])}else n=l(t.trim(),e||a)}else if(t.nodeType||t===o||t===a)n.push(t);else if(Array.isArray(t)){if(t instanceof Fe)return t;n=t}return new Fe(r(n))}function d(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=a(e.map(t=>t.split(" ")));return this.forEach(t=>{t.classList.add(...i)}),this}function p(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=a(e.map(t=>t.split(" ")));return this.forEach(t=>{t.classList.remove(...i)}),this}function c(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=a(e.map(t=>t.split(" ")));this.forEach(t=>{i.forEach(e=>{t.classList.toggle(e)})})}function m(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=a(e.map(t=>t.split(" ")));return n(this,t=>i.filter(e=>t.classList.contains(e)).length>0).length>0}function u(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(let s=0;s<this.length;s+=1)if(2===arguments.length)this[s].setAttribute(t,e);else for(const e in t)this[s][e]=t[e],this[s].setAttribute(e,t[e]);return this}function g(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function f(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function x(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration="string"!=typeof t?`${t}ms`:t;return this}function y(){function t(t){const e=t.target;if(!e)return;const s=t.target.dom7EventData||[];if(s.indexOf(t)<0&&s.unshift(t),h(e).is(n))r.apply(e,s);else{const t=h(e).parents();for(let e=0;e<t.length;e+=1)h(t[e]).is(n)&&r.apply(t[e],s)}}function e(t){const e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),r.apply(this,e)}for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];let[a,n,r,l]=i;"function"==typeof i[1]&&([a,r,l]=i,n=void 0),l||(l=!1);const d=a.split(" ");let p;for(let s=0;s<this.length;s+=1){const i=this[s];if(n)for(p=0;p<d.length;p+=1){const e=d[p];i.dom7LiveListeners||(i.dom7LiveListeners={}),i.dom7LiveListeners[e]||(i.dom7LiveListeners[e]=[]),i.dom7LiveListeners[e].push({listener:r,proxyListener:t}),i.addEventListener(e,t,l)}else for(p=0;p<d.length;p+=1){const t=d[p];i.dom7Listeners||(i.dom7Listeners={}),i.dom7Listeners[t]||(i.dom7Listeners[t]=[]),i.dom7Listeners[t].push({listener:r,proxyListener:e}),i.addEventListener(t,e,l)}}return this}function b(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];let[i,o,a,n]=e;"function"==typeof e[1]&&([i,a,n]=e,o=void 0),n||(n=!1);const r=i.split(" ");for(let t=0;t<r.length;t+=1){const e=r[t];for(let t=0;t<this.length;t+=1){const s=this[t];let i;if(!o&&s.dom7Listeners?i=s.dom7Listeners[e]:o&&s.dom7LiveListeners&&(i=s.dom7LiveListeners[e]),i&&i.length)for(let t=i.length-1;t>=0;t-=1){const o=i[t];a&&o.listener===a?(s.removeEventListener(e,o.proxyListener,n),i.splice(t,1)):a&&o.listener&&o.listener.dom7proxy&&o.listener.dom7proxy===a?(s.removeEventListener(e,o.proxyListener,n),i.splice(t,1)):a||(s.removeEventListener(e,o.proxyListener,n),i.splice(t,1))}}}return this}function v(){const t=i();for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];const a=s[0].split(" "),n=s[1];for(let e=0;e<a.length;e+=1){const i=a[e];for(let e=0;e<this.length;e+=1){const o=this[e];if(t.CustomEvent){const e=new t.CustomEvent(i,{detail:n,bubbles:!0,cancelable:!0});o.dom7EventData=s.filter((t,e)=>e>0),o.dispatchEvent(e),o.dom7EventData=[],delete o.dom7EventData}}}return this}function D(t){function e(i){i.target===this&&(t.call(this,i),s.off("transitionend",e))}const s=this;return t&&s.on("transitionend",e),this}function w(t){if(this.length>0){if(t){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function T(t){if(this.length>0){if(t){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function E(){if(this.length>0){const t=i(),e=s(),o=this[0],a=o.getBoundingClientRect(),n=e.body,r=o.clientTop||n.clientTop||0,l=o.clientLeft||n.clientLeft||0,h=o===t?t.scrollY:o.scrollTop,d=o===t?t.scrollX:o.scrollLeft;return{top:a.top+h-r,left:a.left+d-l}}return null}function S(){const t=i();return this[0]?t.getComputedStyle(this[0],null):{}}function A(t,e){const s=i();let o;if(1===arguments.length){if("string"!=typeof t){for(o=0;o<this.length;o+=1)for(const e in t)this[o].style[e]=t[e];return this}if(this[0])return s.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(o=0;o<this.length;o+=1)this[o].style[t]=e;return this}return this}function C(t){return t?(this.forEach((e,s)=>{t.apply(e,[e,s])}),this):this}function M(t){const e=n(this,t);return h(e)}function k(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function I(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function L(t){const e=i(),o=s(),a=this[0];let n,r;if(!a||void 0===t)return!1;if("string"==typeof t){if(a.matches)return a.matches(t);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(t);if(a.msMatchesSelector)return a.msMatchesSelector(t);for(n=h(t),r=0;r<n.length;r+=1)if(n[r]===a)return!0;return!1}if(t===o)return a===o;if(t===e)return a===e;if(t.nodeType||t instanceof Fe){for(n=t.nodeType?[t]:t,r=0;r<n.length;r+=1)if(n[r]===a)return!0;return!1}return!1}function $(){let t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}}function P(t){if(void 0===t)return this;const e=this.length;if(t>e-1)return h([]);if(t<0){const s=e+t;return h(s<0?[]:[this[s]])}return h([this[t]])}function _(){let t;const e=s();for(let s=0;s<arguments.length;s+=1){t=s<0||arguments.length<=s?void 0:arguments[s];for(let s=0;s<this.length;s+=1)if("string"==typeof t){const i=e.createElement("div");for(i.innerHTML=t;i.firstChild;)this[s].appendChild(i.firstChild)}else if(t instanceof Fe)for(let e=0;e<t.length;e+=1)this[s].appendChild(t[e]);else this[s].appendChild(t)}return this}function O(t){const e=s();let i,o;for(i=0;i<this.length;i+=1)if("string"==typeof t){const s=e.createElement("div");for(s.innerHTML=t,o=s.childNodes.length-1;o>=0;o-=1)this[i].insertBefore(s.childNodes[o],this[i].childNodes[0])}else if(t instanceof Fe)for(o=0;o<t.length;o+=1)this[i].insertBefore(t[o],this[i].childNodes[0]);else this[i].insertBefore(t,this[i].childNodes[0]);return this}function N(t){return this.length>0?t?this[0].nextElementSibling&&h(this[0].nextElementSibling).is(t)?h([this[0].nextElementSibling]):h([]):this[0].nextElementSibling?h([this[0].nextElementSibling]):h([]):h([])}function q(t){const e=[];let s=this[0];if(!s)return h([]);for(;s.nextElementSibling;){const i=s.nextElementSibling;t?h(i).is(t)&&e.push(i):e.push(i),s=i}return h(e)}function H(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&h(e.previousElementSibling).is(t)?h([e.previousElementSibling]):h([]):e.previousElementSibling?h([e.previousElementSibling]):h([])}return h([])}function B(t){const e=[];let s=this[0];if(!s)return h([]);for(;s.previousElementSibling;){const i=s.previousElementSibling;t?h(i).is(t)&&e.push(i):e.push(i),s=i}return h(e)}function z(t){const e=[];for(let s=0;s<this.length;s+=1)null!==this[s].parentNode&&(t?h(this[s].parentNode).is(t)&&e.push(this[s].parentNode):e.push(this[s].parentNode));return h(e)}function R(t){const e=[];for(let s=0;s<this.length;s+=1){let i=this[s].parentNode;for(;i;)t?h(i).is(t)&&e.push(i):e.push(i),i=i.parentNode}return h(e)}function F(t){let e=this;return void 0===t?h([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function j(t){const e=[];for(let s=0;s<this.length;s+=1){const i=this[s].querySelectorAll(t);for(let t=0;t<i.length;t+=1)e.push(i[t])}return h(e)}function Y(t){const e=[];for(let s=0;s<this.length;s+=1){const i=this[s].children;for(let s=0;s<i.length;s+=1)t&&!h(i[s]).is(t)||e.push(i[s])}return h(e)}function V(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}function U(t){const e=t;Object.keys(e).forEach(t=>{try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}})}function W(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function X(){return Date.now()}function G(t){const e=i();let s;return e.getComputedStyle&&(s=e.getComputedStyle(t,null)),!s&&t.currentStyle&&(s=t.currentStyle),s||(s=t.style),s}function J(t,e){void 0===e&&(e="x");const s=i();let o,a,n;const r=G(t);return s.WebKitCSSMatrix?(a=r.transform||r.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(t=>t.replace(",",".")).join(", ")),n=new s.WebKitCSSMatrix("none"===a?"":a)):(n=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=n.toString().split(",")),"x"===e&&(a=s.WebKitCSSMatrix?n.m41:16===o.length?parseFloat(o[12]):parseFloat(o[4])),"y"===e&&(a=s.WebKitCSSMatrix?n.m42:16===o.length?parseFloat(o[13]):parseFloat(o[5])),a||0}function Z(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function K(t){return"undefined"!=typeof window&&void 0!==window.HTMLElement?t instanceof HTMLElement:t&&(1===t.nodeType||11===t.nodeType)}function Q(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const i=s<0||arguments.length<=s?void 0:arguments[s];if(null!=i&&!K(i)){const s=Object.keys(Object(i)).filter(t=>e.indexOf(t)<0);for(let e=0,o=s.length;e<o;e+=1){const o=s[e],a=Object.getOwnPropertyDescriptor(i,o);void 0!==a&&a.enumerable&&(Z(t[o])&&Z(i[o])?i[o].__swiper__?t[o]=i[o]:Q(t[o],i[o]):!Z(t[o])&&Z(i[o])?(t[o]={},i[o].__swiper__?t[o]=i[o]:Q(t[o],i[o])):t[o]=i[o])}}}return t}function tt(t,e,s){
t.style.setProperty(e,s)}function et(t){let{swiper:e,targetPosition:s,side:o}=t;const a=i(),n=-e.translate;let r,l=null;const h=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const d=s>n?"next":"prev",p=(t,e)=>"next"===d&&t>=e||"prev"===d&&t<=e,c=()=>{r=(new Date).getTime(),null===l&&(l=r);const t=Math.max(Math.min((r-l)/h,1),0),i=.5-Math.cos(t*Math.PI)/2;let d=n+i*(s-n);if(p(d,s)&&(d=s),e.wrapperEl.scrollTo({[o]:d}),p(d,s))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[o]:d})}),void a.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=a.requestAnimationFrame(c)};c()}function st(){const t=i(),e=s();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let e=!1;try{const s=Object.defineProperty({},"passive",{get(){e=!0}});t.addEventListener("testPassiveListener",null,s)}catch(t){}return e}(),gestures:"ongesturestart"in t}}function it(){return Ye||(Ye=st()),Ye}function ot(t){let{userAgent:e}=void 0===t?{}:t;const s=it(),o=i(),a=o.navigator.platform,n=e||o.navigator.userAgent,r={ios:!1,android:!1},l=o.screen.width,h=o.screen.height,d=n.match(/(Android);?[\s\/]+([\d.]+)?/);let p=n.match(/(iPad).*OS\s([\d_]+)/);const c=n.match(/(iPod)(.*OS\s([\d_]+))?/),m=!p&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u="Win32"===a;let g="MacIntel"===a;const f=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!p&&g&&s.touch&&f.indexOf(`${l}x${h}`)>=0&&(p=n.match(/(Version)\/([\d.]+)/),p||(p=[0,1,"13_0_0"]),g=!1),d&&!u&&(r.os="android",r.android=!0),(p||m||c)&&(r.os="ios",r.ios=!0),r}function at(t){return void 0===t&&(t={}),Ve||(Ve=ot(t)),Ve}function nt(){function t(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}const e=i();return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function rt(){return Ue||(Ue=nt()),Ue}function lt(t){let{swiper:e,on:s,emit:o}=t;const a=i();let n=null,r=null;const l=()=>{e&&!e.destroyed&&e.initialized&&(o("beforeResize"),o("resize"))},h=()=>{e&&!e.destroyed&&e.initialized&&(n=new ResizeObserver(t=>{r=a.requestAnimationFrame(()=>{const{width:s,height:i}=e;let o=s,a=i;t.forEach(t=>{let{contentBoxSize:s,contentRect:i,target:n}=t;n&&n!==e.el||(o=i?i.width:(s[0]||s).inlineSize,a=i?i.height:(s[0]||s).blockSize)}),o===s&&a===i||l()})}),n.observe(e.el))},d=()=>{r&&a.cancelAnimationFrame(r),n&&n.unobserve&&e.el&&(n.unobserve(e.el),n=null)},p=()=>{e&&!e.destroyed&&e.initialized&&o("orientationchange")};s("init",()=>{e.params.resizeObserver&&void 0!==a.ResizeObserver?h():(a.addEventListener("resize",l),a.addEventListener("orientationchange",p))}),s("destroy",()=>{d(),a.removeEventListener("resize",l),a.removeEventListener("orientationchange",p)})}function ht(t){let{swiper:e,extendParams:s,on:o,emit:a}=t;const n=[],r=i(),l=function(t,e){void 0===e&&(e={});const s=r.MutationObserver||r.WebkitMutationObserver,i=new s(t=>{if(1===t.length)return void a("observerUpdate",t[0]);const e=function(){a("observerUpdate",t[0])};r.requestAnimationFrame?r.requestAnimationFrame(e):r.setTimeout(e,0)});i.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.push(i)},h=()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)l(t[e])}l(e.$el[0],{childList:e.params.observeSlideChildren}),l(e.$wrapperEl[0],{attributes:!1})}},d=()=>{n.forEach(t=>{t.disconnect()}),n.splice(0,n.length)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),o("init",h),o("destroy",d)}function dt(){const t=this;let e,s;const i=t.$el;e=void 0!==t.params.width&&null!==t.params.width?t.params.width:i[0].clientWidth,s=void 0!==t.params.height&&null!==t.params.height?t.params.height:i[0].clientHeight,0===e&&t.isHorizontal()||0===s&&t.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),s=s-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(s)&&(s=0),Object.assign(t,{width:e,height:s,size:t.isHorizontal()?e:s}))}function pt(){function t(t){return s.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function e(e,s){return parseFloat(e.getPropertyValue(t(s))||0)}const s=this,i=s.params,{$wrapperEl:o,size:a,rtlTranslate:n,wrongRTL:r}=s,l=s.virtual&&i.virtual.enabled,h=l?s.virtual.slides.length:s.slides.length,d=o.children(`.${s.params.slideClass}`),p=l?s.virtual.slides.length:d.length;let c=[];const m=[],u=[];let g=i.slidesOffsetBefore;"function"==typeof g&&(g=i.slidesOffsetBefore.call(s));let f=i.slidesOffsetAfter;"function"==typeof f&&(f=i.slidesOffsetAfter.call(s));const x=s.snapGrid.length,y=s.slidesGrid.length;let b=i.spaceBetween,v=-g,D=0,w=0;if(void 0===a)return;"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*a),s.virtualSize=-b,n?d.css({marginLeft:"",marginBottom:"",marginTop:""}):d.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(tt(s.wrapperEl,"--swiper-centered-offset-before",""),tt(s.wrapperEl,"--swiper-centered-offset-after",""));const T=i.grid&&i.grid.rows>1&&s.grid;let E;T&&s.grid.initSlides(p);const S="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter(t=>void 0!==i.breakpoints[t].slidesPerView).length>0;for(let o=0;o<p;o+=1){E=0;const n=d.eq(o);if(T&&s.grid.updateSlide(o,n,p,t),"none"!==n.css("display")){if("auto"===i.slidesPerView){S&&(d[o].style[t("width")]="");const a=getComputedStyle(n[0]),r=n[0].style.transform,l=n[0].style.webkitTransform;if(r&&(n[0].style.transform="none"),l&&(n[0].style.webkitTransform="none"),i.roundLengths)E=s.isHorizontal()?n.outerWidth(!0):n.outerHeight(!0);else{const t=e(a,"width"),s=e(a,"padding-left"),i=e(a,"padding-right"),o=e(a,"margin-left"),r=e(a,"margin-right"),l=a.getPropertyValue("box-sizing");if(l&&"border-box"===l)E=t+o+r;else{const{clientWidth:e,offsetWidth:a}=n[0];E=t+s+i+o+r+(a-e)}}r&&(n[0].style.transform=r),l&&(n[0].style.webkitTransform=l),i.roundLengths&&(E=Math.floor(E))}else E=(a-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(E=Math.floor(E)),d[o]&&(d[o].style[t("width")]=`${E}px`);d[o]&&(d[o].swiperSlideSize=E),u.push(E),i.centeredSlides?(v=v+E/2+D/2+b,0===D&&0!==o&&(v=v-a/2-b),0===o&&(v=v-a/2-b),Math.abs(v)<.001&&(v=0),i.roundLengths&&(v=Math.floor(v)),w%i.slidesPerGroup==0&&c.push(v),m.push(v)):(i.roundLengths&&(v=Math.floor(v)),(w-Math.min(s.params.slidesPerGroupSkip,w))%s.params.slidesPerGroup==0&&c.push(v),m.push(v),v=v+E+b),s.virtualSize+=E+b,D=E,w+=1}}if(s.virtualSize=Math.max(s.virtualSize,a)+f,n&&r&&("slide"===i.effect||"coverflow"===i.effect)&&o.css({width:`${s.virtualSize+i.spaceBetween}px`}),i.setWrapperSize&&o.css({[t("width")]:`${s.virtualSize+i.spaceBetween}px`}),T&&s.grid.updateWrapperSize(E,c,t),!i.centeredSlides){const t=[];for(let e=0;e<c.length;e+=1){let o=c[e];i.roundLengths&&(o=Math.floor(o)),c[e]<=s.virtualSize-a&&t.push(o)}c=t,Math.floor(s.virtualSize-a)-Math.floor(c[c.length-1])>1&&c.push(s.virtualSize-a)}if(0===c.length&&(c=[0]),0!==i.spaceBetween){const e=s.isHorizontal()&&n?"marginLeft":t("marginRight");d.filter((t,e)=>!i.cssMode||e!==d.length-1).css({[e]:`${b}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let t=0;u.forEach(e=>{t+=e+(i.spaceBetween?i.spaceBetween:0)}),t-=i.spaceBetween;const e=t-a;c=c.map(t=>t<0?-g:t>e?e+f:t)}if(i.centerInsufficientSlides){let t=0;if(u.forEach(e=>{t+=e+(i.spaceBetween?i.spaceBetween:0)}),t-=i.spaceBetween,t<a){const e=(a-t)/2;c.forEach((t,s)=>{c[s]=t-e}),m.forEach((t,s)=>{m[s]=t+e})}}if(Object.assign(s,{slides:d,snapGrid:c,slidesGrid:m,slidesSizesGrid:u}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){tt(s.wrapperEl,"--swiper-centered-offset-before",`${-c[0]}px`),tt(s.wrapperEl,"--swiper-centered-offset-after",`${s.size/2-u[u.length-1]/2}px`);const t=-s.snapGrid[0],e=-s.slidesGrid[0];s.snapGrid=s.snapGrid.map(e=>e+t),s.slidesGrid=s.slidesGrid.map(t=>t+e)}if(p!==h&&s.emit("slidesLengthChange"),c.length!==x&&(s.params.watchOverflow&&s.checkOverflow(),s.emit("snapGridLengthChange")),m.length!==y&&s.emit("slidesGridLengthChange"),i.watchSlidesProgress&&s.updateSlidesOffset(),!(l||i.cssMode||"slide"!==i.effect&&"fade"!==i.effect)){const t=`${i.containerModifierClass}backface-hidden`,e=s.$el.hasClass(t);p<=i.maxBackfaceHiddenSlides?e||s.$el.addClass(t):e&&s.$el.removeClass(t)}}function ct(t){const e=this,s=[],i=e.virtual&&e.params.virtual.enabled;let o,a=0;"number"==typeof t?e.setTransition(t):!0===t&&e.setTransition(e.params.speed);const n=t=>i?e.slides.filter(e=>parseInt(e.getAttribute("data-swiper-slide-index"),10)===t)[0]:e.slides.eq(t)[0];if("auto"!==e.params.slidesPerView&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each(t=>{s.push(t)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const t=e.activeIndex+o;if(t>e.slides.length&&!i)break;s.push(n(t))}else s.push(n(e.activeIndex));for(o=0;o<s.length;o+=1)if(void 0!==s[o]){const t=s[o].offsetHeight;a=t>a?t:a}(a||0===a)&&e.$wrapperEl.css("height",`${a}px`)}function mt(){const t=this,e=t.slides;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=t.isHorizontal()?e[s].offsetLeft:e[s].offsetTop}function ut(t){void 0===t&&(t=this&&this.translate||0);const e=this,s=e.params,{slides:i,rtlTranslate:o,snapGrid:a}=e;if(0===i.length)return;void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();let n=-t;o&&(n=t),i.removeClass(s.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let t=0;t<i.length;t+=1){const r=i[t];let l=r.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(l-=i[0].swiperSlideOffset);const h=(n+(s.centeredSlides?e.minTranslate():0)-l)/(r.swiperSlideSize+s.spaceBetween),d=(n-a[0]+(s.centeredSlides?e.minTranslate():0)-l)/(r.swiperSlideSize+s.spaceBetween),p=-(n-l),c=p+e.slidesSizesGrid[t],m=p>=0&&p<e.size-1||c>1&&c<=e.size||p<=0&&c>=e.size;m&&(e.visibleSlides.push(r),e.visibleSlidesIndexes.push(t),i.eq(t).addClass(s.slideVisibleClass)),r.progress=o?-h:h,r.originalProgress=o?-d:d}e.visibleSlides=h(e.visibleSlides)}function gt(t){const e=this;if(void 0===t){const s=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*s||0}const s=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:o,isBeginning:a,isEnd:n}=e;const r=a,l=n;0===i?(o=0,a=!0,n=!0):(o=(t-e.minTranslate())/i,a=o<=0,n=o>=1),Object.assign(e,{progress:o,isBeginning:a,isEnd:n}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&e.updateSlidesProgress(t),a&&!r&&e.emit("reachBeginning toEdge"),n&&!l&&e.emit("reachEnd toEdge"),(r&&!a||l&&!n)&&e.emit("fromEdge"),e.emit("progress",o)}function ft(){const t=this,{slides:e,params:s,$wrapperEl:i,activeIndex:o,realIndex:a}=t,n=t.virtual&&s.virtual.enabled;let r;e.removeClass(`${s.slideActiveClass} ${s.slideNextClass} ${s.slidePrevClass} ${s.slideDuplicateActiveClass} ${s.slideDuplicateNextClass} ${s.slideDuplicatePrevClass}`),r=n?t.$wrapperEl.find(`.${s.slideClass}[data-swiper-slide-index="${o}"]`):e.eq(o),r.addClass(s.slideActiveClass),s.loop&&(r.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${a}"]`).addClass(s.slideDuplicateActiveClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${a}"]`).addClass(s.slideDuplicateActiveClass));let l=r.nextAll(`.${s.slideClass}`).eq(0).addClass(s.slideNextClass);s.loop&&0===l.length&&(l=e.eq(0),l.addClass(s.slideNextClass));let h=r.prevAll(`.${s.slideClass}`).eq(0).addClass(s.slidePrevClass);s.loop&&0===h.length&&(h=e.eq(-1),h.addClass(s.slidePrevClass)),s.loop&&(l.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass),h.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${h.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${h.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass)),t.emitSlidesClasses()}function xt(t){const e=this,s=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:i,snapGrid:o,params:a,activeIndex:n,realIndex:r,snapIndex:l}=e;let h,d=t;if(void 0===d){for(let t=0;t<i.length;t+=1)void 0!==i[t+1]?s>=i[t]&&s<i[t+1]-(i[t+1]-i[t])/2?d=t:s>=i[t]&&s<i[t+1]&&(d=t+1):s>=i[t]&&(d=t);a.normalizeSlideIndex&&(d<0||void 0===d)&&(d=0)}if(o.indexOf(s)>=0)h=o.indexOf(s);else{const t=Math.min(a.slidesPerGroupSkip,d);h=t+Math.floor((d-t)/a.slidesPerGroup)}if(h>=o.length&&(h=o.length-1),d===n)return void(h!==l&&(e.snapIndex=h,e.emit("snapIndexChange")));const p=parseInt(e.slides.eq(d).attr("data-swiper-slide-index")||d,10);Object.assign(e,{snapIndex:h,realIndex:p,previousIndex:n,activeIndex:d}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),r!==p&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function yt(t){const e=this,s=e.params,i=h(t).closest(`.${s.slideClass}`)[0];let o,a=!1;if(i)for(let t=0;t<e.slides.length;t+=1)if(e.slides[t]===i){a=!0,o=t;break}if(!i||!a)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(h(i).attr("data-swiper-slide-index"),10):e.clickedIndex=o,s.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}function bt(t){void 0===t&&(t=this.isHorizontal()?"x":"y");const e=this,{params:s,rtlTranslate:i,translate:o,$wrapperEl:a}=e;if(s.virtualTranslate)return i?-o:o;if(s.cssMode)return o;let n=J(a[0],t);return i&&(n=-n),n||0}function vt(t,e){const s=this,{rtlTranslate:i,params:o,$wrapperEl:a,wrapperEl:n,progress:r}=s;let l=0,h=0;const d=0;let p;s.isHorizontal()?l=i?-t:t:h=t,o.roundLengths&&(l=Math.floor(l),h=Math.floor(h)),o.cssMode?n[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-l:-h:o.virtualTranslate||a.transform(`translate3d(${l}px, ${h}px, ${d}px)`),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?l:h;const c=s.maxTranslate()-s.minTranslate();p=0===c?0:(t-s.minTranslate())/c,p!==r&&s.updateProgress(t),s.emit("setTranslate",s.translate,e)}function Dt(){return-this.snapGrid[0]}function wt(){return-this.snapGrid[this.snapGrid.length-1]}function Tt(t,e,s,i,o){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0),void 0===i&&(i=!0);const a=this,{params:n,wrapperEl:r}=a;if(a.animating&&n.preventInteractionOnTransition)return!1;const l=a.minTranslate(),h=a.maxTranslate();let d;if(d=i&&t>l?l:i&&t<h?h:t,a.updateProgress(d),n.cssMode){const t=a.isHorizontal();if(0===e)r[t?"scrollLeft":"scrollTop"]=-d;else{if(!a.support.smoothScroll)return et({swiper:a,targetPosition:-d,side:t?"left":"top"}),!0;r.scrollTo({[t?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===e?(a.setTransition(0),a.setTranslate(d),s&&(a.emit("beforeTransitionStart",e,o),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(d),s&&(a.emit("beforeTransitionStart",e,o),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,s&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}function Et(t,e){const s=this;s.params.cssMode||s.$wrapperEl.transition(t),s.emit("setTransition",t,e)}function St(t){let{swiper:e,runCallbacks:s,direction:i,step:o}=t;const{activeIndex:a,previousIndex:n}=e;let r=i;if(r||(r=a>n?"next":a<n?"prev":"reset"),e.emit(`transition${o}`),s&&a!==n){if("reset"===r)return void e.emit(`slideResetTransition${o}`);e.emit(`slideChangeTransition${o}`),"next"===r?e.emit(`slideNextTransition${o}`):e.emit(`slidePrevTransition${o}`)}}function At(t,e){void 0===t&&(t=!0);const s=this,{params:i}=s;i.cssMode||(i.autoHeight&&s.updateAutoHeight(),St({swiper:s,runCallbacks:t,direction:e,step:"Start"}))}function Ct(t,e){void 0===t&&(t=!0);const s=this,{params:i}=s;s.animating=!1,i.cssMode||(s.setTransition(0),St({swiper:s,runCallbacks:t,direction:e,step:"End"}))}function Mt(t,e,s,i,o){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0),"number"!=typeof t&&"string"!=typeof t)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if("string"==typeof t){const e=parseInt(t,10),s=isFinite(e);if(!s)throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=e}const a=this;let n=t;n<0&&(n=0);const{params:r,snapGrid:l,slidesGrid:h,previousIndex:d,activeIndex:p,rtlTranslate:c,wrapperEl:m,enabled:u}=a;if(a.animating&&r.preventInteractionOnTransition||!u&&!i&&!o)return!1;const g=Math.min(a.params.slidesPerGroupSkip,n);let f=g+Math.floor((n-g)/a.params.slidesPerGroup);f>=l.length&&(f=l.length-1),(p||r.initialSlide||0)===(d||0)&&s&&a.emit("beforeSlideChangeStart");const x=-l[f];if(a.updateProgress(x),r.normalizeSlideIndex)for(let t=0;t<h.length;t+=1){const e=-Math.floor(100*x),s=Math.floor(100*h[t]),i=Math.floor(100*h[t+1]);void 0!==h[t+1]?e>=s&&e<i-(i-s)/2?n=t:e>=s&&e<i&&(n=t+1):e>=s&&(n=t)}if(a.initialized&&n!==p){if(!a.allowSlideNext&&x<a.translate&&x<a.minTranslate())return!1;if(!a.allowSlidePrev&&x>a.translate&&x>a.maxTranslate()&&(p||0)!==n)return!1}let y;if(y=n>p?"next":n<p?"prev":"reset",c&&-x===a.translate||!c&&x===a.translate)return a.updateActiveIndex(n),r.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==r.effect&&a.setTranslate(x),"reset"!==y&&(a.transitionStart(s,y),a.transitionEnd(s,y)),!1;if(r.cssMode){const t=a.isHorizontal(),s=c?x:-x;if(0===e){const e=a.virtual&&a.params.virtual.enabled;e&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),m[t?"scrollLeft":"scrollTop"]=s,e&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._swiperImmediateVirtual=!1})}else{if(!a.support.smoothScroll)return et({swiper:a,targetPosition:s,side:t?"left":"top"}),!0;m.scrollTo({[t?"left":"top"]:s,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(x),a.updateActiveIndex(n),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,i),a.transitionStart(s,y),0===e?a.transitionEnd(s,y):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(s,y))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd)),!0}function kt(t,e,s,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0);const o=this;let a=t;return o.params.loop&&(a+=o.loopedSlides),o.slideTo(a,e,s,i)}function It(t,e,s){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this,{animating:o,enabled:a,params:n}=i;if(!a)return i;let r=n.slidesPerGroup;"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(r=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<n.slidesPerGroupSkip?1:r;if(n.loop){if(o&&n.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return n.rewind&&i.isEnd?i.slideTo(0,t,e,s):i.slideTo(i.activeIndex+l,t,e,s)}function Lt(t,e,s){function i(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const o=this,{params:a,animating:n,snapGrid:r,slidesGrid:l,rtlTranslate:h,enabled:d}=o;if(!d)return o;if(a.loop){if(n&&a.loopPreventsSlide)return!1;o.loopFix(),o._clientLeft=o.$wrapperEl[0].clientLeft}const p=h?o.translate:-o.translate,c=i(p),m=r.map(t=>i(t));let u=r[m.indexOf(c)-1];if(void 0===u&&a.cssMode){let t;r.forEach((e,s)=>{c>=e&&(t=s)}),void 0!==t&&(u=r[t>0?t-1:t])}let g=0;if(void 0!==u&&(g=l.indexOf(u),g<0&&(g=o.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(g=g-o.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),a.rewind&&o.isBeginning){const i=o.params.virtual&&o.params.virtual.enabled&&o.virtual?o.virtual.slides.length-1:o.slides.length-1;return o.slideTo(i,t,e,s)}return o.slideTo(g,t,e,s)}function $t(t,e,s){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this;return i.slideTo(i.activeIndex,t,e,s)}function Pt(t,e,s,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===i&&(i=.5);const o=this;let a=o.activeIndex;const n=Math.min(o.params.slidesPerGroupSkip,a),r=n+Math.floor((a-n)/o.params.slidesPerGroup),l=o.rtlTranslate?o.translate:-o.translate;if(l>=o.snapGrid[r]){const t=o.snapGrid[r],e=o.snapGrid[r+1];l-t>(e-t)*i&&(a+=o.params.slidesPerGroup)}else{const t=o.snapGrid[r-1],e=o.snapGrid[r];l-t<=(e-t)*i&&(a-=o.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,o.slidesGrid.length-1),o.slideTo(a,t,e,s)}function _t(){const t=this,{params:e,$wrapperEl:s}=t,i="auto"===e.slidesPerView?t.slidesPerViewDynamic():e.slidesPerView;let o,a=t.clickedIndex;if(e.loop){if(t.animating)return;o=parseInt(h(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?a<t.loopedSlides-i/2||a>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),a=s.children(`.${e.slideClass}[data-swiper-slide-index="${o}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),W(()=>{t.slideTo(a)})):t.slideTo(a):a>t.slides.length-i?(t.loopFix(),a=s.children(`.${e.slideClass}[data-swiper-slide-index="${o}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),W(()=>{t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}function Ot(){const t=this,e=s(),{params:i,$wrapperEl:o}=t,a=o.children().length>0?h(o.children()[0].parentNode):o;a.children(`.${i.slideClass}.${i.slideDuplicateClass}`).remove();let n=a.children(`.${i.slideClass}`);if(i.loopFillGroupWithBlank){const t=i.slidesPerGroup-n.length%i.slidesPerGroup;if(t!==i.slidesPerGroup){for(let s=0;s<t;s+=1){const t=h(e.createElement("div")).addClass(`${i.slideClass} ${i.slideBlankClass}`);a.append(t)}n=a.children(`.${i.slideClass}`)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=n.length),t.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>n.length&&(t.loopedSlides=n.length);const r=[],l=[];n.each((e,s)=>{const i=h(e);s<t.loopedSlides&&l.push(e),s<n.length&&s>=n.length-t.loopedSlides&&r.push(e),i.attr("data-swiper-slide-index",s)});for(let t=0;t<l.length;t+=1)a.append(h(l[t].cloneNode(!0)).addClass(i.slideDuplicateClass));for(let t=r.length-1;t>=0;t-=1)a.prepend(h(r[t].cloneNode(!0)).addClass(i.slideDuplicateClass))}function Nt(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:s,loopedSlides:i,allowSlidePrev:o,allowSlideNext:a,snapGrid:n,rtlTranslate:r}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const h=-n[e],d=h-t.getTranslate();if(e<i){l=s.length-3*i+e,l+=i;const o=t.slideTo(l,0,!1,!0);o&&0!==d&&t.setTranslate((r?-t.translate:t.translate)-d)}else if(e>=s.length-i){l=-s.length+e+i,l+=i;const o=t.slideTo(l,0,!1,!0);o&&0!==d&&t.setTranslate((r?-t.translate:t.translate)-d)}t.allowSlidePrev=o,t.allowSlideNext=a,t.emit("loopFix")}function qt(){const t=this,{$wrapperEl:e,params:s,slides:i}=t;e.children(`.${s.slideClass}.${s.slideDuplicateClass},.${s.slideClass}.${s.slideBlankClass}`).remove(),i.removeAttr("data-swiper-slide-index")}function Ht(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const s="container"===e.params.touchEventsTarget?e.el:e.wrapperEl;s.style.cursor="move",s.style.cursor=t?"grabbing":"grab"}function Bt(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t["container"===t.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}function zt(t,e){function o(e){if(!e||e===s()||e===i())return null;e.assignedSlot&&(e=e.assignedSlot);const a=e.closest(t);return a||o(e.getRootNode().host)}return void 0===e&&(e=this),o(e)}function Rt(t){const e=this,o=s(),a=i(),n=e.touchEventsData,{params:r,touches:l,enabled:d}=e;if(!d)return;if(e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let p=t;p.originalEvent&&(p=p.originalEvent);let c=h(p.target);if("wrapper"===r.touchEventsTarget&&!c.closest(e.wrapperEl).length)return;if(n.isTouchEvent="touchstart"===p.type,!n.isTouchEvent&&"which"in p&&3===p.which)return;if(!n.isTouchEvent&&"button"in p&&p.button>0)return;if(n.isTouched&&n.isMoved)return;const m=!!r.noSwipingClass&&""!==r.noSwipingClass;m&&p.target&&p.target.shadowRoot&&t.path&&t.path[0]&&(c=h(t.path[0]));const u=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,g=!(!p.target||!p.target.shadowRoot);if(r.noSwiping&&(g?zt(u,p.target):c.closest(u)[0]))return void(e.allowClick=!0);if(r.swipeHandler&&!c.closest(r.swipeHandler)[0])return;l.currentX="touchstart"===p.type?p.targetTouches[0].pageX:p.pageX,l.currentY="touchstart"===p.type?p.targetTouches[0].pageY:p.pageY;const f=l.currentX,x=l.currentY,y=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,b=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(y&&(f<=b||f>=a.innerWidth-b)){if("prevent"!==y)return;axPreventDefault(t)}if(Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=f,l.startY=x,n.touchStartTime=X(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==p.type){let t=!0;c.is(n.focusableElements)&&(t=!1,"SELECT"===c[0].nodeName&&(n.isTouched=!1)),o.activeElement&&h(o.activeElement).is(n.focusableElements)&&o.activeElement!==c[0]&&o.activeElement.blur();const s=t&&e.allowTouchMove&&r.touchStartPreventDefault;!r.touchStartForcePreventDefault&&!s||c[0].isContentEditable||axPreventDefault(p)}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",p)}function Ft(t){const e=s(),i=this,o=i.touchEventsData,{params:a,touches:n,rtlTranslate:r,enabled:l}=i;if(!l)return;let d=t;if(d.originalEvent&&(d=d.originalEvent),!o.isTouched)return void(o.startMoving&&o.isScrolling&&i.emit("touchMoveOpposite",d));if(o.isTouchEvent&&"touchmove"!==d.type)return;const p="touchmove"===d.type&&d.targetTouches&&(d.targetTouches[0]||d.changedTouches[0]),c="touchmove"===d.type?p.pageX:d.pageX,m="touchmove"===d.type?p.pageY:d.pageY;if(d.preventedByNestedSwiper)return n.startX=c,void(n.startY=m);if(!i.allowTouchMove)return h(d.target).is(o.focusableElements)||(i.allowClick=!1),void(o.isTouched&&(Object.assign(n,{startX:c,startY:m,currentX:c,currentY:m}),o.touchStartTime=X()));if(o.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(i.isVertical()){if(m<n.startY&&i.translate<=i.maxTranslate()||m>n.startY&&i.translate>=i.minTranslate())return o.isTouched=!1,void(o.isMoved=!1)}else if(c<n.startX&&i.translate<=i.maxTranslate()||c>n.startX&&i.translate>=i.minTranslate())return;if(o.isTouchEvent&&e.activeElement&&d.target===e.activeElement&&h(d.target).is(o.focusableElements))return o.isMoved=!0,void(i.allowClick=!1);if(o.allowTouchCallbacks&&i.emit("touchMove",d),d.targetTouches&&d.targetTouches.length>1)return;n.currentX=c,n.currentY=m;const u=n.currentX-n.startX,g=n.currentY-n.startY;if(i.params.threshold&&Math.sqrt(u**2+g**2)<i.params.threshold)return;if(void 0===o.isScrolling){let t;i.isHorizontal()&&n.currentY===n.startY||i.isVertical()&&n.currentX===n.startX?o.isScrolling=!1:u*u+g*g>=25&&(t=180*Math.atan2(Math.abs(g),Math.abs(u))/Math.PI,o.isScrolling=i.isHorizontal()?t>a.touchAngle:90-t>a.touchAngle)}if(o.isScrolling&&i.emit("touchMoveOpposite",d),void 0===o.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(o.startMoving=!0)),o.isScrolling)return void(o.isTouched=!1);if(!o.startMoving)return;i.allowClick=!1,!a.cssMode&&d.cancelable&&axPreventDefault(d),a.touchMoveStopPropagation&&!a.nested&&d.stopPropagation(),o.isMoved||(a.loop&&!a.cssMode&&i.loopFix(),o.startTranslate=i.getTranslate(),i.setTransition(0),i.animating&&i.$wrapperEl.trigger("webkitTransitionEnd transitionend"),o.allowMomentumBounce=!1,!a.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",d)),i.emit("sliderMove",d),o.isMoved=!0;let f=i.isHorizontal()?u:g;n.diff=f,f*=a.touchRatio,r&&(f=-f),i.swipeDirection=f>0?"prev":"next",o.currentTranslate=f+o.startTranslate;let x=!0,y=a.resistanceRatio;if(a.touchReleaseOnEdges&&(y=0),f>0&&o.currentTranslate>i.minTranslate()?(x=!1,a.resistance&&(o.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+o.startTranslate+f)**y)):f<0&&o.currentTranslate<i.maxTranslate()&&(x=!1,a.resistance&&(o.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-o.startTranslate-f)**y)),x&&(d.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&o.currentTranslate<o.startTranslate&&(o.currentTranslate=o.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&o.currentTranslate>o.startTranslate&&(o.currentTranslate=o.startTranslate),i.allowSlidePrev||i.allowSlideNext||(o.currentTranslate=o.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||o.allowThresholdMove))return void(o.currentTranslate=o.startTranslate);if(!o.allowThresholdMove)return o.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,o.currentTranslate=o.startTranslate,void(n.diff=i.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&i.freeMode||a.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),i.params.freeMode&&a.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(o.currentTranslate),i.setTranslate(o.currentTranslate))}function jt(t){const e=this,s=e.touchEventsData,{params:i,touches:o,rtlTranslate:a,slidesGrid:n,enabled:r}=e;if(!r)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),s.allowTouchCallbacks&&e.emit("touchEnd",l),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&i.grabCursor&&e.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);i.grabCursor&&s.isMoved&&s.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);const h=X(),d=h-s.touchStartTime;if(e.allowClick){const t=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(t&&t[0]||l.target),e.emit("tap click",l),d<300&&h-s.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(s.lastClickTime=X(),W(()=>{e.destroyed||(e.allowClick=!0)}),!s.isTouched||!s.isMoved||!e.swipeDirection||0===o.diff||s.currentTranslate===s.startTranslate)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let p;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,
p=i.followFinger?a?e.translate:-e.translate:-s.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled)return void e.freeMode.onTouchEnd({currentPos:p});let c=0,m=e.slidesSizesGrid[0];for(let t=0;t<n.length;t+=t<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=t<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==n[t+e]?p>=n[t]&&p<n[t+e]&&(c=t,m=n[t+e]-n[t]):p>=n[t]&&(c=t,m=n[n.length-1]-n[n.length-2])}let u=null,g=null;i.rewind&&(e.isBeginning?g=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(u=0));const f=(p-n[c])/m,x=c<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(f>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?u:c+x):e.slideTo(c)),"prev"===e.swipeDirection&&(f>1-i.longSwipesRatio?e.slideTo(c+x):null!==g&&f<0&&Math.abs(f)>i.longSwipesRatio?e.slideTo(g):e.slideTo(c))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);const t=e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl);t?l.target===e.navigation.nextEl?e.slideTo(c+x):e.slideTo(c):("next"===e.swipeDirection&&e.slideTo(null!==u?u:c+x),"prev"===e.swipeDirection&&e.slideTo(null!==g?g:c))}}function Yt(){const t=this,{params:e,el:s}=t;if(s&&0===s.offsetWidth)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:o,snapGrid:a}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=o,t.allowSlideNext=i,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}function Vt(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&axPreventDefault(t),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function Ut(){const t=this,{wrapperEl:e,rtlTranslate:s,enabled:i}=t;if(!i)return;let o;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();const a=t.maxTranslate()-t.minTranslate();o=0===a?0:(t.translate-t.minTranslate())/a,o!==t.progress&&t.updateProgress(s?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function Wt(){}function Xt(){const t=this,e=s(),{params:i,support:o}=t;t.onTouchStart=Rt.bind(t),t.onTouchMove=Ft.bind(t),t.onTouchEnd=jt.bind(t),i.cssMode&&(t.onScroll=Ut.bind(t)),t.onClick=Vt.bind(t),o.touch&&!ts&&(e.addEventListener("touchstart",Wt),ts=!0),es(t,"on")}function Gt(){const t=this;es(t,"off")}function Jt(){const t=this,{activeIndex:e,initialized:s,loopedSlides:i=0,params:o,$el:a}=t,n=o.breakpoints;if(!n||n&&0===Object.keys(n).length)return;const r=t.getBreakpoint(n,t.params.breakpointsBase,t.el);if(!r||t.currentBreakpoint===r)return;const l=r in n?n[r]:void 0,h=l||t.originalParams,d=is(t,o),p=is(t,h),c=o.enabled;d&&!p?(a.removeClass(`${o.containerModifierClass}grids ${o.containerModifierClass}grid-column`),t.emitContainerClasses()):!d&&p&&(a.addClass(`${o.containerModifierClass}grids`),(h.grid.fill&&"column"===h.grid.fill||!h.grid.fill&&"column"===o.grid.fill)&&a.addClass(`${o.containerModifierClass}grid-column`),t.emitContainerClasses());const m=h.direction&&h.direction!==o.direction,u=o.loop&&(h.slidesPerView!==o.slidesPerView||m);m&&s&&t.changeDirection(),Q(t.params,h);const g=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),c&&!g?t.disable():!c&&g&&t.enable(),t.currentBreakpoint=r,t.emit("_beforeBreakpoint",h),u&&s&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",h)}function Zt(t,e,s){if(void 0===e&&(e="window"),!t||"container"===e&&!s)return;let o=!1;const a=i(),n="window"===e?a.innerHeight:s.clientHeight,r=Object.keys(t).map(t=>{if("string"==typeof t&&0===t.indexOf("@")){const e=parseFloat(t.substr(1)),s=n*e;return{value:s,point:t}}return{value:t,point:t}});r.sort((t,e)=>parseInt(t.value,10)-parseInt(e.value,10));for(let t=0;t<r.length;t+=1){const{point:i,value:n}=r[t];"window"===e?a.matchMedia(`(min-width: ${n}px)`).matches&&(o=i):n<=s.clientWidth&&(o=i)}return o||"max"}function Kt(t,e){const s=[];return t.forEach(t=>{"object"==typeof t?Object.keys(t).forEach(i=>{t[i]&&s.push(e+i)}):"string"==typeof t&&s.push(e+t)}),s}function Qt(){const t=this,{classNames:e,params:s,rtl:i,$el:o,device:a,support:n}=t,r=Kt(["initialized",s.direction,{"pointer-events":!n.touch},{"free-mode":t.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:i},{grids:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&"column"===s.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);e.push(...r),o.addClass([...e].join(" ")),t.emitContainerClasses()}function te(){const t=this,{$el:e,classNames:s}=t;e.removeClass(s.join(" ")),t.emitContainerClasses()}function ee(t,e,s,o,a,n){function r(){n&&n()}const l=i();let d;const p=h(t).parent("picture")[0];p||t.complete&&a?r():e?(d=new l.Image,d.onload=r,d.onerror=r,o&&(d.sizes=o),s&&(d.srcset=s),e&&(d.src=e)):r()}function se(){function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}const e=this;e.imagesToLoad=e.$el.find("img");for(let s=0;s<e.imagesToLoad.length;s+=1){const i=e.imagesToLoad[s];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}function ie(){const t=this,{isLocked:e,params:s}=t,{slidesOffsetBefore:i}=s;if(i){const e=t.slides.length-1,s=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*i;t.isLocked=t.size>s}else t.isLocked=1===t.snapGrid.length;!0===s.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===s.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}function oe(t,e){return function(s){void 0===s&&(s={});const i=Object.keys(s)[0],o=s[i];"object"==typeof o&&null!==o?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===t[i]&&(t[i]={auto:!0}),i in t&&"enabled"in o?(!0===t[i]&&(t[i]={enabled:!0}),"object"!=typeof t[i]||"enabled"in t[i]||(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),Q(e,s)):Q(e,s)):Q(e,s)}}function ae(t){function e(t,e){const s=l.params.virtual;if(s.cache&&l.virtual.cache[e])return l.virtual.cache[e];const i=s.renderSlide?h(s.renderSlide.call(l,t,e)):h(`<div class="${l.params.slideClass}" data-swiper-slide-index="${e}">${t}</div>`);return i.attr("data-swiper-slide-index")||i.attr("data-swiper-slide-index",e),s.cache&&(l.virtual.cache[e]=i),i}function s(t){function s(){l.updateSlides(),l.updateProgress(),l.updateSlidesClasses(),l.lazy&&l.params.lazy.enabled&&l.lazy.load(),c("virtualUpdate")}const{slidesPerView:i,slidesPerGroup:o,centeredSlides:a}=l.params,{addSlidesBefore:n,addSlidesAfter:r}=l.params.virtual,{from:h,to:d,slides:p,slidesGrid:m,offset:u}=l.virtual;l.params.cssMode||l.updateActiveIndex();const g=l.activeIndex||0;let f,x,y;f=l.rtlTranslate?"right":l.isHorizontal()?"left":"top",a?(x=Math.floor(i/2)+o+r,y=Math.floor(i/2)+o+n):(x=i+(o-1)+r,y=o+n);const b=Math.max((g||0)-y,0),v=Math.min((g||0)+x,p.length-1),D=(l.slidesGrid[b]||0)-(l.slidesGrid[0]||0);if(Object.assign(l.virtual,{from:b,to:v,offset:D,slidesGrid:l.slidesGrid}),h===b&&d===v&&!t)return l.slidesGrid!==m&&D!==u&&l.slides.css(f,`${D}px`),l.updateProgress(),void c("virtualUpdate");if(l.params.virtual.renderExternal)return l.params.virtual.renderExternal.call(l,{offset:D,from:b,to:v,slides:function(){const t=[];for(let e=b;e<=v;e+=1)t.push(p[e]);return t}()}),void(l.params.virtual.renderExternalUpdate?s():c("virtualUpdate"));const w=[],T=[];if(t)l.$wrapperEl.find(`.${l.params.slideClass}`).remove();else for(let t=h;t<=d;t+=1)(t<b||t>v)&&l.$wrapperEl.find(`.${l.params.slideClass}[data-swiper-slide-index="${t}"]`).remove();for(let e=0;e<p.length;e+=1)e>=b&&e<=v&&(void 0===d||t?T.push(e):(e>d&&T.push(e),e<h&&w.push(e)));T.forEach(t=>{l.$wrapperEl.append(e(p[t],t))}),w.sort((t,e)=>e-t).forEach(t=>{l.$wrapperEl.prepend(e(p[t],t))}),l.$wrapperEl.children(".swiper-slide").css(f,`${D}px`),s()}function i(t){if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&l.virtual.slides.push(t[e]);else l.virtual.slides.push(t);s(!0)}function o(t){const e=l.activeIndex;let i=e+1,o=1;if(Array.isArray(t)){for(let e=0;e<t.length;e+=1)t[e]&&l.virtual.slides.unshift(t[e]);i=e+t.length,o=t.length}else l.virtual.slides.unshift(t);if(l.params.virtual.cache){const t=l.virtual.cache,e={};Object.keys(t).forEach(s=>{const i=t[s],a=i.attr("data-swiper-slide-index");a&&i.attr("data-swiper-slide-index",parseInt(a,10)+o),e[parseInt(s,10)+o]=i}),l.virtual.cache=e}s(!0),l.slideTo(i,0)}function a(t){if(null==t)return;let e=l.activeIndex;if(Array.isArray(t))for(let s=t.length-1;s>=0;s-=1)l.virtual.slides.splice(t[s],1),l.params.virtual.cache&&delete l.virtual.cache[t[s]],t[s]<e&&(e-=1),e=Math.max(e,0);else l.virtual.slides.splice(t,1),l.params.virtual.cache&&delete l.virtual.cache[t],t<e&&(e-=1),e=Math.max(e,0);s(!0),l.slideTo(e,0)}function n(){l.virtual.slides=[],l.params.virtual.cache&&(l.virtual.cache={}),s(!0),l.slideTo(0,0)}let r,{swiper:l,extendParams:d,on:p,emit:c}=t;d({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),l.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},p("beforeInit",()=>{l.params.virtual.enabled&&(l.virtual.slides=l.params.virtual.slides,l.classNames.push(`${l.params.containerModifierClass}virtual`),l.params.watchSlidesProgress=!0,l.originalParams.watchSlidesProgress=!0,l.params.initialSlide||s())}),p("setTranslate",()=>{l.params.virtual.enabled&&(l.params.cssMode&&!l._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{s()},100)):s())}),p("init update resize",()=>{l.params.virtual.enabled&&l.params.cssMode&&tt(l.wrapperEl,"--swiper-virtual-size",`${l.virtualSize}px`)}),Object.assign(l.virtual,{appendSlide:i,prependSlide:o,removeSlide:a,removeAllSlides:n,update:s})}function ne(t){function e(t){if(!n.enabled)return;const{rtlTranslate:e}=n;let s=t;s.originalEvent&&(s=s.originalEvent);const i=s.keyCode||s.charCode,o=n.params.keyboard.pageUpDown,a=o&&33===i,r=o&&34===i,l=37===i,h=39===i,m=38===i,u=40===i;if(!n.allowSlideNext&&(n.isHorizontal()&&h||n.isVertical()&&u||r))return!1;if(!n.allowSlidePrev&&(n.isHorizontal()&&l||n.isVertical()&&m||a))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey||p.activeElement&&p.activeElement.nodeName&&("input"===p.activeElement.nodeName.toLowerCase()||"textarea"===p.activeElement.nodeName.toLowerCase()))){if(n.params.keyboard.onlyInViewport&&(a||r||l||h||m||u)){let t=!1;if(n.$el.parents(`.${n.params.slideClass}`).length>0&&0===n.$el.parents(`.${n.params.slideActiveClass}`).length)return;const s=n.$el,i=s[0].clientWidth,o=s[0].clientHeight,a=c.innerWidth,r=c.innerHeight,l=n.$el.offset();e&&(l.left-=n.$el[0].scrollLeft);const h=[[l.left,l.top],[l.left+i,l.top],[l.left,l.top+o],[l.left+i,l.top+o]];for(let e=0;e<h.length;e+=1){const s=h[e];if(s[0]>=0&&s[0]<=a&&s[1]>=0&&s[1]<=r){if(0===s[0]&&0===s[1])continue;t=!0}}if(!t)return}n.isHorizontal()?((a||r||l||h)&&axPreventDefault(s),((r||h)&&!e||(a||l)&&e)&&n.slideNext(),((a||l)&&!e||(r||h)&&e)&&n.slidePrev()):((a||r||m||u)&&axPreventDefault(s),(r||u)&&n.slideNext(),(a||m)&&n.slidePrev()),d("keyPress",i)}}function o(){n.keyboard.enabled||(h(p).on("keydown",e),n.keyboard.enabled=!0)}function a(){n.keyboard.enabled&&(h(p).off("keydown",e),n.keyboard.enabled=!1)}let{swiper:n,extendParams:r,on:l,emit:d}=t;const p=s(),c=i();n.keyboard={enabled:!1},r({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),l("init",()=>{n.params.keyboard.enabled&&o()}),l("destroy",()=>{n.keyboard.enabled&&a()}),Object.assign(n.keyboard,{enable:o,disable:a})}function re(t){function e(t){const e=10,s=40,i=800;let o=0,a=0,n=0,r=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(o=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(o=a,a=0),n=o*e,r=a*e,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),t.shiftKey&&!n&&(n=r,r=0),(n||r)&&t.deltaMode&&(1===t.deltaMode?(n*=s,r*=s):(n*=i,r*=i)),n&&!o&&(o=n<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:o,spinY:a,pixelX:n,pixelY:r}}function s(){c.enabled&&(c.mouseEntered=!0)}function o(){c.enabled&&(c.mouseEntered=!1)}function a(t){return!(c.params.mousewheel.thresholdDelta&&t.delta<c.params.mousewheel.thresholdDelta)&&(!(c.params.mousewheel.thresholdTime&&X()-b<c.params.mousewheel.thresholdTime)&&(t.delta>=6&&X()-b<60||(t.direction<0?c.isEnd&&!c.params.loop||c.animating||(c.slideNext(),g("scroll",t.raw)):c.isBeginning&&!c.params.loop||c.animating||(c.slidePrev(),g("scroll",t.raw)),b=(new f.Date).getTime(),!1)))}function n(t){const e=c.params.mousewheel;if(t.direction<0){if(c.isEnd&&!c.params.loop&&e.releaseOnEdges)return!0}else if(c.isBeginning&&!c.params.loop&&e.releaseOnEdges)return!0;return!1}function r(t){let s=t,i=!0;if(!c.enabled)return;const o=c.params.mousewheel;c.params.cssMode&&axPreventDefault(s);let r=c.$el;if("container"!==c.params.mousewheel.eventsTarget&&(r=h(c.params.mousewheel.eventsTarget)),!c.mouseEntered&&!r[0].contains(s.target)&&!o.releaseOnEdges)return!0;s.originalEvent&&(s=s.originalEvent);let l=0;const d=c.rtlTranslate?-1:1,p=e(s);if(o.forceToAxis)if(c.isHorizontal()){if(!(Math.abs(p.pixelX)>Math.abs(p.pixelY)))return!0;l=-p.pixelX*d}else{if(!(Math.abs(p.pixelY)>Math.abs(p.pixelX)))return!0;l=-p.pixelY}else l=Math.abs(p.pixelX)>Math.abs(p.pixelY)?-p.pixelX*d:-p.pixelY;if(0===l)return!0;o.invert&&(l=-l);let m=c.getTranslate()+l*o.sensitivity;if(m>=c.minTranslate()&&(m=c.minTranslate()),m<=c.maxTranslate()&&(m=c.maxTranslate()),i=!!c.params.loop||!(m===c.minTranslate()||m===c.maxTranslate()),i&&c.params.nested&&s.stopPropagation(),c.params.freeMode&&c.params.freeMode.enabled){const t={time:X(),delta:Math.abs(l),direction:Math.sign(l)},e=y&&t.time<y.time+500&&t.delta<=y.delta&&t.direction===y.direction;if(!e){y=void 0,c.params.loop&&c.loopFix();let i=c.getTranslate()+l*o.sensitivity;const a=c.isBeginning,n=c.isEnd;if(i>=c.minTranslate()&&(i=c.minTranslate()),i<=c.maxTranslate()&&(i=c.maxTranslate()),c.setTransition(0),c.setTranslate(i),c.updateProgress(),c.updateActiveIndex(),c.updateSlidesClasses(),(!a&&c.isBeginning||!n&&c.isEnd)&&c.updateSlidesClasses(),c.params.freeMode.sticky){clearTimeout(x),x=void 0,v.length>=15&&v.shift();const e=v.length?v[v.length-1]:void 0,s=v[0];if(v.push(t),e&&(t.delta>e.delta||t.direction!==e.direction))v.splice(0);else if(v.length>=15&&t.time-s.time<500&&s.delta-t.delta>=1&&t.delta<=6){const e=l>0?.8:.2;y=t,v.splice(0),x=W(()=>{c.slideToClosest(c.params.speed,!0,void 0,e)},0)}x||(x=W(()=>{const e=.5;y=t,v.splice(0),c.slideToClosest(c.params.speed,!0,void 0,e)},500))}if(e||g("scroll",s),c.params.autoplay&&c.params.autoplayDisableOnInteraction&&c.autoplay.stop(),i===c.minTranslate()||i===c.maxTranslate())return!0}}else{const e={time:X(),delta:Math.abs(l),direction:Math.sign(l),raw:t};v.length>=2&&v.shift();const s=v.length?v[v.length-1]:void 0;if(v.push(e),s?(e.direction!==s.direction||e.delta>s.delta||e.time>s.time+150)&&a(e):a(e),n(e))return!0}return axPreventDefault(s),!1}function l(t){let e=c.$el;"container"!==c.params.mousewheel.eventsTarget&&(e=h(c.params.mousewheel.eventsTarget)),e[t]("mouseenter",s),e[t]("mouseleave",o),e[t]("wheel",r)}function d(){return c.params.cssMode?(c.wrapperEl.removeEventListener("wheel",r),!0):!c.mousewheel.enabled&&(l("on"),c.mousewheel.enabled=!0,!0)}function p(){return c.params.cssMode?(c.wrapperEl.addEventListener(event,r),!0):!!c.mousewheel.enabled&&(l("off"),c.mousewheel.enabled=!1,!0)}let{swiper:c,extendParams:m,on:u,emit:g}=t;const f=i();let x;m({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),c.mousewheel={enabled:!1};let y,b=X();const v=[];u("init",()=>{!c.params.mousewheel.enabled&&c.params.cssMode&&p(),c.params.mousewheel.enabled&&d()}),u("destroy",()=>{c.params.cssMode&&d(),c.mousewheel.enabled&&p()}),Object.assign(c.mousewheel,{enable:d,disable:p})}function le(t,e,i,o){const a=s();return t.params.createElements&&Object.keys(o).forEach(s=>{if(!i[s]&&!0===i.auto){let n=t.$el.children(`.${o[s]}`)[0];n||(n=a.createElement("div"),n.className=o[s],t.$el.append(n)),i[s]=n,e[s]=n}}),i}function he(t){function e(t){let e;return t&&(e=h(t),l.params.uniqueNavElements&&"string"==typeof t&&e.length>1&&1===l.$el.find(t).length&&(e=l.$el.find(t))),e}function s(t,e){const s=l.params.navigation;t&&t.length>0&&(t[e?"addClass":"removeClass"](s.disabledClass),t[0]&&"BUTTON"===t[0].tagName&&(t[0].disabled=e),l.params.watchOverflow&&l.enabled&&t[l.isLocked?"addClass":"removeClass"](s.lockClass))}function i(){if(l.params.loop)return;const{$nextEl:t,$prevEl:e}=l.navigation;s(e,l.isBeginning&&!l.params.rewind),s(t,l.isEnd&&!l.params.rewind)}function o(t){axPreventDefault(t),(!l.isBeginning||l.params.loop||l.params.rewind)&&l.slidePrev()}function a(t){axPreventDefault(t),(!l.isEnd||l.params.loop||l.params.rewind)&&l.slideNext()}function n(){const t=l.params.navigation;if(l.params.navigation=le(l,l.originalParams.navigation,l.params.navigation,{nextEl:"ax-next",prevEl:"ax-prev"}),!t.nextEl&&!t.prevEl)return;const s=e(t.nextEl),i=e(t.prevEl);s&&s.length>0&&s.on("click",a),i&&i.length>0&&i.on("click",o),Object.assign(l.navigation,{$nextEl:s,nextEl:s&&s[0],$prevEl:i,prevEl:i&&i[0]}),l.enabled||(s&&s.addClass(t.lockClass),i&&i.addClass(t.lockClass))}function r(){const{$nextEl:t,$prevEl:e}=l.navigation;t&&t.length&&(t.off("click",a),t.removeClass(l.params.navigation.disabledClass)),e&&e.length&&(e.off("click",o),e.removeClass(l.params.navigation.disabledClass))}let{swiper:l,extendParams:d,on:p,emit:c}=t;d({navigation:{nextEl:".ax-next",prevEl:".ax-prev",hideOnClick:!1,disabledClass:"ax-disabled",hiddenClass:"ax-hidden",lockClass:"ax-lock"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},p("init",()=>{n(),i()}),p("toEdge fromEdge lock unlock",()=>{i()}),p("destroy",()=>{r()}),p("enable disable",()=>{const{$nextEl:t,$prevEl:e}=l.navigation;t&&t[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),e&&e[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),p("click",(t,e)=>{const{$nextEl:s,$prevEl:i}=l.navigation,o=e.target;if(l.params.navigation.hideOnClick&&!h(o).is(i)&&!h(o).is(s)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===o||l.pagination.el.contains(o)))return;let t;s?t=s.hasClass(l.params.navigation.hiddenClass):i&&(t=i.hasClass(l.params.navigation.hiddenClass)),c(!0===t?"navigationShow":"navigationHide"),s&&s.toggleClass(l.params.navigation.hiddenClass),i&&i.toggleClass(l.params.navigation.hiddenClass)}}),Object.assign(l.navigation,{update:i,init:n,destroy:r})}function de(t){return void 0===t&&(t=""),`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function pe(t){function e(){return!r.params.pagination.el||!r.pagination.el||!r.pagination.$el||0===r.pagination.$el.length}function s(t,e){const{bulletActiveClass:s}=r.params.pagination;t[e]().addClass(`${s}-${e}`)[e]().addClass(`${s}-${e}-${e}`)}function i(){const t=r.rtl,i=r.params.pagination;if(e())return;const o=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.slides.length,a=r.pagination.$el;let n;const l=r.params.loop?Math.ceil((o-2*r.loopedSlides)/r.params.slidesPerGroup):r.snapGrid.length;if(r.params.loop?(n=Math.ceil((r.activeIndex-r.loopedSlides)/r.params.slidesPerGroup),n>o-1-2*r.loopedSlides&&(n-=o-2*r.loopedSlides),n>l-1&&(n-=l),n<0&&"bullets"!==r.params.paginationType&&(n=l+n)):n=void 0!==r.snapIndex?r.snapIndex:r.activeIndex||0,"bullets"===i.type&&r.pagination.bullets&&r.pagination.bullets.length>0){const e=r.pagination.bullets;let o,l,d;if(i.dynamicBullets&&(m=e.eq(0)[r.isHorizontal()?"outerWidth":"outerHeight"](!0),a.css(r.isHorizontal()?"width":"height",`${m*(i.dynamicMainBullets+4)}px`),i.dynamicMainBullets>1&&void 0!==r.previousIndex&&(u+=n-(r.previousIndex-r.loopedSlides||0),u>i.dynamicMainBullets-1?u=i.dynamicMainBullets-1:u<0&&(u=0)),o=Math.max(n-u,0),l=o+(Math.min(e.length,i.dynamicMainBullets)-1),d=(l+o)/2),e.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(t=>`${i.bulletActiveClass}${t}`).join(" ")),a.length>1)e.each(t=>{const e=h(t),a=e.index();a===n&&e.addClass(i.bulletActiveClass),i.dynamicBullets&&(a>=o&&a<=l&&e.addClass(`${i.bulletActiveClass}-main`),a===o&&s(e,"prev"),a===l&&s(e,"next"))});else{const t=e.eq(n),a=t.index();if(t.addClass(i.bulletActiveClass),i.dynamicBullets){const t=e.eq(o),n=e.eq(l);for(let t=o;t<=l;t+=1)e.eq(t).addClass(`${i.bulletActiveClass}-main`);if(r.params.loop)if(a>=e.length){for(let t=i.dynamicMainBullets;t>=0;t-=1)e.eq(e.length-t).addClass(`${i.bulletActiveClass}-main`);e.eq(e.length-i.dynamicMainBullets-1).addClass(`${i.bulletActiveClass}-prev`)}else s(t,"prev"),s(n,"next");else s(t,"prev"),s(n,"next")}}if(i.dynamicBullets){const s=Math.min(e.length,i.dynamicMainBullets+4),o=(m*s-m)/2-d*m,a=t?"right":"left";e.css(r.isHorizontal()?a:"top",`${o}px`)}}if("fraction"===i.type&&(a.find(de(i.currentClass)).text(i.formatFractionCurrent(n+1)),a.find(de(i.totalClass)).text(i.formatFractionTotal(l))),"progressbar"===i.type){let t;t=i.progressbarOpposite?r.isHorizontal()?"vertical":"horizontal":r.isHorizontal()?"horizontal":"vertical";const e=(n+1)/l;let s=1,o=1;"horizontal"===t?s=e:o=e,a.find(de(i.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${s}) scaleY(${o})`).transition(r.params.speed)}"custom"===i.type&&i.renderCustom?(a.html(i.renderCustom(r,n+1,l)),p("paginationRender",a[0])):p("paginationUpdate",a[0]),r.params.watchOverflow&&r.enabled&&a[r.isLocked?"addClass":"removeClass"](i.lockClass)}function o(){const t=r.params.pagination;if(e())return;const s=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.slides.length,i=r.pagination.$el;let o="";if("bullets"===t.type){let e=r.params.loop?Math.ceil((s-2*r.loopedSlides)/r.params.slidesPerGroup):r.snapGrid.length;r.params.freeMode&&r.params.freeMode.enabled&&!r.params.loop&&e>s&&(e=s);for(let s=0;s<e;s+=1)t.renderBullet?o+=t.renderBullet.call(r,s,t.bulletClass):o+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;i.html(o),r.pagination.bullets=i.find(de(t.bulletClass))}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(r,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span>`+" / "+`<span class="${t.totalClass}"></span>`,i.html(o)),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(r,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,i.html(o)),"custom"!==t.type&&p("paginationRender",r.pagination.$el[0])}function a(){r.params.pagination=le(r,r.originalParams.pagination,r.params.pagination,{el:"ax-pages"});const t=r.params.pagination;if(!t.el)return;let e=h(t.el);0!==e.length&&(r.params.uniqueNavElements&&"string"==typeof t.el&&e.length>1&&(e=r.$el.find(t.el),e.length>1&&(e=e.filter(t=>h(t).parents(".swiper")[0]===r.el))),"bullets"===t.type&&t.clickable&&e.addClass(t.clickableClass),e.addClass(t.modifierClass+t.type),e.addClass(r.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(e.addClass(`${t.modifierClass}${t.type}-dynamic`),u=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&e.addClass(t.progressbarOppositeClass),t.clickable&&e.on("click",de(t.bulletClass),function(t){axPreventDefault(t);let e=h(this).index()*r.params.slidesPerGroup;r.params.loop&&(e+=r.loopedSlides),r.slideTo(e)}),Object.assign(r.pagination,{$el:e,el:e[0]}),r.enabled||e.addClass(t.lockClass))}function n(){const t=r.params.pagination;if(e())return;const s=r.pagination.$el;s.removeClass(t.hiddenClass),s.removeClass(t.modifierClass+t.type),s.removeClass(r.isHorizontal()?t.horizontalClass:t.verticalClass),r.pagination.bullets&&r.pagination.bullets.removeClass&&r.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&s.off("click",de(t.bulletClass))}let{swiper:r,extendParams:l,on:d,emit:p}=t;const c="ax-pages";let m;l({pagination:{el:"."+c,bulletElement:"i",clickable:!0,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`}}),r.pagination={el:null,$el:null,bullets:[]};let u=0;d("init",()=>{a(),o(),i()}),d("activeIndexChange",()=>{r.params.loop?i():void 0===r.snapIndex&&i()}),d("snapIndexChange",()=>{r.params.loop||i()}),d("slidesLengthChange",()=>{r.params.loop&&(o(),i())}),d("snapGridLengthChange",()=>{r.params.loop||(o(),i())}),d("destroy",()=>{n()}),d("enable disable",()=>{const{$el:t}=r.pagination;t&&t[r.enabled?"removeClass":"addClass"](r.params.pagination.lockClass)}),d("lock unlock",()=>{i()}),d("click",(t,e)=>{const s=e.target,{$el:i}=r.pagination;if(r.params.pagination.el&&r.params.pagination.hideOnClick&&i.length>0&&!h(s).hasClass(r.params.pagination.bulletClass)){if(r.navigation&&(r.navigation.nextEl&&s===r.navigation.nextEl||r.navigation.prevEl&&s===r.navigation.prevEl))return;const t=i.hasClass(r.params.pagination.hiddenClass);p(!0===t?"paginationShow":"paginationHide"),i.toggleClass(r.params.pagination.hiddenClass)}}),Object.assign(r.pagination,{render:o,update:i,init:a,destroy:n})}function ce(t){function e(){if(!f.params.scrollbar.el||!f.scrollbar.el)return;const{scrollbar:t,rtlTranslate:e,progress:s}=f,{$dragEl:i,$el:o}=t,a=f.params.scrollbar;let n=w,r=(T-w)*s;e?(r=-r,r>0?(n=w-r,r=0):-r+w>T&&(n=T+r)):r<0?(n=w+r,r=0):r+w>T&&(n=T-r),f.isHorizontal()?(i.transform(`translate3d(${r}px, 0, 0)`),i[0].style.width=`${n}px`):(i.transform(`translate3d(0px, ${r}px, 0)`),i[0].style.height=`${n}px`),a.hide&&(clearTimeout(A),o[0].style.opacity=1,A=setTimeout(()=>{o[0].style.opacity=0,o.transition(400)},1e3))}function i(t){f.params.scrollbar.el&&f.scrollbar.el&&f.scrollbar.$dragEl.transition(t)}function o(){if(!f.params.scrollbar.el||!f.scrollbar.el)return;const{scrollbar:t}=f,{$dragEl:e,$el:s}=t;e[0].style.width="",e[0].style.height="",T=f.isHorizontal()?s[0].offsetWidth:s[0].offsetHeight,E=f.size/(f.virtualSize+f.params.slidesOffsetBefore-(f.params.centeredSlides?f.snapGrid[0]:0)),w="auto"===f.params.scrollbar.dragSize?T*E:parseInt(f.params.scrollbar.dragSize,10),f.isHorizontal()?e[0].style.width=`${w}px`:e[0].style.height=`${w}px`,s[0].style.display=E>=1?"none":"",f.params.scrollbar.hide&&(s[0].style.opacity=0),f.params.watchOverflow&&f.enabled&&t.$el[f.isLocked?"addClass":"removeClass"](f.params.scrollbar.lockClass)}function a(t){return f.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY}function n(t){const{scrollbar:e,rtlTranslate:s}=f,{$el:i}=e;let o;o=(a(t)-i.offset()[f.isHorizontal()?"left":"top"]-(null!==D?D:w/2))/(T-w),o=Math.max(Math.min(o,1),0),s&&(o=1-o);const n=f.minTranslate()+(f.maxTranslate()-f.minTranslate())*o;f.updateProgress(n),f.setTranslate(n),f.updateActiveIndex(),f.updateSlidesClasses()}function r(t){const e=f.params.scrollbar,{scrollbar:s,$wrapperEl:i}=f,{$el:o,$dragEl:r}=s;S=!0,D=t.target===r[0]||t.target===r?a(t)-t.target.getBoundingClientRect()[f.isHorizontal()?"left":"top"]:null,axPreventDefault(t),t.stopPropagation(),i.transition(100),r.transition(100),n(t),clearTimeout(C),o.transition(0),e.hide&&o.css("opacity",1),f.params.cssMode&&f.$wrapperEl.css("scroll-snap-type","none"),b("scrollbarDragStart",t)}function l(t){const{scrollbar:e,$wrapperEl:s}=f,{$el:i,$dragEl:o}=e;S&&(axPreventDefault(t),n(t),s.transition(0),i.transition(0),o.transition(0),b("scrollbarDragMove",t))}function d(t){const e=f.params.scrollbar,{scrollbar:s,$wrapperEl:i}=f,{$el:o}=s;S&&(S=!1,f.params.cssMode&&(f.$wrapperEl.css("scroll-snap-type",""),i.transition("")),e.hide&&(clearTimeout(C),C=W(()=>{o.css("opacity",0),o.transition(400)},1e3)),b("scrollbarDragEnd",t),e.snapOnRelease&&f.slideToClosest())}function p(t){const{scrollbar:e,touchEventsTouch:s,touchEventsDesktop:i,params:o,support:a}=f,n=e.$el,h=n[0],p=!(!a.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},c=!(!a.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};if(!h)return;const m="on"===t?"addEventListener":"removeEventListener";a.touch?(h[m](s.start,r,p),h[m](s.move,l,p),h[m](s.end,d,c)):(h[m](i.start,r,p),v[m](i.move,l,p),v[m](i.end,d,c))}function c(){f.params.scrollbar.el&&p("on")}function m(){f.params.scrollbar.el&&p("off")}function u(){const{scrollbar:t,$el:e}=f;f.params.scrollbar=le(f,f.originalParams.scrollbar,f.params.scrollbar,{el:"ax-scrollbar"});const s=f.params.scrollbar;if(!s.el)return;let i=h(s.el);f.params.uniqueNavElements&&"string"==typeof s.el&&i.length>1&&1===e.find(s.el).length&&(i=e.find(s.el));let o=i.find(`.${f.params.scrollbar.dragClass}`);0===o.length&&(o=h(`<div class="${f.params.scrollbar.dragClass}"></div>`),i.append(o)),Object.assign(t,{$el:i,el:i[0],$dragEl:o,dragEl:o[0]}),s.draggable&&c(),i&&i[f.enabled?"removeClass":"addClass"](f.params.scrollbar.lockClass)}function g(){m()}let{swiper:f,extendParams:x,on:y,emit:b}=t;const v=s();let D,w,T,E,S=!1,A=null,C=null;x({scrollbar:{el:".ax-scrollbar",dragSize:"auto",hide:!0,draggable:!0,snapOnRelease:!0,lockClass:"ax-scrollbar-lock",dragClass:"ax-scrollbar-drag"}}),f.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},y("init",()=>{u(),o(),e()}),y("update resize observerUpdate lock unlock",()=>{o()}),y("setTranslate",()=>{e()}),y("setTransition",(t,e)=>{i(e)}),y("enable disable",()=>{const{$el:t}=f.scrollbar;t&&t[f.enabled?"removeClass":"addClass"](f.params.scrollbar.lockClass)}),y("destroy",()=>{g()}),Object.assign(f.scrollbar,{updateSize:o,setTranslate:e,init:u,destroy:g})}function me(t){let{swiper:e,extendParams:s,on:i}=t;s({parallax:{enabled:!1}});const o=(t,s)=>{const{rtl:i}=e,o=h(t),a=i?-1:1,n=o.attr("data-swiper-parallax")||"0";let r=o.attr("data-swiper-parallax-x"),l=o.attr("data-swiper-parallax-y");const d=o.attr("data-swiper-parallax-scale"),p=o.attr("data-swiper-parallax-opacity");if(r||l?(r=r||"0",l=l||"0"):e.isHorizontal()?(r=n,l="0"):(l=n,r="0"),r=r.indexOf("%")>=0?`${parseInt(r,10)*s*a}%`:`${r*s*a}px`,l=l.indexOf("%")>=0?`${parseInt(l,10)*s}%`:`${l*s}px`,null!=p){const t=p-(p-1)*(1-Math.abs(s));o[0].style.opacity=t}if(null==d)o.transform(`translate3d(${r}, ${l}, 0px)`);else{const t=d-(d-1)*(1-Math.abs(s));o.transform(`translate3d(${r}, ${l}, 0px) scale(${t})`)}},a=()=>{const{$el:t,slides:s,progress:i,snapGrid:a}=e;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(t=>{o(t,i)}),s.each((t,s)=>{let n=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(n+=Math.ceil(s/2)-i*(a.length-1)),n=Math.min(Math.max(n,-1),1),
h(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(t=>{o(t,n)})})},n=function(t){void 0===t&&(t=e.params.speed);const{$el:s}=e;s.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(e=>{const s=h(e);let i=parseInt(s.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),s.transition(i)})};i("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),i("init",()=>{e.params.parallax.enabled&&a()}),i("setTranslate",()=>{e.params.parallax.enabled&&a()}),i("setTransition",(t,s)=>{e.params.parallax.enabled&&n(s)})}function ue(t){function e(t){if(t.targetTouches.length<2)return 1;const e=t.targetTouches[0].pageX,s=t.targetTouches[0].pageY,i=t.targetTouches[1].pageX,o=t.targetTouches[1].pageY,a=Math.sqrt((i-e)**2+(o-s)**2);return a}function s(t){const s=D.support,i=D.params.zoom;if(C=!1,M=!1,!s.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;C=!0,L.scaleStart=e(t)}L.$slideEl&&L.$slideEl.length||(L.$slideEl=h(t.target).closest(`.${D.params.slideClass}`),0===L.$slideEl.length&&(L.$slideEl=D.slides.eq(D.activeIndex)),L.$imageEl=L.$slideEl.find(`.${i.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),L.$imageWrapEl=L.$imageEl.parent(`.${i.containerClass}`),L.maxRatio=L.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==L.$imageWrapEl.length)?(L.$imageEl&&L.$imageEl.transition(0),I=!0):L.$imageEl=void 0}function o(t){const i=D.support,o=D.params.zoom,a=D.zoom;if(!i.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;M=!0,L.scaleMove=e(t)}L.$imageEl&&0!==L.$imageEl.length?(i.gestures?a.scale=t.scale*k:a.scale=L.scaleMove/L.scaleStart*k,a.scale>L.maxRatio&&(a.scale=L.maxRatio-1+(a.scale-L.maxRatio+1)**.5),a.scale<o.minRatio&&(a.scale=o.minRatio+1-(o.minRatio-a.scale+1)**.5),L.$imageEl.transform(`translate3d(0,0,0) scale(${a.scale})`)):"gesturechange"===t.type&&s(t)}function a(t){const e=D.device,s=D.support,i=D.params.zoom,o=D.zoom;if(!s.gestures){if(!C||!M)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!e.android)return;C=!1,M=!1}L.$imageEl&&0!==L.$imageEl.length&&(o.scale=Math.max(Math.min(o.scale,L.maxRatio),i.minRatio),L.$imageEl.transition(D.params.speed).transform(`translate3d(0,0,0) scale(${o.scale})`),k=o.scale,I=!1,1===o.scale&&(L.$slideEl=void 0))}function n(t){const e=D.device;L.$imageEl&&0!==L.$imageEl.length&&($.isTouched||(e.android&&t.cancelable&&axPreventDefault(t),$.isTouched=!0,$.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,$.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))}function r(t){const e=D.zoom;if(!L.$imageEl||0===L.$imageEl.length)return;if(D.allowClick=!1,!$.isTouched||!L.$slideEl)return;$.isMoved||($.width=L.$imageEl[0].offsetWidth,$.height=L.$imageEl[0].offsetHeight,$.startX=J(L.$imageWrapEl[0],"x")||0,$.startY=J(L.$imageWrapEl[0],"y")||0,L.slideWidth=L.$slideEl[0].offsetWidth,L.slideHeight=L.$slideEl[0].offsetHeight,L.$imageWrapEl.transition(0));const s=$.width*e.scale,i=$.height*e.scale;if(!(s<L.slideWidth&&i<L.slideHeight)){if($.minX=Math.min(L.slideWidth/2-s/2,0),$.maxX=-$.minX,$.minY=Math.min(L.slideHeight/2-i/2,0),$.maxY=-$.minY,$.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,$.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!$.isMoved&&!I){if(D.isHorizontal()&&(Math.floor($.minX)===Math.floor($.startX)&&$.touchesCurrent.x<$.touchesStart.x||Math.floor($.maxX)===Math.floor($.startX)&&$.touchesCurrent.x>$.touchesStart.x))return void($.isTouched=!1);if(!D.isHorizontal()&&(Math.floor($.minY)===Math.floor($.startY)&&$.touchesCurrent.y<$.touchesStart.y||Math.floor($.maxY)===Math.floor($.startY)&&$.touchesCurrent.y>$.touchesStart.y))return void($.isTouched=!1)}t.cancelable&&axPreventDefault(t),t.stopPropagation(),$.isMoved=!0,$.currentX=$.touchesCurrent.x-$.touchesStart.x+$.startX,$.currentY=$.touchesCurrent.y-$.touchesStart.y+$.startY,$.currentX<$.minX&&($.currentX=$.minX+1-($.minX-$.currentX+1)**.8),$.currentX>$.maxX&&($.currentX=$.maxX-1+($.currentX-$.maxX+1)**.8),$.currentY<$.minY&&($.currentY=$.minY+1-($.minY-$.currentY+1)**.8),$.currentY>$.maxY&&($.currentY=$.maxY-1+($.currentY-$.maxY+1)**.8),P.prevPositionX||(P.prevPositionX=$.touchesCurrent.x),P.prevPositionY||(P.prevPositionY=$.touchesCurrent.y),P.prevTime||(P.prevTime=Date.now()),P.x=($.touchesCurrent.x-P.prevPositionX)/(Date.now()-P.prevTime)/2,P.y=($.touchesCurrent.y-P.prevPositionY)/(Date.now()-P.prevTime)/2,Math.abs($.touchesCurrent.x-P.prevPositionX)<2&&(P.x=0),Math.abs($.touchesCurrent.y-P.prevPositionY)<2&&(P.y=0),P.prevPositionX=$.touchesCurrent.x,P.prevPositionY=$.touchesCurrent.y,P.prevTime=Date.now(),L.$imageWrapEl.transform(`translate3d(${$.currentX}px, ${$.currentY}px,0)`)}}function l(){const t=D.zoom;if(!L.$imageEl||0===L.$imageEl.length)return;if(!$.isTouched||!$.isMoved)return $.isTouched=!1,void($.isMoved=!1);$.isTouched=!1,$.isMoved=!1;let e=300,s=300;const i=P.x*e,o=$.currentX+i,a=P.y*s,n=$.currentY+a;0!==P.x&&(e=Math.abs((o-$.currentX)/P.x)),0!==P.y&&(s=Math.abs((n-$.currentY)/P.y));const r=Math.max(e,s);$.currentX=o,$.currentY=n;const l=$.width*t.scale,h=$.height*t.scale;$.minX=Math.min(L.slideWidth/2-l/2,0),$.maxX=-$.minX,$.minY=Math.min(L.slideHeight/2-h/2,0),$.maxY=-$.minY,$.currentX=Math.max(Math.min($.currentX,$.maxX),$.minX),$.currentY=Math.max(Math.min($.currentY,$.maxY),$.minY),L.$imageWrapEl.transition(r).transform(`translate3d(${$.currentX}px, ${$.currentY}px,0)`)}function d(){const t=D.zoom;L.$slideEl&&D.previousIndex!==D.activeIndex&&(L.$imageEl&&L.$imageEl.transform("translate3d(0,0,0) scale(1)"),L.$imageWrapEl&&L.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,k=1,L.$slideEl=void 0,L.$imageEl=void 0,L.$imageWrapEl=void 0)}function p(t){const e=D.zoom,s=D.params.zoom;if(L.$slideEl||(t&&t.target&&(L.$slideEl=h(t.target).closest(`.${D.params.slideClass}`)),L.$slideEl||(D.params.virtual&&D.params.virtual.enabled&&D.virtual?L.$slideEl=D.$wrapperEl.children(`.${D.params.slideActiveClass}`):L.$slideEl=D.slides.eq(D.activeIndex)),L.$imageEl=L.$slideEl.find(`.${s.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),L.$imageWrapEl=L.$imageEl.parent(`.${s.containerClass}`)),!L.$imageEl||0===L.$imageEl.length||!L.$imageWrapEl||0===L.$imageWrapEl.length)return;let i,o,a,n,r,l,d,p,c,m,u,g,f,x,y,b,v,w;D.params.cssMode&&(D.wrapperEl.style.overflow="hidden",D.wrapperEl.style.touchAction="none"),L.$slideEl.addClass(`${s.zoomedSlideClass}`),void 0===$.touchesStart.x&&t?(i="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,o="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(i=$.touchesStart.x,o=$.touchesStart.y),e.scale=L.$imageWrapEl.attr("data-swiper-zoom")||s.maxRatio,k=L.$imageWrapEl.attr("data-swiper-zoom")||s.maxRatio,t?(v=L.$slideEl[0].offsetWidth,w=L.$slideEl[0].offsetHeight,a=L.$slideEl.offset().left+S.scrollX,n=L.$slideEl.offset().top+S.scrollY,r=a+v/2-i,l=n+w/2-o,c=L.$imageEl[0].offsetWidth,m=L.$imageEl[0].offsetHeight,u=c*e.scale,g=m*e.scale,f=Math.min(v/2-u/2,0),x=Math.min(w/2-g/2,0),y=-f,b=-x,d=r*e.scale,p=l*e.scale,d<f&&(d=f),d>y&&(d=y),p<x&&(p=x),p>b&&(p=b)):(d=0,p=0),L.$imageWrapEl.transition(300).transform(`translate3d(${d}px, ${p}px,0)`),L.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${e.scale})`)}function c(){const t=D.zoom,e=D.params.zoom;L.$slideEl||(D.params.virtual&&D.params.virtual.enabled&&D.virtual?L.$slideEl=D.$wrapperEl.children(`.${D.params.slideActiveClass}`):L.$slideEl=D.slides.eq(D.activeIndex),L.$imageEl=L.$slideEl.find(`.${e.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),L.$imageWrapEl=L.$imageEl.parent(`.${e.containerClass}`)),L.$imageEl&&0!==L.$imageEl.length&&L.$imageWrapEl&&0!==L.$imageWrapEl.length&&(D.params.cssMode&&(D.wrapperEl.style.overflow="",D.wrapperEl.style.touchAction=""),t.scale=1,k=1,L.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),L.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),L.$slideEl.removeClass(`${e.zoomedSlideClass}`),L.$slideEl=void 0)}function m(t){const e=D.zoom;e.scale&&1!==e.scale?c():p(t)}function u(){const t=D.support,e=!("touchstart"!==D.touchEvents.start||!t.passiveListener||!D.params.passiveListeners)&&{passive:!0,capture:!1},s=!t.passiveListener||{passive:!1,capture:!0};return{passiveListener:e,activeListenerWithCapture:s}}function g(){return`.${D.params.slideClass}`}function f(t){const{passiveListener:e}=u(),i=g();D.$wrapperEl[t]("gesturestart",i,s,e),D.$wrapperEl[t]("gesturechange",i,o,e),D.$wrapperEl[t]("gestureend",i,a,e)}function x(){A||(A=!0,f("on"))}function y(){A&&(A=!1,f("off"))}function b(){const t=D.zoom;if(t.enabled)return;t.enabled=!0;const e=D.support,{passiveListener:i,activeListenerWithCapture:n}=u(),l=g();e.gestures?(D.$wrapperEl.on(D.touchEvents.start,x,i),D.$wrapperEl.on(D.touchEvents.end,y,i)):"touchstart"===D.touchEvents.start&&(D.$wrapperEl.on(D.touchEvents.start,l,s,i),D.$wrapperEl.on(D.touchEvents.move,l,o,n),D.$wrapperEl.on(D.touchEvents.end,l,a,i),D.touchEvents.cancel&&D.$wrapperEl.on(D.touchEvents.cancel,l,a,i)),D.$wrapperEl.on(D.touchEvents.move,`.${D.params.zoom.containerClass}`,r,n)}function v(){const t=D.zoom;if(!t.enabled)return;const e=D.support;t.enabled=!1;const{passiveListener:i,activeListenerWithCapture:n}=u(),l=g();e.gestures?(D.$wrapperEl.off(D.touchEvents.start,x,i),D.$wrapperEl.off(D.touchEvents.end,y,i)):"touchstart"===D.touchEvents.start&&(D.$wrapperEl.off(D.touchEvents.start,l,s,i),D.$wrapperEl.off(D.touchEvents.move,l,o,n),D.$wrapperEl.off(D.touchEvents.end,l,a,i),D.touchEvents.cancel&&D.$wrapperEl.off(D.touchEvents.cancel,l,a,i)),D.$wrapperEl.off(D.touchEvents.move,`.${D.params.zoom.containerClass}`,r,n)}let{swiper:D,extendParams:w,on:T,emit:E}=t;const S=i();w({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"ax-zoom",zoomedSlideClass:"ax-slide-zoomed"}}),D.zoom={enabled:!1};let A,C,M,k=1,I=!1;const L={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},$={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},P={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let _=1;Object.defineProperty(D.zoom,"scale",{get:()=>_,set(t){if(_!==t){const e=L.$imageEl?L.$imageEl[0]:void 0,s=L.$slideEl?L.$slideEl[0]:void 0;E("zoomChange",t,e,s)}_=t}}),T("init",()=>{D.params.zoom.enabled&&b()}),T("destroy",()=>{v()}),T("touchStart",(t,e)=>{D.zoom.enabled&&n(e)}),T("touchEnd",(t,e)=>{D.zoom.enabled&&l()}),T("doubleTap",(t,e)=>{!D.animating&&D.params.zoom.enabled&&D.zoom.enabled&&D.params.zoom.toggle&&m(e)}),T("transitionEnd",()=>{D.zoom.enabled&&D.params.zoom.enabled&&d()}),T("slideChange",()=>{D.zoom.enabled&&D.params.zoom.enabled&&D.params.cssMode&&d()}),Object.assign(D.zoom,{enable:b,disable:v,in:p,out:c,toggle:m})}function ge(t){function e(t,s){void 0===s&&(s=!0);const i=a.params.lazy;if(void 0===t)return;if(0===a.slides.length)return;const o=a.virtual&&a.params.virtual.enabled,n=o?a.$wrapperEl.children(`.${a.params.slideClass}[data-swiper-slide-index="${t}"]`):a.slides.eq(t),r=n.find(`.${i.elementClass}:not(.${i.loadedClass}):not(.${i.loadingClass})`);!n.hasClass(i.elementClass)||n.hasClass(i.loadedClass)||n.hasClass(i.loadingClass)||r.push(n[0]),0!==r.length&&r.each(t=>{const o=h(t);o.addClass(i.loadingClass);const r=o.attr("data-background"),d=o.attr("data-src"),p=o.attr("data-srcset"),c=o.attr("data-sizes"),m=o.parent("picture");a.loadImage(o[0],d||r,p,c,!1,()=>{if(null!=a&&a&&(!a||a.params)&&!a.destroyed){if(r?(o.css("background-image",`url("${r}")`),o.removeAttr("data-background")):(p&&(o.attr("srcset",p),o.removeAttr("data-srcset")),c&&(o.attr("sizes",c),o.removeAttr("data-sizes")),m.length&&m.children("source").each(t=>{const e=h(t);e.attr("data-srcset")&&(e.attr("srcset",e.attr("data-srcset")),e.removeAttr("data-srcset"))}),d&&(o.attr("src",d),o.removeAttr("data-src"))),o.addClass(i.loadedClass).removeClass(i.loadingClass),n.find(`.${i.preloaderClass}`).remove(),a.params.loop&&s){const t=n.attr("data-swiper-slide-index");if(n.hasClass(a.params.slideDuplicateClass)){const s=a.$wrapperEl.children(`[data-swiper-slide-index="${t}"]:not(.${a.params.slideDuplicateClass})`);e(s.index(),!1)}else{const s=a.$wrapperEl.children(`.${a.params.slideDuplicateClass}[data-swiper-slide-index="${t}"]`);e(s.index(),!1)}}l("lazyImageReady",n[0],o[0]),a.params.autoHeight&&a.updateAutoHeight()}}),l("lazyImageLoad",n[0],o[0])})}function s(){function t(t){if(l){if(i.children(`.${o.slideClass}[data-swiper-slide-index="${t}"]`).length)return!0}else if(n[t])return!0;return!1}function s(t){return l?h(t).attr("data-swiper-slide-index"):h(t).index()}const{$wrapperEl:i,params:o,slides:n,activeIndex:r}=a,l=a.virtual&&o.virtual.enabled,d=o.lazy;let c=o.slidesPerView;if("auto"===c&&(c=0),p||(p=!0),a.params.watchSlidesProgress)i.children(`.${o.slideVisibleClass}`).each(t=>{const s=l?h(t).attr("data-swiper-slide-index"):h(t).index();e(s)});else if(c>1)for(let s=r;s<r+c;s+=1)t(s)&&e(s);else e(r);if(d.loadPrevNext)if(c>1||d.loadPrevNextAmount&&d.loadPrevNextAmount>1){const s=d.loadPrevNextAmount,i=c,o=Math.min(r+i+Math.max(s,i),n.length),a=Math.max(r-Math.max(i,s),0);for(let s=r+c;s<o;s+=1)t(s)&&e(s);for(let s=a;s<r;s+=1)t(s)&&e(s)}else{const t=i.children(`.${o.slideNextClass}`);t.length>0&&e(s(t));const a=i.children(`.${o.slidePrevClass}`);a.length>0&&e(s(a))}}function o(){const t=i();if(!a||a.destroyed)return;const e=a.params.lazy.scrollingElement?h(a.params.lazy.scrollingElement):h(t),n=e[0]===t,r=n?t.innerWidth:e[0].offsetWidth,l=n?t.innerHeight:e[0].offsetHeight,p=a.$el.offset(),{rtlTranslate:c}=a;let m=!1;c&&(p.left-=a.$el[0].scrollLeft);const u=[[p.left,p.top],[p.left+a.width,p.top],[p.left,p.top+a.height],[p.left+a.width,p.top+a.height]];for(let t=0;t<u.length;t+=1){const e=u[t];if(e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=l){if(0===e[0]&&0===e[1])continue;m=!0}}const g=!("touchstart"!==a.touchEvents.start||!a.support.passiveListener||!a.params.passiveListeners)&&{passive:!0,capture:!1};m?(s(),e.off("scroll",o,g)):d||(d=!0,e.on("scroll",o,g))}let{swiper:a,extendParams:n,on:r,emit:l}=t;n({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"ax-lazy",loadingClass:"ax-lazy-loading",loadedClass:"ax-lazy-loaded",preloaderClass:"ax-loading"}}),a.lazy={};let d=!1,p=!1;r("beforeInit",()=>{a.params.lazy.enabled&&a.params.preloadImages&&(a.params.preloadImages=!1)}),r("init",()=>{a.params.lazy.enabled&&(a.params.lazy.checkInView?o():s())}),r("scroll",()=>{a.params.freeMode&&a.params.freeMode.enabled&&!a.params.freeMode.sticky&&s()}),r("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{a.params.lazy.enabled&&(a.params.lazy.checkInView?o():s())}),r("transitionStart",()=>{a.params.lazy.enabled&&(a.params.lazy.loadOnTransitionStart||!a.params.lazy.loadOnTransitionStart&&!p)&&(a.params.lazy.checkInView?o():s())}),r("transitionEnd",()=>{a.params.lazy.enabled&&!a.params.lazy.loadOnTransitionStart&&(a.params.lazy.checkInView?o():s())}),r("slideChange",()=>{const{lazy:t,cssMode:e,watchSlidesProgress:i,touchReleaseOnEdges:o,resistanceRatio:n}=a.params;t.enabled&&(e||i&&(o||0===n))&&s()}),Object.assign(a.lazy,{load:s,loadInSlide:e})}function fe(t){function e(t,e){const s=function(){let t,e,s;return(i,o)=>{for(e=-1,t=i.length;t-e>1;)s=t+e>>1,i[s]<=o?e=s:t=s;return t}}();let i,o;return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=s(this.x,t),i=o-1,(t-this.x[i])*(this.y[o]-this.y[i])/(this.x[o]-this.x[i])+this.y[i]):0},this}function s(t){n.controller.spline||(n.controller.spline=n.params.loop?new e(n.slidesGrid,t.slidesGrid):new e(n.snapGrid,t.snapGrid))}function i(t,e){function i(t){const e=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(s(t),r=-n.controller.spline.interpolate(-e)),r&&"container"!==n.params.controller.by||(a=(t.maxTranslate()-t.minTranslate())/(n.maxTranslate()-n.minTranslate()),r=(e-n.minTranslate())*a+t.minTranslate()),n.params.controller.inverse&&(r=t.maxTranslate()-r),t.updateProgress(r),t.setTranslate(r,n),t.updateActiveIndex(),t.updateSlidesClasses()}const o=n.controller.control;let a,r;const l=n.constructor;if(Array.isArray(o))for(let t=0;t<o.length;t+=1)o[t]!==e&&o[t]instanceof l&&i(o[t]);else o instanceof l&&e!==o&&i(o)}function o(t,e){function s(e){e.setTransition(t,n),0!==t&&(e.transitionStart(),e.params.autoHeight&&W(()=>{e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(()=>{o&&(e.params.loop&&"slide"===n.params.controller.by&&e.loopFix(),e.transitionEnd())}))}const i=n.constructor,o=n.controller.control;let a;if(Array.isArray(o))for(a=0;a<o.length;a+=1)o[a]!==e&&o[a]instanceof i&&s(o[a]);else o instanceof i&&e!==o&&s(o)}function a(){n.controller.control&&n.controller.spline&&(n.controller.spline=void 0,delete n.controller.spline)}let{swiper:n,extendParams:r,on:l}=t;r({controller:{control:void 0,inverse:!1,by:"slide"}}),n.controller={control:void 0},l("beforeInit",()=>{n.controller.control=n.params.controller.control}),l("update",()=>{a()}),l("resize",()=>{a()}),l("observerUpdate",()=>{a()}),l("setTranslate",(t,e,s)=>{n.controller.control&&n.controller.setTranslate(e,s)}),l("setTransition",(t,e,s)=>{n.controller.control&&n.controller.setTransition(e,s)}),Object.assign(n.controller,{setTranslate:i,setTransition:o})}function xe(t){function e(t){const e=E;0!==e.length&&(e.html(""),e.html(t))}function s(t){void 0===t&&(t=16);const e=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(t).replace(/x/g,e)}function i(t){t.attr("tabIndex","0")}function o(t){t.attr("tabIndex","-1")}function a(t,e){t.attr("role",e)}function n(t,e){t.attr("aria-roledescription",e)}function r(t,e){t.attr("aria-controls",e)}function l(t,e){t.attr("aria-label",e)}function d(t,e){t.attr("id",e)}function p(t,e){t.attr("aria-live",e)}function c(t){t.attr("aria-disabled",!0)}function m(t){t.attr("aria-disabled",!1)}function u(t){if(13!==t.keyCode&&32!==t.keyCode)return;const s=D.params.a11y,i=h(t.target);D.navigation&&D.navigation.$nextEl&&i.is(D.navigation.$nextEl)&&(D.isEnd&&!D.params.loop||D.slideNext(),D.isEnd?e(s.lastSlideMessage):e(s.nextSlideMessage)),D.navigation&&D.navigation.$prevEl&&i.is(D.navigation.$prevEl)&&(D.isBeginning&&!D.params.loop||D.slidePrev(),D.isBeginning?e(s.firstSlideMessage):e(s.prevSlideMessage)),D.pagination&&i.is(de(D.params.pagination.bulletClass))&&i[0].click()}function g(){if(D.params.loop||D.params.rewind||!D.navigation)return;const{$nextEl:t,$prevEl:e}=D.navigation;e&&e.length>0&&(D.isBeginning?(c(e),o(e)):(m(e),i(e))),t&&t.length>0&&(D.isEnd?(c(t),o(t)):(m(t),i(t)))}function f(){return D.pagination&&D.pagination.bullets&&D.pagination.bullets.length}function x(){return f()&&D.params.pagination.clickable}function y(){const t=D.params.a11y;f()&&D.pagination.bullets.each(e=>{const s=h(e);D.params.pagination.clickable&&(i(s),D.params.pagination.renderBullet||(a(s,"button"),l(s,t.paginationBulletMessage.replace(/\{\{index\}\}/,s.index()+1)))),s.is(`.${D.params.pagination.bulletActiveClass}`)?s.attr("aria-current","true"):s.removeAttr("aria-current")})}function b(){const t=D.params.a11y;D.$el.append(E);const e=D.$el;t.containerRoleDescriptionMessage&&n(e,t.containerRoleDescriptionMessage),t.containerMessage&&l(e,t.containerMessage);const i=D.$wrapperEl,o=t.id||i.attr("id")||`ax-wrapper-${s(16)}`,r=D.params.autoplay&&D.params.autoplay.enabled?"off":"polite";d(i,o),p(i,r),t.itemRoleDescriptionMessage&&n(h(D.slides),t.itemRoleDescriptionMessage),a(h(D.slides),t.slideRole);const c=D.params.loop?D.slides.filter(t=>!t.classList.contains(D.params.slideDuplicateClass)).length:D.slides.length;let m,g;D.slides.each((e,s)=>{const i=h(e),o=D.params.loop?parseInt(i.attr("data-swiper-slide-index"),10):s,a=t.slideLabelMessage.replace(/\{\{index\}\}/,o+1).replace(/\{\{slidesLength\}\}/,c);l(i,a)}),D.navigation&&D.navigation.$nextEl&&(m=D.navigation.$nextEl),D.navigation&&D.navigation.$prevEl&&(g=D.navigation.$prevEl),m&&m.length&&S(m,o,t.nextSlideMessage),g&&g.length&&S(g,o,t.prevSlideMessage),x()&&D.pagination.$el.on("keydown",de(D.params.pagination.bulletClass),u),D.$el.on("focus",A,!0)}function v(){let t,e;E&&E.length>0&&E.remove(),D.navigation&&D.navigation.$nextEl&&(t=D.navigation.$nextEl),D.navigation&&D.navigation.$prevEl&&(e=D.navigation.$prevEl),t&&t.off("keydown",u),e&&e.off("keydown",u),x()&&D.pagination.$el.off("keydown",de(D.params.pagination.bulletClass),u),D.$el.off("focus",A,!0)}let{swiper:D,extendParams:w,on:T}=t;w({a11y:{enabled:!0,notificationClass:"ax-notification",prevSlideMessage:"上一个",nextSlideMessage:"下一个",firstSlideMessage:"这是第一个",lastSlideMessage:"这是最后一个",paginationBulletMessage:"跳转到第{{index}}页",slideLabelMessage:"第{{index}}/{{slidesLength}}页",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});let E=null;const S=(t,e,s)=>{i(t),"BUTTON"!==t[0].tagName&&(a(t,"button"),t.on("keydown",u)),l(t,s),r(t,e)},A=t=>{const e=t.target.closest(`.${D.params.slideClass}`);if(!e||!D.slides.includes(e))return;const s=D.slides.indexOf(e)===D.activeIndex,i=D.params.watchSlidesProgress&&D.visibleSlides&&D.visibleSlides.includes(e);s||i||D.slideTo(D.slides.indexOf(e),0)};T("beforeInit",()=>{E=h(`<span class="${D.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),T("afterInit",()=>{D.params.a11y.enabled&&b()}),T("fromEdge toEdge afterInit lock unlock",()=>{D.params.a11y.enabled&&g()}),T("paginationUpdate",()=>{D.params.a11y.enabled&&y()}),T("destroy",()=>{D.params.a11y.enabled&&v()})}function ye(t){let{swiper:e,extendParams:s,on:o}=t;s({history:{enabled:!1,root:"",replaceState:!1,key:"slides"}});let a=!1,n={};const r=t=>t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),l=t=>{const e=i();let s;s=t?new URL(t):e.location;const o=s.pathname.slice(1).split("/").filter(t=>""!==t),a=o.length,n=o[a-2],r=o[a-1];return{key:n,value:r}},h=(t,s)=>{const o=i();if(!a||!e.params.history.enabled)return;let n;n=e.params.url?new URL(e.params.url):o.location;const l=e.slides.eq(s);let h=r(l.attr("data-history"));if(e.params.history.root.length>0){let s=e.params.history.root;"/"===s[s.length-1]&&(s=s.slice(0,s.length-1)),h=`${s}/${t}/${h}`}else n.pathname.includes(t)||(h=`${t}/${h}`);const d=o.history.state;d&&d.value===h||(e.params.history.replaceState?o.history.replaceState({value:h},null,h):o.history.pushState({value:h},null,h))},d=(t,s,i)=>{if(s)for(let o=0,a=e.slides.length;o<a;o+=1){const a=e.slides.eq(o),n=r(a.attr("data-history"));if(n===s&&!a.hasClass(e.params.slideDuplicateClass)){const s=a.index();e.slideTo(s,t,i)}}else e.slideTo(0,t,i)},p=()=>{n=l(e.params.url),d(e.params.speed,e.paths.value,!1)},c=()=>{const t=i();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);a=!0,n=l(e.params.url),(n.key||n.value)&&(d(0,n.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",p))}},m=()=>{const t=i();e.params.history.replaceState||t.removeEventListener("popstate",p)};o("init",()=>{e.params.history.enabled&&c()}),o("destroy",()=>{e.params.history.enabled&&m()}),o("transitionEnd _freeModeNoMomentumRelease",()=>{a&&h(e.params.history.key,e.activeIndex)}),o("slideChange",()=>{a&&e.params.cssMode&&h(e.params.history.key,e.activeIndex)})}function be(t){let{swiper:e,extendParams:o,emit:a,on:n}=t,r=!1;const l=s(),d=i();o({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}});const p=()=>{a("hashChange");const t=l.location.hash.replace("#",""),s=e.slides.eq(e.activeIndex).attr("data-hash");if(t!==s){const s=e.$wrapperEl.children(`.${e.params.slideClass}[data-hash="${t}"]`).index();if(void 0===s)return;e.slideTo(s)}},c=()=>{if(r&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&d.history&&d.history.replaceState)d.history.replaceState(null,null,`#${e.slides.eq(e.activeIndex).attr("data-hash")}`||""),a("hashSet");else{const t=e.slides.eq(e.activeIndex),s=t.attr("data-hash")||t.attr("data-history");l.location.hash=s||"",a("hashSet")}},m=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const t=l.location.hash.replace("#","");if(t){const s=0;for(let i=0,o=e.slides.length;i<o;i+=1){const o=e.slides.eq(i),a=o.attr("data-hash")||o.attr("data-history");if(a===t&&!o.hasClass(e.params.slideDuplicateClass)){const t=o.index();e.slideTo(t,s,e.params.runCallbacksOnInit,!0)}}}e.params.hashNavigation.watchState&&h(d).on("hashchange",p)},u=()=>{e.params.hashNavigation.watchState&&h(d).off("hashchange",p)};n("init",()=>{e.params.hashNavigation.enabled&&m()}),n("destroy",()=>{e.params.hashNavigation.enabled&&u()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{r&&c()}),n("slideChange",()=>{r&&e.params.cssMode&&c()})}function ve(t){function e(){const t=m.slides.eq(m.activeIndex);let s=m.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(s=t.attr("data-swiper-autoplay")||m.params.autoplay.delay),clearTimeout(c),c=W(()=>{let t;m.params.autoplay.reverseDirection?m.params.loop?(m.loopFix(),t=m.slidePrev(m.params.speed,!0,!0),f("autoplay")):m.isBeginning?m.params.autoplay.stopOnLastSlide?o():(t=m.slideTo(m.slides.length-1,m.params.speed,!0,!0),f("autoplay")):(t=m.slidePrev(m.params.speed,!0,!0),f("autoplay")):m.params.loop?(m.loopFix(),t=m.slideNext(m.params.speed,!0,!0),f("autoplay")):m.isEnd?m.params.autoplay.stopOnLastSlide?o():(t=m.slideTo(0,m.params.speed,!0,!0),f("autoplay")):(t=m.slideNext(m.params.speed,!0,!0),f("autoplay")),m.params.cssMode&&m.autoplay.running?e():!1===t&&e()},s)}function i(){return void 0===c&&(!m.autoplay.running&&(m.autoplay.running=!0,f("autoplayStart"),e(),!0))}function o(){return!!m.autoplay.running&&(void 0!==c&&(c&&(clearTimeout(c),c=void 0),m.autoplay.running=!1,f("autoplayStop"),!0))}function a(t){m.autoplay.running&&(m.autoplay.paused||(c&&clearTimeout(c),m.autoplay.paused=!0,0!==t&&m.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach(t=>{m.$wrapperEl[0].addEventListener(t,r)}):(m.autoplay.paused=!1,e())))}function n(){const t=s();"hidden"===t.visibilityState&&m.autoplay.running&&a(),"visible"===t.visibilityState&&m.autoplay.paused&&(e(),m.autoplay.paused=!1)}function r(t){m&&!m.destroyed&&m.$wrapperEl&&t.target===m.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(t=>{m.$wrapperEl[0].removeEventListener(t,r)}),m.autoplay.paused=!1,m.autoplay.running?e():o())}function l(){m.params.autoplay.disableOnInteraction?o():(f("autoplayPause"),a()),["transitionend","webkitTransitionEnd"].forEach(t=>{m.$wrapperEl[0].removeEventListener(t,r)})}function h(){m.params.autoplay.disableOnInteraction||(m.autoplay.paused=!1,f("autoplayResume"),e())}function d(){m.params.autoplay.pauseOnMouseEnter&&(m.$el.on("mouseenter",l),m.$el.on("mouseleave",h))}function p(){m.$el.off("mouseenter",l),m.$el.off("mouseleave",h)}let c,{swiper:m,extendParams:u,on:g,emit:f}=t;m.autoplay={running:!1,paused:!1},u({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),g("init",()=>{if(m.params.autoplay.enabled){i();const t=s();t.addEventListener("visibilitychange",n),d()}}),g("beforeTransitionStart",(t,e,s)=>{m.autoplay.running&&(s||!m.params.autoplay.disableOnInteraction?m.autoplay.pause(e):o())}),g("sliderFirstMove",()=>{m.autoplay.running&&(m.params.autoplay.disableOnInteraction?o():a())}),g("touchEnd",()=>{m.params.cssMode&&m.autoplay.paused&&!m.params.autoplay.disableOnInteraction&&e()}),g("destroy",()=>{p(),m.autoplay.running&&o();const t=s();t.removeEventListener("visibilitychange",n)}),Object.assign(m.autoplay,{pause:a,run:e,start:i,stop:o})}function De(t){function e(){const t=o.thumbs.swiper;if(!t||t.destroyed)return;const e=t.clickedIndex,s=t.clickedSlide;if(s&&h(s).hasClass(o.params.thumbs.slideThumbActiveClass))return;if(null==e)return;let i;if(i=t.params.loop?parseInt(h(t.clickedSlide).attr("data-swiper-slide-index"),10):e,o.params.loop){let t=o.activeIndex;o.slides.eq(t).hasClass(o.params.slideDuplicateClass)&&(o.loopFix(),o._clientLeft=o.$wrapperEl[0].clientLeft,t=o.activeIndex);const e=o.slides.eq(t).prevAll(`[data-swiper-slide-index="${i}"]`).eq(0).index(),s=o.slides.eq(t).nextAll(`[data-swiper-slide-index="${i}"]`).eq(0).index();i=void 0===e?s:void 0===s?e:s-t<t-e?s:e}o.slideTo(i)}function s(){const{thumbs:t}=o.params;if(r)return!1;r=!0;const s=o.constructor;if(t.swiper instanceof s)o.thumbs.swiper=t.swiper,Object.assign(o.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(o.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(Z(t.swiper)){const e=Object.assign({},t.swiper);Object.assign(e,{watchSlidesProgress:!0,slideToClickedSlide:!1}),o.thumbs.swiper=new s(e),l=!0}return o.thumbs.swiper.$el.addClass(o.params.thumbs.thumbsContainerClass),o.thumbs.swiper.on("tap",e),!0}function i(t){const e=o.thumbs.swiper;if(!e||e.destroyed)return;const s="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():e.params.slidesPerView,i=o.params.thumbs.autoScrollOffset,a=i&&!e.params.loop;if(o.realIndex!==e.realIndex||a){let n,r,l=e.activeIndex;if(e.params.loop){e.slides.eq(l).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,l=e.activeIndex);const t=e.slides.eq(l).prevAll(`[data-swiper-slide-index="${o.realIndex}"]`).eq(0).index(),s=e.slides.eq(l).nextAll(`[data-swiper-slide-index="${o.realIndex}"]`).eq(0).index();n=void 0===t?s:void 0===s?t:s-l==l-t?e.params.slidesPerGroup>1?s:l:s-l<l-t?s:t,r=o.activeIndex>o.previousIndex?"next":"prev"}else n=o.realIndex,r=n>o.previousIndex?"next":"prev";a&&(n+="next"===r?i:-1*i),e.visibleSlidesIndexes&&e.visibleSlidesIndexes.indexOf(n)<0&&(e.params.centeredSlides?n=n>l?n-Math.floor(s/2)+1:n+Math.floor(s/2)-1:n>l&&e.params.slidesPerGroup,e.slideTo(n,t?0:void 0))}let n=1;const r=o.params.thumbs.slideThumbActiveClass;if(o.params.slidesPerView>1&&!o.params.centeredSlides&&(n=o.params.slidesPerView),o.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),e.slides.removeClass(r),e.params.loop||e.params.virtual&&e.params.virtual.enabled)for(let t=0;t<n;t+=1)e.$wrapperEl.children(`[data-swiper-slide-index="${o.realIndex+t}"]`).addClass(r);else for(let t=0;t<n;t+=1)e.slides.eq(o.realIndex+t).addClass(r)}let{swiper:o,extendParams:a,on:n}=t;a({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"ax-slide-thumb-active",thumbsContainerClass:"ax-thumbs"}});let r=!1,l=!1;o.thumbs={swiper:null},n("beforeInit",()=>{const{thumbs:t}=o.params;t&&t.swiper&&(s(),i(!0))}),n("slideChange update resize observerUpdate",()=>{i()}),n("setTransition",(t,e)=>{const s=o.thumbs.swiper;s&&!s.destroyed&&s.setTransition(e)}),n("beforeDestroy",()=>{const t=o.thumbs.swiper;t&&!t.destroyed&&l&&t.destroy()}),Object.assign(o.thumbs,{init:s,update:i})}function we(t){function e(){const t=o.getTranslate();o.setTranslate(t),o.setTransition(0),o.touchEventsData.velocities.length=0,o.freeMode.onTouchEnd({currentPos:o.rtl?o.translate:-o.translate})}function s(){const{touchEventsData:t,touches:e}=o;0===t.velocities.length&&t.velocities.push({position:e[o.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:e[o.isHorizontal()?"currentX":"currentY"],time:X()})}function i(t){let{currentPos:e}=t
;const{params:s,$wrapperEl:i,rtlTranslate:a,snapGrid:l,touchEventsData:h}=o,d=X(),p=d-h.touchStartTime;if(e<-o.minTranslate())o.slideTo(o.activeIndex);else if(e>-o.maxTranslate())o.slides.length<l.length?o.slideTo(l.length-1):o.slideTo(o.slides.length-1);else{if(s.freeMode.momentum){if(h.velocities.length>1){const t=h.velocities.pop(),e=h.velocities.pop(),i=t.position-e.position,a=t.time-e.time;o.velocity=i/a,o.velocity/=2,Math.abs(o.velocity)<s.freeMode.minimumVelocity&&(o.velocity=0),(a>150||X()-t.time>300)&&(o.velocity=0)}else o.velocity=0;o.velocity*=s.freeMode.momentumVelocityRatio,h.velocities.length=0;let t=1e3*s.freeMode.momentumRatio;const e=o.velocity*t;let d=o.translate+e;a&&(d=-d);let p,c=!1;const m=20*Math.abs(o.velocity)*s.freeMode.momentumBounceRatio;let u;if(d<o.maxTranslate())s.freeMode.momentumBounce?(d+o.maxTranslate()<-m&&(d=o.maxTranslate()-m),p=o.maxTranslate(),c=!0,h.allowMomentumBounce=!0):d=o.maxTranslate(),s.loop&&s.centeredSlides&&(u=!0);else if(d>o.minTranslate())s.freeMode.momentumBounce?(d-o.minTranslate()>m&&(d=o.minTranslate()+m),p=o.minTranslate(),c=!0,h.allowMomentumBounce=!0):d=o.minTranslate(),s.loop&&s.centeredSlides&&(u=!0);else if(s.freeMode.sticky){let t;for(let e=0;e<l.length;e+=1)if(l[e]>-d){t=e;break}d=Math.abs(l[t]-d)<Math.abs(l[t-1]-d)||"next"===o.swipeDirection?l[t]:l[t-1],d=-d}if(u&&r("transitionEnd",()=>{o.loopFix()}),0!==o.velocity){if(t=a?Math.abs((-d-o.translate)/o.velocity):Math.abs((d-o.translate)/o.velocity),s.freeMode.sticky){const e=Math.abs((a?-d:d)-o.translate),i=o.slidesSizesGrid[o.activeIndex];t=e<i?s.speed:e<2*i?1.5*s.speed:2.5*s.speed}}else if(s.freeMode.sticky)return void o.slideToClosest();s.freeMode.momentumBounce&&c?(o.updateProgress(p),o.setTransition(t),o.setTranslate(d),o.transitionStart(!0,o.swipeDirection),o.animating=!0,i.transitionEnd(()=>{o&&!o.destroyed&&h.allowMomentumBounce&&(n("momentumBounce"),o.setTransition(s.speed),setTimeout(()=>{o.setTranslate(p),i.transitionEnd(()=>{o&&!o.destroyed&&o.transitionEnd()})},0))})):o.velocity?(n("_freeModeNoMomentumRelease"),o.updateProgress(d),o.setTransition(t),o.setTranslate(d),o.transitionStart(!0,o.swipeDirection),o.animating||(o.animating=!0,i.transitionEnd(()=>{o&&!o.destroyed&&o.transitionEnd()}))):o.updateProgress(d),o.updateActiveIndex(),o.updateSlidesClasses()}else{if(s.freeMode.sticky)return void o.slideToClosest();s.freeMode&&n("_freeModeNoMomentumRelease")}(!s.freeMode.momentum||p>=s.longSwipesMs)&&(o.updateProgress(),o.updateActiveIndex(),o.updateSlidesClasses())}}let{swiper:o,extendParams:a,emit:n,once:r}=t;a({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(o,{freeMode:{onTouchStart:e,onTouchMove:s,onTouchEnd:i}})}function Te(t){let e,s,i,{swiper:o,extendParams:a}=t;a({grid:{rows:1,fill:"column"}});const n=t=>{const{slidesPerView:a}=o.params,{rows:n,fill:r}=o.params.grid;s=e/n,i=Math.floor(t/n),e=Math.floor(t/n)===t/n?t:Math.ceil(t/n)*n,"auto"!==a&&"row"===r&&(e=Math.max(e,a*n))},r=(t,a,n,r)=>{const{slidesPerGroup:l,spaceBetween:h}=o.params,{rows:d,fill:p}=o.params.grid;let c,m,u;if("row"===p&&l>1){const s=Math.floor(t/(l*d)),i=t-d*l*s,o=0===s?l:Math.min(Math.ceil((n-s*d*l)/d),l);u=Math.floor(i/o),m=i-u*o+s*l,c=m+u*e/d,a.css({"-webkit-order":c,order:c})}else"column"===p?(m=Math.floor(t/d),u=t-m*d,(m>i||m===i&&u===d-1)&&(u+=1,u>=d&&(u=0,m+=1))):(u=Math.floor(t/s),m=t-u*s);a.css(r("margin-top"),0!==u?h&&`${h}px`:"")},l=(t,s,i)=>{const{spaceBetween:a,centeredSlides:n,roundLengths:r}=o.params,{rows:l}=o.params.grid;if(o.virtualSize=(t+a)*e,o.virtualSize=Math.ceil(o.virtualSize/l)-a,o.$wrapperEl.css({[i("width")]:`${o.virtualSize+a}px`}),n){s.splice(0,s.length);const t=[];for(let e=0;e<s.length;e+=1){let i=s[e];r&&(i=Math.floor(i)),s[e]<o.virtualSize+s[0]&&t.push(i)}s.push(...t)}};o.grid={initSlides:n,updateSlide:r,updateWrapperSize:l}}function Ee(t){const e=this,{$wrapperEl:s,params:i}=e;if(i.loop&&e.loopDestroy(),"object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&s.append(t[e]);else s.append(t);i.loop&&e.loopCreate(),i.observer||e.update()}function Se(t){const e=this,{params:s,$wrapperEl:i,activeIndex:o}=e;s.loop&&e.loopDestroy();let a=o+1;if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&i.prepend(t[e]);a=o+t.length}else i.prepend(t);s.loop&&e.loopCreate(),s.observer||e.update(),e.slideTo(a,0,!1)}function Ae(t,e){const s=this,{$wrapperEl:i,params:o,activeIndex:a}=s;let n=a;o.loop&&(n-=s.loopedSlides,s.loopDestroy(),s.slides=i.children(`.${o.slideClass}`));const r=s.slides.length;if(t<=0)return void s.prependSlide(e);if(t>=r)return void s.appendSlide(e);let l=n>t?n+1:n;const h=[];for(let e=r-1;e>=t;e-=1){const t=s.slides.eq(e);t.remove(),h.unshift(t)}if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&i.append(e[t]);l=n>t?n+e.length:n}else i.append(e);for(let t=0;t<h.length;t+=1)i.append(h[t]);o.loop&&s.loopCreate(),o.observer||s.update(),o.loop?s.slideTo(l+s.loopedSlides,0,!1):s.slideTo(l,0,!1)}function Ce(t){const e=this,{params:s,$wrapperEl:i,activeIndex:o}=e;let a=o;s.loop&&(a-=e.loopedSlides,e.loopDestroy(),e.slides=i.children(`.${s.slideClass}`));let n,r=a;if("object"==typeof t&&"length"in t){for(let s=0;s<t.length;s+=1)n=t[s],e.slides[n]&&e.slides.eq(n).remove(),n<r&&(r-=1);r=Math.max(r,0)}else n=t,e.slides[n]&&e.slides.eq(n).remove(),n<r&&(r-=1),r=Math.max(r,0);s.loop&&e.loopCreate(),s.observer||e.update(),s.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function Me(){const t=this,e=[];for(let s=0;s<t.slides.length;s+=1)e.push(s);t.removeSlide(e)}function ke(t){let{swiper:e}=t;Object.assign(e,{appendSlide:Ee.bind(e),prependSlide:Se.bind(e),addSlide:Ae.bind(e),removeSlide:Ce.bind(e),removeAllSlides:Me.bind(e)})}function Ie(t){const{effect:e,swiper:s,on:i,setTranslate:o,setTransition:a,overwriteParams:n,perspective:r,recreateShadows:l,getEffectParams:h}=t;let d;i("beforeInit",()=>{if(s.params.effect!==e)return;s.classNames.push(`${s.params.containerModifierClass}${e}`),r&&r()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const t=n?n():{};Object.assign(s.params,t),Object.assign(s.originalParams,t)}),i("setTranslate",()=>{s.params.effect===e&&o()}),i("setTransition",(t,i)=>{s.params.effect===e&&a(i)}),i("transitionEnd",()=>{if(s.params.effect===e&&l){if(!h||!h().slideShadows)return;s.slides.each(t=>{const e=s.$(t);e.find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),l()}}),i("virtualUpdate",()=>{s.params.effect===e&&(s.slides.length||(d=!0),requestAnimationFrame(()=>{d&&s.slides&&s.slides.length&&(o(),d=!1)}))})}function Le(t,e){return t.transformEl?e.find(t.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):e}function $e(t){let{swiper:e,duration:s,transformEl:i,allSlides:o}=t;const{slides:a,activeIndex:n,$wrapperEl:r}=e;if(e.params.virtualTranslate&&0!==s){let t,s=!1;t=o?i?a.find(i):a:i?a.eq(n).find(i):a.eq(n),t.transitionEnd(()=>{if(s)return;if(!e||e.destroyed)return;s=!0,e.animating=!1;const t=["webkitTransitionEnd","transitionend"];for(let e=0;e<t.length;e+=1)r.trigger(t[e])})}}function Pe(t){let{swiper:e,extendParams:s,on:i}=t;s({fadeEffect:{crossFade:!1,transformEl:null}});const o=()=>{const{slides:t}=e,s=e.params.fadeEffect;for(let i=0;i<t.length;i+=1){const t=e.slides.eq(i),o=t[0].swiperSlideOffset;let a=-o;e.params.virtualTranslate||(a-=e.translate);let n=0;e.isHorizontal()||(n=a,a=0);const r=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0),l=Le(s,t);l.css({opacity:r}).transform(`translate3d(${a}px, ${n}px, 0px)`)}},a=t=>{const{transformEl:s}=e.params.fadeEffect,i=s?e.slides.find(s):e.slides;i.transition(t),$e({swiper:e,duration:t,transformEl:s,allSlides:!0})};Ie({effect:"fade",swiper:e,on:i,setTranslate:o,setTransition:a,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function _e(t){let{swiper:e,extendParams:s,on:i}=t;s({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const o=(t,e,s)=>{let i=s?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),o=s?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===i.length&&(i=h(`<div class="swiper-slide-shadow-${s?"left":"top"}"></div>`),t.append(i)),0===o.length&&(o=h(`<div class="swiper-slide-shadow-${s?"right":"bottom"}"></div>`),t.append(o)),i.length&&(i[0].style.opacity=Math.max(-e,0)),o.length&&(o[0].style.opacity=Math.max(e,0))},a=()=>{const t=e.isHorizontal();e.slides.each(e=>{const s=Math.max(Math.min(e.progress,1),-1);o(h(e),s,t)})},n=()=>{const{$el:t,$wrapperEl:s,slides:i,width:a,height:n,rtlTranslate:r,size:l,browser:d}=e,p=e.params.cubeEffect,c=e.isHorizontal(),m=e.virtual&&e.params.virtual.enabled;let u,g=0;p.shadow&&(c?(u=s.find(".swiper-cube-shadow"),0===u.length&&(u=h('<div class="swiper-cube-shadow"></div>'),s.append(u)),u.css({height:`${a}px`})):(u=t.find(".swiper-cube-shadow"),0===u.length&&(u=h('<div class="swiper-cube-shadow"></div>'),t.append(u))));for(let t=0;t<i.length;t+=1){const e=i.eq(t);let s=t;m&&(s=parseInt(e.attr("data-swiper-slide-index"),10));let a=90*s,n=Math.floor(a/360);r&&(a=-a,n=Math.floor(-a/360));const h=Math.max(Math.min(e[0].progress,1),-1);let d=0,u=0,f=0;s%4==0?(d=4*-n*l,f=0):(s-1)%4==0?(d=0,f=4*-n*l):(s-2)%4==0?(d=l+4*n*l,f=l):(s-3)%4==0&&(d=-l,f=3*l+4*l*n),r&&(d=-d),c||(u=d,d=0);const x=`rotateX(${c?0:-a}deg) rotateY(${c?a:0}deg) translate3d(${d}px, ${u}px, ${f}px)`;h<=1&&h>-1&&(g=90*s+90*h,r&&(g=90*-s-90*h)),e.transform(x),p.slideShadows&&o(e,h,c)}if(s.css({"-webkit-transform-origin":`50% 50% -${l/2}px`,"transform-origin":`50% 50% -${l/2}px`}),p.shadow)if(c)u.transform(`translate3d(0px, ${a/2+p.shadowOffset}px, ${-a/2}px) rotateX(90deg) rotateZ(0deg) scale(${p.shadowScale})`);else{const t=Math.abs(g)-90*Math.floor(Math.abs(g)/90),e=1.5-(Math.sin(2*t*Math.PI/360)/2+Math.cos(2*t*Math.PI/360)/2),s=p.shadowScale,i=p.shadowScale/e,o=p.shadowOffset;u.transform(`scale3d(${s}, 1, ${i}) translate3d(0px, ${n/2+o}px, ${-n/2/i}px) rotateX(-90deg)`)}const f=d.isSafari||d.isWebView?-l/2:0;s.transform(`translate3d(0px,0,${f}px) rotateX(${e.isHorizontal()?0:g}deg) rotateY(${e.isHorizontal()?-g:0}deg)`),s[0].style.setProperty("--swiper-cube-translate-z",`${f}px`)},r=t=>{const{$el:s,slides:i}=e;i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.cubeEffect.shadow&&!e.isHorizontal()&&s.find(".swiper-cube-shadow").transition(t)};Ie({effect:"cube",swiper:e,on:i,setTranslate:n,setTransition:r,recreateShadows:a,getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Oe(t,e,s){const i=`swiper-slide-shadow${s?`-${s}`:""}`,o=t.transformEl?e.find(t.transformEl):e;let a=o.children(`.${i}`);return a.length||(a=h(`<div class="swiper-slide-shadow${s?`-${s}`:""}"></div>`),o.append(a)),a}function Ne(t){let{swiper:e,extendParams:s,on:i}=t;s({flipEffect:{slideShadows:!0,limitRotation:!0,transformEl:null}});const o=(t,s,i)=>{let o=e.isHorizontal()?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),a=e.isHorizontal()?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===o.length&&(o=Oe(i,t,e.isHorizontal()?"left":"top")),0===a.length&&(a=Oe(i,t,e.isHorizontal()?"right":"bottom")),o.length&&(o[0].style.opacity=Math.max(-s,0)),a.length&&(a[0].style.opacity=Math.max(s,0))},a=()=>{const t=e.params.flipEffect;e.slides.each(s=>{const i=h(s);let a=i[0].progress;e.params.flipEffect.limitRotation&&(a=Math.max(Math.min(s.progress,1),-1)),o(i,a,t)})},n=()=>{const{slides:t,rtlTranslate:s}=e,i=e.params.flipEffect;for(let a=0;a<t.length;a+=1){const n=t.eq(a);let r=n[0].progress;e.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));const l=n[0].swiperSlideOffset,h=-180*r;let d=h,p=0,c=e.params.cssMode?-l-e.translate:-l,m=0;e.isHorizontal()?s&&(d=-d):(m=c,c=0,p=-d,d=0),n[0].style.zIndex=-Math.abs(Math.round(r))+t.length,i.slideShadows&&o(n,r,i);const u=`translate3d(${c}px, ${m}px, 0px) rotateX(${p}deg) rotateY(${d}deg)`,g=Le(i,n);g.transform(u)}},r=t=>{const{transformEl:s}=e.params.flipEffect,i=s?e.slides.find(s):e.slides;i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),$e({swiper:e,duration:t,transformEl:s})};Ie({effect:"flip",swiper:e,on:i,setTranslate:n,setTransition:r,recreateShadows:a,getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function qe(t){let{swiper:e,extendParams:s,on:i}=t;s({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0,transformEl:null}});const o=()=>{const{width:t,height:s,slides:i,slidesSizesGrid:o}=e,a=e.params.coverflowEffect,n=e.isHorizontal(),r=e.translate,l=n?t/2-r:s/2-r,h=n?a.rotate:-a.rotate,d=a.depth;for(let t=0,e=i.length;t<e;t+=1){const e=i.eq(t),s=o[t],r=e[0].swiperSlideOffset,p=(l-r-s/2)/s,c="function"==typeof a.modifier?a.modifier(p):p*a.modifier;let m=n?h*c:0,u=n?0:h*c,g=-d*Math.abs(c),f=a.stretch;"string"==typeof f&&-1!==f.indexOf("%")&&(f=parseFloat(a.stretch)/100*s);let x=n?0:f*c,y=n?f*c:0,b=1-(1-a.scale)*Math.abs(c);Math.abs(y)<.001&&(y=0),Math.abs(x)<.001&&(x=0),Math.abs(g)<.001&&(g=0),Math.abs(m)<.001&&(m=0),Math.abs(u)<.001&&(u=0),Math.abs(b)<.001&&(b=0);const v=`translate3d(${y}px,${x}px,${g}px)  rotateX(${u}deg) rotateY(${m}deg) scale(${b})`,D=Le(a,e);if(D.transform(v),e[0].style.zIndex=1-Math.abs(Math.round(c)),a.slideShadows){let t=n?e.find(".swiper-slide-shadow-left"):e.find(".swiper-slide-shadow-top"),s=n?e.find(".swiper-slide-shadow-right"):e.find(".swiper-slide-shadow-bottom");0===t.length&&(t=Oe(a,e,n?"left":"top")),0===s.length&&(s=Oe(a,e,n?"right":"bottom")),t.length&&(t[0].style.opacity=c>0?c:0),s.length&&(s[0].style.opacity=-c>0?-c:0)}}},a=t=>{const{transformEl:s}=e.params.coverflowEffect,i=s?e.slides.find(s):e.slides;i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)};Ie({effect:"coverflow",swiper:e,on:i,setTranslate:o,setTransition:a,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function He(t){let{swiper:e,extendParams:s,on:i}=t;s({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const o=t=>"string"==typeof t?t:`${t}px`,a=()=>{const{slides:t,$wrapperEl:s,slidesSizesGrid:i}=e,a=e.params.creativeEffect,{progressMultiplier:n}=a,r=e.params.centeredSlides;if(r){const t=i[0]/2-e.params.slidesOffsetBefore||0;s.transform(`translateX(calc(50% - ${t}px))`)}for(let s=0;s<t.length;s+=1){const i=t.eq(s),l=i[0].progress,h=Math.min(Math.max(i[0].progress,-a.limitProgress),a.limitProgress);let d=h;r||(d=Math.min(Math.max(i[0].originalProgress,-a.limitProgress),a.limitProgress));const p=i[0].swiperSlideOffset,c=[e.params.cssMode?-p-e.translate:-p,0,0],m=[0,0,0];let u=!1;e.isHorizontal()||(c[1]=c[0],c[0]=0);let g={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};h<0?(g=a.next,u=!0):h>0&&(g=a.prev,u=!0),c.forEach((t,e)=>{c[e]=`calc(${t}px + (${o(g.translate[e])} * ${Math.abs(h*n)}))`}),m.forEach((t,e)=>{m[e]=g.rotate[e]*Math.abs(h*n)}),i[0].style.zIndex=-Math.abs(Math.round(l))+t.length;const f=c.join(", "),x=`rotateX(${m[0]}deg) rotateY(${m[1]}deg) rotateZ(${m[2]}deg)`,y=d<0?`scale(${1+(1-g.scale)*d*n})`:`scale(${1-(1-g.scale)*d*n})`,b=d<0?1+(1-g.opacity)*d*n:1-(1-g.opacity)*d*n,v=`translate3d(${f}) ${x} ${y}`;if(u&&g.shadow||!u){let t=i.children(".swiper-slide-shadow");if(0===t.length&&g.shadow&&(t=Oe(a,i)),t.length){const e=a.shadowPerProgress?h*(1/a.limitProgress):h;t[0].style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const D=Le(a,i);D.transform(v).css({opacity:b}),g.origin&&D.css("transform-origin",g.origin)}},n=t=>{const{transformEl:s}=e.params.creativeEffect,i=s?e.slides.find(s):e.slides;i.transition(t).find(".swiper-slide-shadow").transition(t),$e({swiper:e,duration:t,transformEl:s,allSlides:!0})};Ie({effect:"creative",swiper:e,on:i,setTranslate:a,setTransition:n,perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function Be(t){let{swiper:e,extendParams:s,on:i}=t;s({cardsEffect:{slideShadows:!0,transformEl:null,rotate:!0}});const o=()=>{const{slides:t,activeIndex:s}=e,i=e.params.cardsEffect,{startTranslate:o,isTouched:a}=e.touchEventsData,n=e.translate;for(let r=0;r<t.length;r+=1){const l=t.eq(r),h=l[0].progress,d=Math.min(Math.max(h,-4),4);let p=l[0].swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&e.$wrapperEl.transform(`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(p-=t[0].swiperSlideOffset);let c=e.params.cssMode?-p-e.translate:-p,m=0;const u=-100*Math.abs(d);let g=1,f=-2*d,x=8-.75*Math.abs(d);const y=e.virtual&&e.params.virtual.enabled?e.virtual.from+r:r,b=(y===s||y===s-1)&&d>0&&d<1&&(a||e.params.cssMode)&&n<o,v=(y===s||y===s+1)&&d<0&&d>-1&&(a||e.params.cssMode)&&n>o;if(b||v){const t=(1-Math.abs((Math.abs(d)-.5)/.5))**.5;f+=-28*d*t,g+=-.5*t,x+=96*t,m=`${-25*t*Math.abs(d)}%`}if(c=d<0?`calc(${c}px + (${x*Math.abs(d)}%))`:d>0?`calc(${c}px + (-${x*Math.abs(d)}%))`:`${c}px`,!e.isHorizontal()){const t=m;m=c,c=t}const D=d<0?`${1+(1-g)*d}`:`${1-(1-g)*d}`,w=`\n          translate3d(${c}, ${m}, ${u}px)\n          rotateZ(${i.rotate?f:0}deg)\n          scale(${D})\n        `;if(i.slideShadows){let t=l.find(".swiper-slide-shadow");0===t.length&&(t=Oe(i,l)),t.length&&(t[0].style.opacity=Math.min(Math.max((Math.abs(d)-.5)/.5,0),1))}l[0].style.zIndex=-Math.abs(Math.round(h))+t.length;const T=Le(i,l);T.transform(w)}},a=t=>{const{transformEl:s}=e.params.cardsEffect,i=s?e.slides.find(s):e.slides;i.transition(t).find(".swiper-slide-shadow").transition(t),$e({swiper:e,duration:t,transformEl:s})};Ie({effect:"cards",swiper:e,on:i,setTranslate:o,setTransition:a,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const ze={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}},Re={document:ze,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:t=>"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0),cancelAnimationFrame(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};class Fe extends Array{constructor(t){"number"==typeof t?super(t):(super(...t||[]),o(this))}}h.fn=Fe.prototype;const je={addClass:d,removeClass:p,hasClass:m,toggleClass:c,attr:u,removeAttr:g,transform:f,transition:x,on:y,off:b,trigger:v,transitionEnd:D,outerWidth:w,outerHeight:T,styles:S,offset:E,css:A,each:C,html:k,text:I,is:L,index:$,eq:P,append:_,prepend:O,next:N,nextAll:q,prev:H,prevAll:B,parent:z,parents:R,closest:F,find:j,children:Y,filter:M,remove:V};let Ye,Ve,Ue;Object.keys(je).forEach(t=>{Object.defineProperty(h.fn,t,{value:je[t],writable:!0})});var We={on(t,e,s){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;const o=s?"unshift":"push";return t.split(" ").forEach(t=>{i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][o](e)}),i},once(t,e,s){function i(){o.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];e.apply(o,a)}const o=this;return!o.eventsListeners||o.destroyed?o:"function"!=typeof e?o:(i.__emitterProxy=e,o.on(t,i,s))},onAny(t,e){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;const i=e?"unshift":"push";return s.eventsAnyListeners.indexOf(t)<0&&s.eventsAnyListeners[i](t),s},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsAnyListeners)return e;const s=e.eventsAnyListeners.indexOf(t);return s>=0&&e.eventsAnyListeners.splice(s,1),e},off(t,e){const s=this;return!s.eventsListeners||s.destroyed?s:s.eventsListeners?(t.split(" ").forEach(t=>{void 0===e?s.eventsListeners[t]=[]:s.eventsListeners[t]&&s.eventsListeners[t].forEach((i,o)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&s.eventsListeners[t].splice(o,1)})}),s):s},emit(){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let e,s,i;for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];"string"==typeof a[0]||Array.isArray(a[0])?(e=a[0],s=a.slice(1,a.length),i=t):(e=a[0].events,s=a[0].data,i=a[0].context||t),s.unshift(i);const r=Array.isArray(e)?e:e.split(" ");return r.forEach(e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(t=>{t.apply(i,[e,...s])}),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach(t=>{t.apply(i,s)})}),t}},Xe={updateSize:dt,updateSlides:pt,updateAutoHeight:ct,updateSlidesOffset:mt,updateSlidesProgress:ut,updateProgress:gt,updateSlidesClasses:ft,updateActiveIndex:xt,updateClickedSlide:yt},Ge={getTranslate:bt,setTranslate:vt,minTranslate:Dt,maxTranslate:wt,translateTo:Tt},Je={setTransition:Et,transitionStart:At,transitionEnd:Ct},Ze={slideTo:Mt,slideToLoop:kt,slideNext:It,slidePrev:Lt,slideReset:$t,slideToClosest:Pt,slideToClickedSlide:_t},Ke={loopCreate:Ot,loopFix:Nt,loopDestroy:qt},Qe={setGrabCursor:Ht,unsetGrabCursor:Bt};let ts=!1;const es=(t,e)=>{const i=s(),{params:o,touchEvents:a,el:n,wrapperEl:r,device:l,support:h}=t,d=!!o.nested,p="on"===e?"addEventListener":"removeEventListener",c=e;if(h.touch){const e=!("touchstart"!==a.start||!h.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};n[p](a.start,t.onTouchStart,e),n[p](a.move,t.onTouchMove,h.passiveListener?{passive:!1,capture:d}:d),n[p](a.end,t.onTouchEnd,e),a.cancel&&n[p](a.cancel,t.onTouchEnd,e)}else n[p](a.start,t.onTouchStart,!1),i[p](a.move,t.onTouchMove,d),i[p](a.end,t.onTouchEnd,!1);(o.preventClicks||o.preventClicksPropagation)&&n[p]("click",t.onClick,!0),o.cssMode&&r[p]("scroll",t.onScroll),o.updateOnWindowResize?t[c](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",Yt,!0):t[c]("observerUpdate",Yt,!0)};var ss={attachEvents:Xt,detachEvents:Gt};const is=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;var os={setBreakpoint:Jt,getBreakpoint:Zt},as={addClasses:Qt,removeClasses:te},ns={loadImage:ee,preloadImages:se},rs={checkOverflow:ie},ls={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"ax-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"ax-",slideClass:"ax-slide",slideBlankClass:"ax-slide-invisible-blank",slideActiveClass:"ax-slide-active",slideDuplicateActiveClass:"ax-slide-duplicate-active",slideVisibleClass:"ax-slide-visible",slideDuplicateClass:"ax-slide-duplicate",slideNextClass:"ax-slide-next",slideDuplicateNextClass:"ax-slide-duplicate-next",slidePrevClass:"ax-slide-prev",slideDuplicatePrevClass:"ax-slide-duplicate-prev",wrapperClass:"ax-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};const hs={eventsEmitter:We,update:Xe,translate:Ge,transition:Je,slide:Ze,loop:Ke,grabCursor:Qe,events:ss,breakpoints:os,checkOverflow:rs,classes:as,images:ns},ds={};class ps{constructor(){let t,e;for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?e=i[0]:[t,e]=i,e||(e={}),e=Q({},e),t&&!e.el&&(e.el=t),e.el&&h(e.el).length>1){const t=[];return h(e.el).each(s=>{const i=Q({},e,{el:s});t.push(new ps(i))}),t}const a=this;a.__swiper__=!0,a.support=it(),a.device=at({userAgent:e.userAgent}),a.browser=rt(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],e.modules&&Array.isArray(e.modules)&&a.modules.push(...e.modules);const n={};a.modules.forEach(t=>{t({swiper:a,extendParams:oe(e,n),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const r=Q({},ls,n);return a.params=Q({},r,ds,e),"string"==typeof e.el?(".ax-prev"==a.params.navigation.prevEl&&(a.params.navigation.prevEl=document.querySelector(e.el+" .ax-prev")),".ax-next"==a.params.navigation.nextEl&&(a.params.navigation.nextEl=document.querySelector(e.el+" .ax-next"))):(".ax-prev"==a.params.navigation.prevEl&&(a.params.navigation.prevEl=e.el.querySelector(".ax-prev")),".ax-next"==a.params.navigation.nextEl&&(a.params.navigation.nextEl=e.el.querySelector(".ax-next"))),a.originalParams=Q({},a.params),a.passedParams=Q({},e),a.params&&a.params.on&&Object.keys(a.params.on).forEach(t=>{a.on(t,a.params.on[t])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),a.$=h,Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:h(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===a.params.direction,isVertical:()=>"vertical"===a.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEvents:function(){const t=["touchstart","touchmove","touchend","touchcancel"],e=["pointerdown","pointermove","pointerup"];return a.touchEventsTouch={start:t[0],move:t[1],end:t[2],cancel:t[3]},a.touchEventsDesktop={start:e[0],move:e[1],end:e[2]},a.support.touch||!a.params.simulateTouch?a.touchEventsTouch:a.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:X(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const s=this;t=Math.min(Math.max(t,0),1);const i=s.minTranslate(),o=s.maxTranslate(),a=(o-i)*t+i;s.translateTo(a,void 0===e?0:e),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter(e=>0===e.indexOf("ax")||0===e.indexOf(t.params.containerModifierClass));t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter(t=>0===t.indexOf("ax-slide")||0===t.indexOf(e.params.slideClass)).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.each(s=>{const i=t.getSlideClasses(s);e.push({slideEl:s,classNames:i}),t.emit("_slideClass",s,i)}),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){void 0===t&&(t="current"),void 0===e&&(e=!1);const s=this,{params:i,slides:o,slidesGrid:a,slidesSizesGrid:n,size:r,activeIndex:l}=s;let h=1;if(i.centeredSlides){let t,e=o[l].swiperSlideSize;for(let s=l+1;s<o.length;s+=1)o[s]&&!t&&(e+=o[s].swiperSlideSize,h+=1,e>r&&(t=!0));for(let s=l-1;s>=0;s-=1)o[s]&&!t&&(e+=o[s].swiperSlideSize,h+=1,e>r&&(t=!0))}else if("current"===t)for(let t=l+1;t<o.length;t+=1){const s=e?a[t]+n[t]-a[l]<r:a[t]-a[l]<r;s&&(h+=1)}else for(let t=l-1;t>=0;t-=1){const e=a[l]-a[t]<r;e&&(h+=1)}return h}update(){function t(){const t=e.rtlTranslate?-1*e.translate:e.translate,s=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses()}const e=this;if(!e||e.destroyed)return;const{snapGrid:s,params:i}=e;let o;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(t(),e.params.autoHeight&&e.updateAutoHeight()):(o=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),o||t()),i.watchOverflow&&s!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(t,e){void 0===e&&(e=!0);const s=this,i=s.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t?s:(s.$el.removeClass(`${s.params.containerModifierClass}${i}`).addClass(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.each(e=>{"vertical"===t?e.style.width="":e.style.height=""}),s.emit("changeDirection"),e&&s.update(),s)}mount(t){const e=this;if(e.mounted)return!0;const i=h(t||e.params.el);if(t=i[0],!t)return!1;t.swiper=e;const o=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`,a=()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const e=h(t.shadowRoot.querySelector(o()));return e.children=(t=>i.children(t)),e}return i.children(o())};let n=a();if(0===n.length&&e.params.createElements){const t=s(),o=t.createElement("div");n=h(o),o.className=e.params.wrapperClass,i.append(o),i.children(`.${e.params.slideClass}`).each(t=>{n.append(t)})}return Object.assign(e,{$el:i,el:t,$wrapperEl:n,wrapperEl:n[0],mounted:!0,rtl:"rtl"===t.dir.toLowerCase()||"rtl"===i.css("direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===i.css("direction")),wrongRTL:"-webkit-box"===n.css("display")}),!0}init(t){const e=this;if(e.initialized)return e
;const s=e.mount(t);return!1===s?e:(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.attachEvents(),e.initialized=!0,e.emit("init"),e.emit("afterInit"),e)}destroy(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);const s=this,{params:i,$el:o,$wrapperEl:a,slides:n}=s;return void 0===s.params||s.destroyed?null:(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),e&&(s.removeClasses(),o.removeAttr("style"),a.removeAttr("style"),n&&n.length&&n.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(t=>{s.off(t)}),!1!==t&&(s.$el[0].swiper=null,U(s)),s.destroyed=!0,null)}static extendDefaults(t){Q(ds,t)}static get extendedDefaults(){return ds}static get defaults(){return ls}static installModule(t){ps.prototype.__modules__||(ps.prototype.__modules__=[]);const e=ps.prototype.__modules__;"function"==typeof t&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach(t=>ps.installModule(t)),ps):(ps.installModule(t),ps)}}Object.keys(hs).forEach(t=>{Object.keys(hs[t]).forEach(e=>{ps.prototype[e]=hs[t][e]})}),ps.use([lt,ht]);const cs=[ae,ne,re,he,pe,ce,me,ue,ge,fe,xe,ye,be,ve,De,we,Te,ke,Pe,_e,Ne,qe,He,Be];return ps.use(cs),ps});const axExpires=(t="d",e=365)=>{let s;if(axIsDate(e))s=new Date(e).toUTCString();else{let i=new Date;"second"==t||"s"==t?(i.setSeconds(i.getSeconds()+~~e),s=i.toUTCString()):"minute"==t||"m"==t?(i.setMinutes(i.getMinutes()+~~e),s=i.toUTCString()):"hour"==t||"h"==t?(i.setHours(i.getHours()+~~e),s=i.toUTCString()):(i.setDate(i.getDate()+~~e),s=i.toUTCString())}return s},axCookie={set:function(t,e,s={type:"d",expires:365}){if(!t)return console.error("The name of cookie can not be empty!"),!1;let i=Object.assign({},s),o=i.path?";path="+i.path:"";return o+=i.domain?";domain="+i.domain:"",o+=i.secure?";secure="+i.secure:"",o+=i.sameSite?";sameSite="+i.sameSite:"",i.expires=axExpires(s.type,s.expires),(s.expires<0||null===e)&&this.get(t)?this.del(t):document.cookie=t+"="+encodeURIComponent(e)+";expires="+i.expires+o,this},get:function(t){let e=document.cookie.replace(/;\s*/,";").split(";"),s="";for(let i=0;i<e.length;i++){let o=e[i].split("=")[0],a=e[i].split("=")[1];if(o==t){s=a;break}}return!!s&&decodeURIComponent(s)},remove:function(t){return document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT",this}},axLocalStorage={set:function(t,e="",s={type:"d",expires:0,cover:!0}){if("string"!=typeof t&&!t)return!1;let i=axClone(e),o=axType(e),a=t=>(Object.keys(t).forEach(e=>{let s=t[e];("Array"===axType(s)||"Object"===axType(s))&&a(s),(axType(s).includes("HTML")||"Function"===axType(s))&&delete t[e]}),t);"Array"!==o&&"Object"!==o||axIsEmpty(i)||a(i);let n=0!==s.expires?axExpires(s.type,s.expires):0,r=axLocalStorage.get(t),l={data:!s.cover&&axLocalStorage.get(t)?axExtend(r,i):i,expires:n};return(s.expires<0||null===i)&&this.get(t)?this.del(t):window.localStorage.setItem(t,JSON.stringify(l)),this},get:function(t){if(axIsEmpty(t))return!1;let e=(new Date).toUTCString(),s=JSON.parse(window.localStorage.getItem(t));return s?0===s.expires||e<=s.expires?s.data:(window.localStorage.removeItem(t),null):null},remove:function(t){if(axIsEmpty(t))return!1;let e=[];return Array.isArray(t)?e=t:e.push(t),e.forEach(t=>{window.localStorage.removeItem(t)}),this},key:function(t){return"number"==typeof t&&window.localStorage.key(t)},clear:function(){return window.localStorage.clear(),this}};class AXINSTANCE{constructor(){this.data=[],this.destroyFun=(t=>{if(!t)return!1;t.instance.hasOwnProperty("destroyed")&&t.instance.destroyed||!t.instance.__proto__.destroy||(t.instance.destroy(),t.log=`destroy(${(new Date).toLocaleString()})`)}),this.initFun=(t=>{if(!t)return!1;t.instance.hasOwnProperty("destroyed")&&!t.instance.destroyed||!t.instance.__proto__.init||(t.instance.init(),t.log=`init(${(new Date).toLocaleString()})`)})}push(t,e,s){if(!t)return!1;let i={name:e,instance:t,type:s||"",log:`push(${(new Date).toLocaleString()})`};this.data.some(e=>e.instance===t)||this.data.push(i)}find(t,e,s=!1){if(!t)return!1;let i;return i=e?this.data.find(i=>i.instance.hasOwnProperty("destroyed")?i.name===t&&i.type===e&&i.instance.destroyed===s:i.name===t&&i.type===e):this.data.find(e=>e.instance.hasOwnProperty("destroyed")?e.name===t&&e.instance.destroyed===s:e.name===t),i?i.instance:i}findAll(t,e=!1){let s=[];return s=t?this.data.filter(s=>s.instance.hasOwnProperty("destroyed")?s.type===t&&s.instance.destroyed===e:s.type===t):i.instance.hasOwnProperty("destroyed")?this.data.filter(t=>t.instance.destroyed===e):this.data,s.length>0?s.map(t=>t.instance):s}destroy(t,e,s){if(!t)return!1;let i;i=e?this.data.find(s=>s.name===t&&s.type===e):this.data.find(e=>e.name===t),this.destroyFun(i),s&&s(i)}destroyAll(t,e){if(!t)return this.data.forEach(t=>{this.destroyFun(t)}),e&&e(this.data),!1;{let s=this.data.filter(e=>e.type===t);s.forEach(t=>{this.destroyFun(t)}),e&&e(s)}}clear(t){this.data.forEach(t=>{this.destroyFun(t)}),this.data.length=0,t&&t()}init(t,e,s){if(!t)return!1;let i;i=e?this.data.find(s=>s.name===t&&s.type===e):this.data.find(e=>e.name===t),this.initFun(i),s&&s(i)}initAll(t,e){if(!t)return this.data.forEach(t=>{this.initFun(t)}),e&&e(this.data),!1;{let s=this.data.filter(e=>e.type===t);s.forEach(t=>{this.initFun(t)}),e&&e(s)}}}const axInstance=new AXINSTANCE;class axAlert{constructor(t,e){if(!t)return!1;this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",caption:"",content:"",theme:"warning",borderless:!1,square:!1,className:"",closable:!1,style:"simple",icon:"",iconShow:!0,notable:!1,display:"",onInit:"",onShow:"",onHide:"",onUpdate:"",onUpdateContent:"",onClear:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.init()}init(){return this.shown=!0,axInstance.push(this,this.options.insName,"alert"),this.destroyed=!1,this.render(),this.setAttribute(),this.close&&(this.close.onclick=(()=>{this.hide()})),this.options.onInit&&this.options.onInit.call(this),this}render(){if(!this.targetDom.innerHTML.trim()){let t="";"simple"!=this.options.style&&this.options.style?"complex"==this.options.style&&(this.targetDom.innerHTML.trim()||(t=`${this.options.icon&&this.options.iconShow?'<i class="ax-iconfont '+this.options.icon+'" icon></i>':""}\n                    <div wrapper>\n                        ${this.options.caption?"<div caption>"+this.options.caption+"</div>":""}\n                        <div content>${this.options.content}</div>\n                    </div>\n                    ${this.options.closable?"<i close></i>":""}\n                    `)):(this.content=this.targetDom.innerHTML.trim()?this.targetDom.innerHTML:this.options.content,t=this.options.icon&&this.options.iconShow?`<i class="ax-iconfont ${this.options.icon}" icon></i><span content>${this.content}</span>`:`<span content>${this.content}</span>${this.options.closable?"<i close></i>":""}`),this.targetDom.innerHTML=t}this.close=this.targetDom.querySelector("[close]"),this.icon=this.targetDom.querySelector("[icon]"),this.wrapper=this.targetDom.querySelector("[wrapper]"),this.caption=this.targetDom.querySelector("[caption]"),this.content=this.targetDom.querySelector("[content]")}setAttribute(){!this.targetDom.classList.contains("ax-alert")&&this.targetDom.classList.add("ax-alert"),axClass.add(this.targetDom,this.options.className),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.borderless&&this.targetDom.setAttribute("borderless",""),this.options.notable&&"complex"===this.options.style&&this.targetDom.setAttribute("notable",""),this.options.square&&this.targetDom.setAttribute("square","")}update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.targetDom.removeAttribute("class"),this.targetDom.removeAttribute("theme"),this.targetDom.removeAttribute("borderless"),this.targetDom.removeAttribute("square"),this.targetDom.removeAttribute("notable"),this.targetDom.innerHTML="",this.init(),e&&e.call(this),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update",""),this)}updateContent(t,e){return this.destroyed?this:(this.content.innerHTML=t,e&&e.call(this),this.options.onUpdateContent&&this.options.onUpdateContent.call(this),"updateContent"in this.handlers&&this.emit("updateContent",""),this)}show(t){return this.destroyed||this.shown?this:(this.options.display?this.targetDom.style.display=this.options.display:this.targetDom.style.cssText=this.targetDom.style.cssText.replace("display: none;",""),this.shown=!0,this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),t&&t.call(this),this)}hide(t){return this.destroyed||!this.shown?this:(this.targetDom.style.display="none",this.shown=!1,this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),t&&t.call(this),this)}clear(t){return this.destroyed?this:(this.targetDom.removeAttribute("class"),this.targetDom.removeAttribute("theme"),this.targetDom.removeAttribute("borderless"),this.targetDom.removeAttribute("square"),this.targetDom.removeAttribute("notable"),this.targetDom.innerHTML="",t&&t.call(this),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear",""),this)}destroy(t){return this.close&&(this.close.onclick=null),this.destroyed=!0,this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axTags{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",content:"",theme:"",borderless:!1,compact:!1,text:!1,corner:"",className:"",removeNode:"i",removable:!1,separator:",",unique:!1,emptyShow:!0,emptyTip:'<i class="ax-color-ignore">还没有创建标签！</i>',edit:{enable:!1,addable:!0,deletable:!0,input:"",placeholder:"输入关键字..."},onInit:"",onBeforeAdd:"",onAdd:"",onBeforeRemove:"",onRemove:"",onUpdate:"",onUClear:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.maxIndex=0,this.emptyDom=axAddElem("span",{emptyTip:""},this.options.emptyTip),this.inputEdit=(t=>{let e=this.inputDom.value,s=this.content.find(t=>t.dom.hasAttribute("selected"));if(!this.options.edit.input&&(this.inputDom.style.width=e.length+"em"),e)this.options.edit.addable&&"Enter"===t.code&&(axIsEmpty(this.options.onBeforeAdd)?(this.add(this.inputDom.value.trim()),this.inputDom.value=""):this.options.onBeforeAdd.call(this,this.inputDom.value.trim())),s&&s.dom.removeAttribute("selected");else if(this.options.edit.deletable&&"Backspace"===t.code&&this.content.length>0){let t=this.content.slice(-1)[0];t.dom.hasAttribute("selected")?axIsEmpty(this.options.onBeforeRemove)?this.remove(t.dom):this.options.onBeforeRemove.call(this,this.content.find(e=>e.dom==t.dom)):t.dom.setAttribute("selected",""),this.toggleEmpty()}else s&&s.dom.removeAttribute("selected")}),this.init()}init(){return axInstance.push(this,this.options.insName,"tags"),this.destroyed=!1,this.content=[],this.contentProxy=new axObserve(this.content,{deep:!0}),this.contentProxy.proxy.push(...this.getSource(this.options.content)),this.render(this.content),this.observeInput(),this.setAttribute(),this.renderFinish(),this.options.onInit&&this.options.onInit.call(this),this}renderFinish(){this.content.forEach(t=>{t.dom.onclick=(()=>{t.dom.setAttribute("selected",""),this.content.filter(e=>e!==t).forEach(t=>{t.dom.removeAttribute("selected")})})})}getSource(t){let e=[];if(!axIsEmpty(t))if(Array.isArray(t))e="string"==typeof t[0]?t.map(t=>({value:t,theme:""})):t;else if("object"==typeof t)e=[t];else if("string"==typeof t){let s=t.trim().split(this.options.separator);e=s.map(t=>({value:t,theme:""}))}return e=e.filter(Boolean),e.forEach((t,e)=>{!t.hasOwnProperty("id")&&(t.id=this.maxIndex+e),!t.hasOwnProperty("theme")&&(t.theme="")}),this.maxIndex+=e.length,e}render(t){if(this.toggleEmpty(),axIsEmpty(t))return!1;let e=document.createDocumentFragment();t.forEach(t=>{let s=this.createTag(t);t.dom=s,e.appendChild(s)}),this.targetDom.appendChild(e),this.inputDom&&!this.options.edit.input&&(this.targetDom.appendChild(this.inputDom),this.inputDom.focus())}createTag(t){let e=axAddElem("span",{class:"ax-tag"},t.value),s=axAddElem(this.options.removeNode,{remove:""});return!this.options.theme&&t.theme&&e.setAttribute("theme",t.theme),this.options.removable&&(e.appendChild(s),s.onclick=(()=>{axIsEmpty(this.options.onBeforeRemove)?this.remove(e):this.options.onBeforeRemove.call(this,this.content.find(t=>t.dom==e))})),t.dom=e,e}getTag(t){if(axIsEmpty(t))return!1;let e,s,i=axType(t);if("Object"===i){let i="";(t.id||0==t.id)&&(i+="item.id == obj.id "),t.value&&(i+="&& item.value == obj.value "),t.dom&&(i+="&& item.dom == obj.dom"),i.startsWith("&&")&&(i="true "+i),e=new Function("data","obj",`return data.filter(item =>${i})`)(this.content,t),e.length>0&&(s=e[0])}else i.includes("HTML")?s=this.content.find(e=>e.dom===t):"String"===i?s=this.content.find(e=>e.value===t):"Number"===i&&(s=this.content.find(e=>e.id==t));return{item:s,id:this.content.findIndex(t=>t===s)}}setAttribute(){!this.targetDom.classList.contains("ax-tags")&&this.targetDom.classList.add("ax-tags"),axClass.add(this.targetDom,this.options.className),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.borderless&&this.targetDom.setAttribute("borderless",""),this.options.compact&&this.targetDom.setAttribute("compact",""),this.options.text&&this.targetDom.setAttribute("text",""),this.options.corner&&this.targetDom.setAttribute("corner",this.options.corner)}observeInput(){if(!this.options.edit.enable||this.destroyed)return!1;this.options.edit.input?(this.inputDom=axIdToDom(this.options.edit.input),!this.inputDom.hasAttribute("placeholder")&&this.inputDom.setAttribute("placeholder",this.options.edit.placeholder)):(this.inputDom=axAddElem("input",{type:"text",placeholder:this.options.edit.placeholder}),this.targetDom.appendChild(this.inputDom)),this.inputDom&&this.inputDom.addEventListener("keyup",this.inputEdit)}toggleEmpty(){if(!this.options.emptyShow)return!1;0===this.content.length?(this.targetDom.insertAdjacentElement("afterbegin",this.emptyDom),this.maxIndex=0):this.emptyDom.remove()}update(t,e){return axIsEmpty(t)||this.destroyed?this:(this.options=axExtend(this.options,t),this.targetDom.innerHTML="",this.inputDom&&!this.options.edit.input&&this.targetDom.appendChild(this.inputDom),this.init(),e&&e.call(this),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update",""),this)}add(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=this.getSource(t),i=this.content.map(t=>t.value);if(this.options.unique){s=axUnique(s,"value");for(let t=0;t<s.length;t++)i.includes(s[t].value)&&s.splice(t--,1);0===s.length&&new axMessage({content:"不可添加重复的标签!",result:"warning",iconShow:!0}).show()}return 0!==s.length&&(this.contentProxy.proxy.push(...s),this.render(s),this.renderFinish(),this.options.onAdd&&this.options.onAdd.call(this,s),"add"in this.handlers&&this.emit("add",s),e&&e.call(this,s),this)}remove(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=[],i=[],o=axType(t);if("Array"===o&&t.length>0)t.forEach(t=>{let e=this.getTag(t);e.item&&(s.push(e.item),i.push(e.id))});else if("String"===o){let e=t.split(this.options.separator);s=this.content.filter(t=>e.includes(t.value)),i=s.map(t=>this.content.findIndex(e=>e===t))}else{let e=this.getTag(t);e.item&&(s.push(e.item),i.push(e.id))}s.forEach(t=>{t.dom.remove()});let a=s.map(t=>t.dom);return this.contentProxy.proxy.forEach((t,e)=>{a.includes(t.dom)&&this.contentProxy.proxy.splice(e--,1)}),this.toggleEmpty(),this.options.onRemove&&this.options.onRemove.call(this,s,i),"remove"in this.handlers&&this.emit("remove",s,i),e&&e.call(this,s,i),this}clear(t){return this.destroyed?this:(this.contentProxy.proxy.splice(0),this.maxIndex=0,this.targetDom.innerHTML="",this.inputDom&&!this.options.edit.input&&this.targetDom.appendChild(this.inputDom),this.toggleEmpty(),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear",""),t&&t.call(this),this)}destroy(t){return this.content.forEach(t=>{let e=t.dom.querySelector("[remove]");e&&(e.onclick=null)}),this.inputDom&&this.inputDom.removeEventListener("keyup",this.inputEdit,!1),this.destroyed=!0,this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axValids=[];class axValid{constructor(t,e){return this.targetDom=axIdToDom(t),this.targetDom.getAttribute("name")?(this.options=axExtend({insName:"",label:"",mode:"newline",url:"",iconShow:!0,type:"",label:"",parent:"",error:"",success:"通过验证！",rule:{},number:"",max:"",min:"",length:"",maxLength:"",minLength:"",include:[],exclude:[],date:"",earliest:"",latest:"",compare:"",compareLabel:"",least:1,most:2,separator:"",successShow:!0,message:{},popup:{},format:"",inputSuccess:"ax-check-primary",inputError:"ax-check-danger",boxSuccess:"ax-color-primary",boxError:"ax-color-danger",chars:"~!@#",charsShow:!1,trigger:"blur",ajaxType:"post",onTrigger:"",onChange:"",onInit:""},e,this.targetDom,"axValid"),this.options.parent?this.parent=axIdToDom(this.options.parent):this.parent=this.targetDom.closest("form")?this.targetDom.closest("form"):document,this.options.compare&&("string"==typeof this.options.compare?this.compare=this.parent.querySelector("[name="+this.options.compare+"]"):this.compare=axIdToDom(this.options.compare)),this.options.compareLabel?this.compareLabel=this.options.compareLabel:this.compare&&this.compare.getAttribute("data-label")&&(this.compareLabel=this.compare.getAttribute("data-label")),this.handlers={},this.strong=0,this.msgBox=axAddElem("div",{valid:""}),this.value=null,this.label=this.options.label,this.name=this.targetDom.getAttribute("name"),this.type=this.targetDom.getAttribute("type")?this.targetDom.getAttribute("type"):this.targetDom.type,this.text="",this.verified=null,this.verifieds=[],this.getRules(),this.strongParse=this.parseFormat(),this.checks={required:function(t){return t?{verified:!0,message:""}:{verified:!1,message:this.label?this.label+"是必填项！":"这是必填项！"}},email:function(t){let e=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;return this.doTest(e,t,"请填写正确的邮箱！")},telephone:function(t){let e=/^[1][3456789][0-9]{9}$/;return this.doTest(e,t,"请填写11位手机号！")},landline:function(t){let e=/^([0-9]{3,4}-)?[0-9]{7,8}$/;return this.doTest(e,t,"请填写正确的座机号码！")},ip:function(t){let e=/^\d+\.\d+\.\d+\.\d+$/;return this.doTest(e,t,"请填写正确的IP地址！")},plate:function(t){let e="";return e=8==t.length?/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/:/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/,this.doTest(e,t,"请填写正确的车牌号！")},idCard:function(t){let e=/^(([1][1-5])|([2][1-3])|([3][1-7])|([4][1-6])|([5][0-4])|([6][1-5])|([7][1])|([8][1-2]))\d{4}(([1][9]\d{2})|([2]\d{3}))(([0][1-9])|([1][0-2]))(([0][1-9])|([1-2][0-9])|([3][0-1]))\d{3}[0-9xX]$/;return this.doTest(e,t,"请填写正确的身份证号！")},zip:function(t){let e=/^\d{6}$/;return this.doTest(e,t,"只能填写6位数字邮编！")},url:function(t){let e=/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/;return this.doTest(e,t,"请填写正确的域名！")},chinese:function(t){let e=/^[\u0391-\uFFE5]+$/;return this.doTest(e,t,this.label+"只能填写中文！")},letter:function(t){let e=/^[a-zA-Z]+$/;return this.doTest(e,t,this.label+"只能填写大小写英文字母！")},string:function(t){let e=/^[a-zA-Z0-9]+$/;return this.doTest(e,t,this.label+"只能填写大小写英文字母和数字！")},password:function(t){let e=new RegExp("^[a-zA-Z0-9"+this.options.chars+"]+$");return this.doTest(e,t,this.label+"只能填写大小写英文字母、数字以及特殊字符！")},ymdhms:function(t){let e=/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;return this.doTest(e,t,this.label+"只能填写类似2022-11-13 2:56:12的日期格式！")},ymd:function(t){let e=/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2})$/;return this.doTest(e,t,this.label+"只能填写类似2022-11-13的日期格式！")},hms:function(t){let e=/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])(\:[0-5][0-9])?$/;return this.doTest(e,t,this.label+"只能填写类似2:56:12的日期格式！")},ym:function(t){let e=/^(\d{4})(-|\/)(\d{1,2})$/;return this.doTest(e,t,this.label+"只能填写类似2022-11的日期格式！")},y:function(t){let e=/^(\d{4})$/;return this.doTest(e,t,this.label+"只能填写4位数字年份！")},m:function(t){let e=/^(0?[1-9]|1[0-2])$/;return this.doTest(e,t,this.label+"只能填写1~12月份！")},d:function(t){let e=/^((0?[1-9])|((1|2)[0-9])|30|31)$/;return this.doTest(e,t,this.label+"只能填写1~31日！")},date:function(t){let e=/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,s=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,i=/^(\d{1,4})(-|\/)(\d{1,2})$/,o=/^(\d{4})$/;return e.test(t)||s.test(t)||i.test(t)||o.test(t)?{verified:!0,message:""}:{verified:!1,message:this.label+"请填写有效的日期！"}},earlier:function(t){if(!this.options.date||isNaN(Date.parse(this.options.date)))return void console.error("Please enter a valid target date!");if(isNaN(Date.parse(t)))return void console.error("The value is not a valid date!");let e=axLocalTime(t),s=axLocalTime(this.options.date);return e<s?{verified:!0,message:""}:{verified:!1,message:this.label+"不可晚于"+this.options.date+"！"}},later:function(t){if(!this.options.date||isNaN(Date.parse(this.options.date)))return void console.error("Please enter a valid target date!");if(isNaN(Date.parse(t)))return void console.error("The value is not a valid date!");let e=axLocalTime(t),s=axLocalTime(this.options.date);return e>s?{verified:!0,message:""}:{verified:!1,message:this.label+"不可早于"+this.options.date+"！"}},dateRange:function(t){if(!this.options.earliest||isNaN(Date.parse(this.options.earliest)))return void console.error("Please enter a valid earliest date!");if(!this.options.latest||isNaN(Date.parse(this.options.latest)))return void console.error("Please enter a valid latest date!");if(isNaN(Date.parse(t)))return void console.error("The value is not a valid date!");let e=axLocalTime(t),s=axLocalTime(this.options.earliest),i=axLocalTime(this.options.latest);return e>s&&e<i?{verified:!0,message:""}:{verified:!1,message:this.label+"不可早于"+this.options.latest+"，且不可晚于"+this.options.earliest+"！"}},integer:function(t){let e=/^[1-9]d*$/;return this.doTest(e,t,this.label+"只能填写非0开头的正整数！")},number:function(t){let e=/^(-?\d+)\.?(\d*)$/;return this.doTest(e,t,this.label+"只能填写数字，包括正数、负数、整数、小数！")},moreThan:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t>this.options.number?{verified:!0,message:""}:{verified:!1,message:this.label+"需要大于"+this.options.number+"！"}},moreEqual:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t>=this.options.number?{verified:!0,message:""}:{verified:!1,message:this.label+"需要大于或等于"+this.options.number+"！"}},lessThan:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t<this.options.number?{verified:!0,message:""}:{verified:!1,message:this.label+"需要小于"+this.options.number+"！"}},lessEqual:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t<=this.options.number?{verified:!0,message:""}:{verified:!1,message:this.label+"需要小于或等于"+this.options.number+"！"}},equal:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t==this.options.number?{verified:!0,message:""}:{verified:!1,message:this.label+"需要等于"+this.options.number+"！"}},range:function(t){let e=/^(-?\d+)\.?(\d*)$/;return e.test(t)&&t>=this.options.min&&t<this.options.max?{verified:!0,message:""}:{verified:!1,message:this.label+"需要大于等于"+this.options.min+"并小于"+this.options.max+"！"}},length:function(t){let e=new RegExp("^.{"+this.options.length+"}$");return this.doTest(e,t,this.label+"只能填写"+this.options.length+"个字符！")},lengthMore:function(t){let e=new RegExp("^.{"+this.options.length+",}$");return this.doTest(e,t,this.label+"字符数量不可少于"+this.options.length+"个！")},lengthLess:function(t){let e=new RegExp("^.{0,"+this.options.length+"}$");return this.doTest(e,t,this.label+"字符数量不可多于"+this.options.length+"个！")},lengthRange:function(t){let e=new RegExp("^.{"+this.options.minLength+","+this.options.maxLength+"}$");return this.doTest(e,t,this.label+"字符数量不可少于"+this.options.minLength+"个，而且不可多于"+this.options.maxLength+"个！")},include:function(t){if(!axIsEmpty(this.options.include))return this.options.include.includes(t)?{verified:!0,message:""}:{verified:!1,message:this.label+"填写的值在指定内容中不存在！"};console.error("The array of include can not be empty!")},exclude:function(t){if(!axIsEmpty(this.options.exclude))return this.options.exclude.includes(t)?{verified:!1,message:this.label+"不可填写该值！"}:{verified:!0,message:""};console.error("The array of exclude can not be empty!")},strong:function(t){if(!this.options.format)return void console.error(axError.formatError);this.getStrong(t);let e=new RegExp(this.strongParse.pattern);return this.doTest(e,t,this.strongParse.message)},async:function(t){if(!this.options.format)return void console.error(axError.formatError);this.getStrong(t);let e=new RegExp(this.strongParse.pattern);return this.doTest(e,t,this.strongParse.message)},oneChecked:function(t){if(Array.isArray(t))return 1==t.length?{verified:!0,message:""}:{verified:!1,message:this.label+"必须且只能选择1项！"};console.error(axError.arrayRequired)},leastChecked:function(t){if(Array.isArray(t))return this.options.least&&t.length>=this.options.least?{verified:!0,message:""}:{verified:!1,message:this.label+"至少选择"+this.options.least+"项！"};console.error(axError.arrayRequired)},mostChecked:function(t){if(Array.isArray(t))return!this.options.most||this.options.most&&t.length<=this.options.most?{verified:!0,message:""}:{verified:!1,message:this.label+"最多选择"+this.options.most+"项！"};console.error(axError.arrayRequired)},rangeChecked:function(t){if(Array.isArray(t))return this.options.least&&this.options.most&&this.options.most>this.options.least?t.length>=this.options.least&&t.length<=this.options.most?{verified:!0,message:""}:{verified:!1,message:this.label+"至少选择"+this.options.least+"项，且不能多于"+this.options.most+"项！"}:void console.error(axError.paraError);console.error(axError.arrayRequired)},same:function(t){if(this.compare){if(t==this.compare.value)return{verified:!0,message:""};{let t=this.compareLabel?this.label+"与"+this.compareLabel+"不一致！":"两个字段值不一致！";return{verified:!1,message:t}}}console.error(axError.noNode)}},Object.assign(this.checks,this.options.extend),this.init(),this):(console.error("The element to be verified must have a name attribute!"),!1)}init(t){axInstance.push(this,this.options.insName,"valid");let e={dom:this.targetDom,name:this.name,instance:this};if(axIsEmpty(axValids))this.parent&&axValids.push({parent:this.parent,children:[e]});else if(axValids.some(t=>t.parent==this.parent)){let t=axValids.findIndex(t=>t.parent==this.parent),s=axValids[t].children;if(s.some(t=>t.name==this.name)){for(let t=0;t<s.length;t++)if(s[t].name==this.name){s[t]=e;break}}else s.push(e)}else axValids.push({parent:this.parent,children:[e]});let s=async()=>{if(!axIsEmpty(this.options.extend))for(let t in this.options.extend)this.rules[t]=["",this.options.success];let s="";"radio"==this.type||"checkbox"==this.type||"select-multiple"==this.type||"file"==this.type?s=axMultiValues(this.name,this.type,this.parent):(s=this.targetDom.value.trim(),this.options.separator&&(s=s.split(this.options.separator)));let i=Object.keys(this.rules).length,o=0;this.value=s;for(let t in this.rules){o++;let e=this.rules[t][0],a=this.rules[t][1];if(axIsEmpty(s)){if("required"==t){this.text=e||this.checks[t].call(this,"").message,this.verified=!1;break}"oneChecked"==t||"leastChecked"==t||"rangeChecked"==t?(this.text=e||this.checks[t].call(this,[]).message,this.verified=!1):(this.text=a,this.verified=!0)}else if(this.options.type){let n=this.checks[t].call(this,s);if(!n.verified){this.text=e||n.message,this.verified=!1;break}o==i&&(this.text=a,this.verified=!0)}}this.options.url&&!this.options.type&&await axAjax({url:this.options.url,data:{name:this.name,value:this.value,parent:this.parent},type:this.options.ajaxType,success:t=>{this.verified=t.content.verified,this.text=t.content.text}}),this.refreshDom(this.options.mode),e.verified=this.verified,t&&t.call(this,this.verified,this.text,this.strong),this.options.onInit&&this.options.onInit.call(this,this.verified,this.text,this.strong),this.options.onTrigger&&this.options.onTrigger.call(this,this.verified,this.text,this.strong),this.verifieds.unshift(this.verified),this.verifieds.length>=2&&(this.verifieds.length>2&&this.verifieds.splice(2),this.verifieds[0]!=this.verifieds[1]&&(this.options.onChange&&this.options.onChange.call(this,this.verified,this.text,this.strong),"change"in this.handlers&&this.emit("change",this.verified,this.text,this.strong)))};return"submit"==this.options.trigger?s():"listen"==this.options.trigger?this.targetDom.onchange=(()=>{s()}):this.targetDom.addEventListener(this.options.trigger,s,!1),this}parseFormat(){if(this.options.format){let t="",e="",s="",i="",o="",a="",n="",r={},l=[],h={},d="",p="",c=[],m="",u=null,g="",f="",x="";if(g=this.options.format.split("#")[0],this.options.format.split("#")[1]?(f=this.options.format.split("#")[1],a=f.split(",")[0],-1==f.indexOf(",")?(u=!0,n=""):n=-1!==f.indexOf(",")&&f.split(",")[1]?f.split(",")[1]:""):(a="",n=""),this.options.format.split("#")[2]&&(x=this.options.format.split("#")[2],-1!==x.indexOf("a")&&(h.lower="小写字母",d+="a-z",c.push("a-z"),l.push(h.lower)),-1!==x.indexOf("A")&&(h.upper="大写字母",d+="A-Z",c.push("A-Z"),l.push(h.upper)),-1!==x.indexOf("9")&&(h.number="数字",d+="0-9",c.push("0-9"),l.push(h.number)),-1!==x.indexOf("~")&&(h.char=this.options.charsShow?'特殊字符"'+this.options.chars+'"':"特殊字符",d+=this.options.chars,c.push(this.options.chars),l.push(h.char)),-1!==x.indexOf("中")&&(h.cn="中文",d+="一-龥",c.push("一-龥"),l.push(h.cn)),l=l.length>2?axRangeReplace(l.join(),"和",l.join().lastIndexOf(",")):l.join(),l=l.replaceAll(",","、"),!axIsEmpty(l)&&(m+="必须是"+l+"，并且要求")),axIsEmpty(this.options.format.split("#")[0])&&this.options.format.split("#")[3]&&(this.options.format.split("#")[3]<x.length&&this.options.format.split("#")[3]>0?2==this.options.format.split("#")[3]?c.forEach(t=>{p+="(?!["+t+"]+$)"}):3==this.options.format.split("#")[3]?axArrange(c,2).forEach(t=>{p+="(?!["+t.join().replaceAll(",","")+"]+$)"}):4==this.options.format.split("#")[3]&&axArrange(p,3).forEach(t=>{p+="(?!["+t.join().replaceAll(",","")+"]+$)"}):console.error("随机字符类型必须有1种，并且不能超过允许字符类型范围！"),m=l+"中至少选择"+this.options.format.split("#")[3]+"种字符。"),-1!==g.indexOf("a")){let t=g.lastIndexOf("a");r.lower="小写字母",e=parseInt(g.substring(t+1,t+2)),m+=r.lower+"至少"+e+"个，"}if(-1!==g.indexOf("A")){let e=g.lastIndexOf("A");r.upper="大写字母",t=parseInt(g.substring(e+1,e+2)),m+=r.upper+"至少"+t+"个，"}if(-1!==g.indexOf("9")){let t=g.lastIndexOf("9");r.number="数字",s=parseInt(g.substring(t+1,t+2)),m+=r.number+"至少"+s+"个，"}if(-1!==g.indexOf("~")){let t=g.lastIndexOf("~");r.char=this.options.charsShow?'特殊字符"'+this.options.chars+'"':"特殊字符",i=parseInt(g.substring(t+1,t+2)),m+=r.char+"至少"+i+"个。"}if(-1!==g.indexOf("中")){let t=g.lastIndexOf("中");r.cn="中文",o=parseInt(g.substring(t+1,t+2)),m+=r.cn+"至少"+o+"个。"}return e&&(p+="(?="+Array(e+1).join(".*?[a-z]")+")"),t&&(p+="(?="+Array(t+1).join(".*?[A-Z]")+")"),s&&(p+="(?="+Array(s+1).join(".*?[0-9]")+")"),i&&(p+="(?="+Array(i+1).join(".*?["+this.options.chars+"]")+")"),
o&&(p+="(?="+Array(o+1).join(".*?[一-龥]")+")"),axIsEmpty(d)?axIsEmpty(d)&&a?p+=".":p+=".{0,}":p+=a?"["+d+"]":"["+d+"]+",a&&u&&!n?(p+="{"+a+"}",m+="总共只能是"+a+"个字符。"):a&&!n?(p+="{"+a+",}",m+="总共至少"+a+"个字符。"):a&&n&&(p+="{"+a+","+n+"}",m+="总共至少"+a+"个字符，且不能超过"+n+"个字符。"),p="^"+p+"$",{pattern:p,message:m}}return{}}getStrong(t){let e=0,s=0,i=0,o=0,a=0,n=0;if(this.options.format){let r=this.options.format.split("#")[1].split(",")[0];t&&t.match(new RegExp("[a-z]"))&&(s=1),t&&t.match(new RegExp("[A-Z]"))&&(e=1),t&&t.match(new RegExp("[0-9]"))&&(i=1),t&&t.match(new RegExp("["+this.options.chars+"]"))&&(o=1),t&&t.match(new RegExp("[一-龥]"))&&(a=1),t&&r&&t.length>=r&&(n=1)}return this.strong=e+s+i+o+a+n,this.strong}doTest(t,e,s){return t.test(e)?{verified:!0,message:""}:{verified:!1,message:s}}getRules(){this.rules={};let t=this.options.type.trim().split(",");if("required"!=t[0]&&t.includes("required")){for(let e=0;e<t.length;e++)if("required"===t[e]){t.splice(e,1);break}t.unshift("required")}return t.forEach(t=>{this.rules[t]=["",""],axIsEmpty(this.options.rule)||this.options.rule[t]&&(this.rules[t]=this.options.rule[t]),!this.rules[t][0]&&(this.rules[t][0]=this.options.error),!this.rules[t][1]&&(this.rules[t][1]=this.options.success)}),this.rules}refreshText(){let t=this.verified?axIcon.font.successFill:axIcon.font.errorFill;this.options.iconShow?this.msgBox.innerHTML=t+" "+this.text:this.msgBox.innerHTML=this.text}refreshDom(t){let e=()=>{this.verified?(this.msgBox.classList.remove(this.options.boxError),this.msgBox.classList.add(this.options.boxSuccess),this.targetDom.classList.remove(this.options.inputError),this.targetDom.classList.add(this.options.inputSuccess)):(this.msgBox.classList.remove(this.options.boxSuccess),this.msgBox.classList.add(this.options.boxError),this.targetDom.classList.remove(this.options.inputSuccess),this.targetDom.classList.add(this.options.inputError))};if(this.refreshText(),1==this.options.mode.nodeType||"#"==t.substr(0,1)){let s=axIdToDom(t);this.msgBox.parentNode||s.appendChild(this.msgBox),e()}else if("note"==t){this.msgBox.classList.add("ax-form-txt");let t=this.targetDom.closest(".ax-form-con"),s=t.nextElementSibling;"raido"==this.type||"checkbox"==this.type?(s&&s.hasAttribute("valid")&&s.remove(),t.insertAdjacentElement("afterend",this.msgBox)):s!=this.msgBox&&t.insertAdjacentElement("afterend",this.msgBox),e()}else if("popup"==t)this.popup?(this.popup.content.innerHTML="",this.popup.content.appendChild(this.msgBox)):this.popup=new axPopup(this.targetDom.closest(".ax-form-input"),axExtend({content:this.msgBox,padding:!1,placement:"bottom-start",offsetShow:!1,arrow:!1,close:!1,footerShow:!1,theme:"crude",stay:!0},this.options.popup)).show(),e();else if("message"==t)this.verified?this.options.successShow&&new axMessage(axExtend({content:this.text,result:"success",iconShow:this.options.iconShow},this.options.message)).show():new axMessage(axExtend({content:this.text,result:"error",iconShow:this.options.iconShow},this.options.message)).show(),e();else{let t=this.targetDom.closest(".ax-form-input");"radio"==this.type||"checkbox"==this.type?(t.nextElementSibling&&t.nextElementSibling.hasAttribute("valid")&&t.nextElementSibling.remove(),t.insertAdjacentElement("afterend",this.msgBox)):t!=this.msgBox&&t.insertAdjacentElement("afterend",this.msgBox),this.msgBox.classList.add("ax-valid"),e()}}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axValidRepeat=(t,e,s,i={data:axValids,interval:100})=>{if(!e)return console.error("A form node must be filled in!"),!1;if(axIsEmpty(i.data))return console.error(axError.required),!1;if(axIsEmpty(i.data.filter(t=>t.parent==e)))return console.error("No submittable form found!"),!1;let o=[...i.data],a=o.filter(t=>t.parent==e)[0].children,n=0,r=()=>{let o=i.data.filter(t=>t.parent==e)[0];o.children.some(t=>!t.verified)?axPreventDefault(t):s&&s()};a.forEach((t,e)=>{t.instance.options.trigger="submit",setTimeout(()=>{n++,t.instance.init(function(){n==a.length&&r()})},i.interval*e)})};(()=>{if([...document.querySelectorAll("[axValid]")].filter(t=>t.getAttribute("name")).forEach(t=>{new axValid(t)}),!axIsEmpty(axValids)){let t=[...axValids];t.forEach(t=>{"FORM"==t.parent.nodeName&&t.parent.addEventListener("submit",function(e){axPreventDefault(e),axValidRepeat(e,t.parent,()=>{t.parent.submit()})},!1)})}})();class axHover{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({timeout:50,interval:50,threshold:7,enter:()=>{},leave:()=>{},hold:""},e),this.curX,this.curY,this.preX,this.preY,this.enterTimer,this.leaveTimer,this.isActive=!1,this.options.hold?this.hold=axIdToDom(this.options.hold):this.hold="",this.event=((t,e,s)=>{"enter"===t?(this.options.enter.call(this,e,s),this.isActive=!0):"leave"===t&&(this.options.leave.call(this,e,s),this.isActive=!1)}),this.enterCompare=((t,e)=>{let s=this.preX-this.curX,i=this.preY-this.curY,o=Math.sqrt(s**2+i**2);o<this.options.threshold?this.isActive||this.event("enter",t,e):(this.preX=this.curX,this.preY=this.curY,this.enterTimer=setTimeout(()=>{this.enterCompare(t,e)},this.options.interval))}),this.init()}init(){let t=this;this.targetDom.addEventListener("mousemove",t=>{this.curX=t.pageX,this.curY=t.pageY}),this.targetDom.addEventListener("mouseenter",function(e){clearTimeout(t.leaveTimer),t.preX=e.pageX,t.preY=e.pageY,t.enterTimer=setTimeout(()=>{t.enterCompare(this,e)},t.options.interval)}),this.targetDom.addEventListener("mouseleave",function(e){clearTimeout(t.enterTimer),t.leaveTimer=setTimeout(()=>{t.event("leave",this,e)},t.options.timeout)}),this.hold&&(t.hold.onmouseenter=function(e){clearTimeout(t.leaveTimer)},t.hold.onmouseleave=function(e){clearTimeout(t.enterTimer),t.leaveTimer=setTimeout(()=>{t.event("leave",t.targetDom,e)},t.options.timeout)})}}const axMores=[];class axMore{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",length:60,textFold:"展开",textUnfold:"收起",classFold:"ax-color-primary",classUnfold:"ax-color-primary"},e,this.targetDom,"axMore"),this.handlers={},this.html=this.targetDom.innerHTML,this.pureHtml=this.targetDom.textContent;let s=this,i=!0;this.event=function(){i?(s.targetDom.removeChild(this.previousSibling),this.innerHTML=s.options.textUnfold,this.setAttribute("class",s.options.classUnfold),this.insertAdjacentHTML("beforeBegin",s.text),i=!1,"unfold"in s.handlers&&s.emit("unfold","")):(s.targetDom.removeChild(this.previousSibling),this.innerHTML=s.options.textFold,this.setAttribute("class",s.options.classFold),this.insertAdjacentHTML("beforeBegin",s.ell),i=!0,"fold"in s.handlers&&s.emit("fold",""))},this.targetDom.getAttribute("axMore")?this.referName=this.targetDom.getAttribute("axMore"):this.referName="",this.init()}init(){axInstance.push(this,this.options.insName,"more"),this.text=this.pureHtml.trim().replace(/<[^>]+>/g,"").replace(/ +/g," "),this.ell=this.text.substring(0,this.options.length)+"...";let t=[...this.text].length,e=`<a href="###" class="${this.options.classFold}">${this.options.textFold}</a>`;return t>this.options.length&&(this.targetDom.innerHTML=this.ell+e),this.targetDom.lastChild.onclick=this.event,this.referName&&(axIsEmpty(axMores)?axMores.push({name:this.referName,instance:this}):axMores.some(t=>t.name==this.referName)||axMores.push({name:this.referName,instance:this})),"load"in this.handlers&&this.emit("load",""),this}destroy(t){this.targetDom.lastChild.removeEventListener("click",this.event,!1),this.targetDom.innerHTML=this.html,t&&t.call(this)}updateContent(t,e){return t="string"==typeof t?"#"==t.substr(0,1)?document.querySelector(t).textContent:t:t.textContent,this.pureHtml=t,this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}update(t,e){return this.options=axExtend(this.options,t),this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axAccordion{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",content:"",dispose:!1,active:"",disabled:"",multiple:!1,collapseAll:!0,borderShow:!1,ajaxType:"post",trigger:"click",max:0,headerBreakShow:!0,bodyBreakShow:!0,targetClass:"",itemNode:"li",arrow:{enable:!0,rotate:180,iconClose:"ax-icon-up",iconOpen:"ax-icon-up",position:"end"},tipPosition:"begin",addToActive:!0,onInit:"",onAdd:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onExpand:"",onExpanded:"",onCollapse:"",onCollapsed:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:"",onExpandAll:"",onCollapseAll:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.triggerShow=function(){s.toggle(this)},this.init()}init(){if(axInstance.push(this,this.options.insName,"accordion"),this.destroyed=!1,this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.setAttribute(),this.initDataStd(),this.options.onInit&&this.options.onInit.call(this),this}async initDataStd(){if(axIsEmpty(this.options.content)){if(this.targetDom.innerHTML){let t=[...this.targetDom.children];for(let e in t){if(e>=this.options.max&&0!==this.options.max)break;let s=t[e],i=s.querySelector(".ax-accordion-header"),o=s.querySelector("[flex]"),a=s.querySelector(".ax-accordion-body"),n=s.querySelector(".ax-accordion-content"),r=i.querySelector("[label]"),l=i.querySelector("[arrow]"),h=s.querySelector("[tip]"),d=s.querySelector("[legend]"),p=i.nextElementSibling&&i.nextElementSibling.classList.contains("ax-break-line")?i.nextElementSibling:null,c=n.nextElementSibling&&n.nextElementSibling.classList.contains("ax-break-line")?n.nextElementSibling:null,m={label:r.innerHTML.trim(),content:n.innerHTML.trim(),wrapperDom:s,flexDom:o,labelDom:r,headerDom:i,bodyDom:a,contentDom:n,arrowDom:l,tipDom:h,legendDom:d,headerBreakDom:p,bodyBreakDom:c};s.hasAttribute("active")&&(m.active=!0),s.hasAttribute("disabled")&&(m.disabled=!0),this.data.push(m)}}}else this.targetDom.innerHTML="","string"==typeof this.options.content?await this.getAsyncData(t=>{this.initRender(t)}):(this.data=this.options.content,this.data.length>0&&this.initRender(this.data));this.renderFinish()}getAsyncData(t){return axAjax({type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:e=>{if(axIsEmpty(e.content))return console.warn("No data obtained!"),!1;this.targetDom.innerHTML="",this.data=e.content,t&&t(this.data)}},this.targetDom)}initRender(t){for(let e in t){if(e>=this.options.max&&0!==this.options.max)break;this.appendItem(t[e])}this.disable(this.options.disabled)}appendItem(t,e){let s;s="async"===t.type||"url"===t.type?"":"node"===t.type?axIdToDom(t.content):"string"==typeof t.content?axStrType(t.content)?axIdToDom(t.content).innerHTML:t.content:t.content||"";let i=axAddElem(this.options.itemNode),o=axAddElem("div",{flex:""}),a=axAddElem("i",{label:""},t.label),n=axAddElem("div",{class:"ax-accordion-header"},a),r=axAddElem("div",{class:"ax-accordion-body"}),l=axAddElem("hr"),h=axAddElem("hr"),d=axAddElem("url"===t.type?"iframe":"div","url"===t.type?{class:"ax-accordion-content",frameborder:0}:{class:"ax-accordion-content"},s);if(o.appendChild(a),n.appendChild(o),i.appendChild(n),this.options.headerBreakShow?(n.insertAdjacentElement("afterend",l),t.headerBreakDom=l):t.headerBreakDom=null,r.appendChild(d),this.options.bodyBreakShow?(r.insertAdjacentElement("beforeend",h),t.bodyBreakDom=h):t.bodyBreakDom=null,i.appendChild(r),t.wrapperDom=i,t.headerDom=n,t.bodyDom=r,t.contentDom=d,t.labelDom=a,t.headerBreakDom=l,t.disabled&&i.setAttribute("disabled",""),!axIsEmpty(t.props))for(let e in t.props)i.setAttribute(e,t.props[e]);if(t.tip){let e=axAddElem("i",{tip:""},t.tip);"begin"===this.options.tipPosition?a.insertAdjacentElement("afterend",e):"end"===this.options.tipPosition&&n.insertAdjacentElement("beforeend",e),t.tipDom=e}if(t.legend){let e=axAddElem("i",{legend:"",class:t.legend?"ax-iconfont "+t.legend:"ax-iconfont"});n.insertAdjacentElement("afterbegin",e),t.legendDom=e}if(this.options.arrow.enable){let e=axAddElem("i",{arrow:"",class:`ax-iconfont ${this.options.arrow.iconClose}`});"begin"===this.options.arrow.position?n.insertAdjacentElement("afterbegin",e):"end"===this.options.arrow.position&&n.insertAdjacentElement("beforeend",e),t.arrowDom=e}this.targetDom.appendChild(i),e&&e(t)}initActive(){if(0===this.data.length)return!1;if(this.options.multiple&&!this.options.collapseAll)this.expandAll();else{let t=this.data.filter(t=>t.active);if(""!==this.options.active){let e=axValueToArr(this.options.active),s=[...e.map(t=>axFindItem(t,this.data)),...t].filter(Boolean);s.length>0&&(this.options.multiple?s.forEach(t=>{this.expand(t)}):this.expand(s[0]))}else this.options.multiple?t.forEach(t=>{this.expand(t)}):this.expand(t[0])}}asyncActive(t,e){if(t.contentDom.innerHTML.trim())return!1;"async"===t.type&&t.content&&"string"==typeof t.content&&axAjax({url:t.content,type:this.options.ajaxType,success:function(s){t.contentDom.innerHTML=s,e&&e(s)}})}setAttribute(){!this.targetDom.classList.contains("ax-accordion")&&this.targetDom.classList.add("ax-accordion"),this.options.targetClass&&axClass.add(this.targetDom,this.options.targetClass),this.options.borderShow&&axClass.add(this.targetDom,"ax-border"),this.options.arrow.enable&&this.options.arrow.rotate&&this.targetDom.setAttribute("rotate",this.options.arrow.rotate)}renderFinish(){this.initActive(),this.options.dispose||this.data.forEach(t=>{t.disabled||t.headerDom.addEventListener(this.options.trigger,this.triggerShow,!1)}),this.save()}workToggle(t,e="disable"){"enable"===e&&t.disabled?(delete t.disabled,t.wrapperDom.removeAttribute("disabled"),t.headerDom.addEventListener(this.options.trigger,this.triggerShow,!1)):"disable"!==e||t.disabled||(t.disabled=!0,t.wrapperDom.setAttribute("disabled",""),t.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1)),this.save()}getDisabled(){return this.data.filter(t=>t.disabled)}getActive(){return this.data.filter(t=>t.active)}collapseAll(t){if(this.destroyed)return this;this.data.filter(t=>t.active).forEach(t=>{this.collapse(t)}),"collapseAll"in this.handlers&&this.emit("collapseAll",""),this.options.onCollapseAll&&this.options.onCollapseAll.call(this),t&&t.call(this)}expandAll(t){if(this.destroyed||!this.options.multiple)return this;this.data.forEach(t=>{this.expand(t)}),"expandAll"in this.handlers&&this.emit("expandAll",""),this.options.onExpandAll&&this.options.onExpandAll.call(this),t&&t.call(this)}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save();let i=this.data.filter(t=>t.disabled);"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.data),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save();let i=this.data.filter(t=>!t.disabled);"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.data),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.data);i&&(i.contentDom.innerHTML="",e&&(i.content=e),"url"===i.type?i.contentDom.src=e:"async"===i.type?this.asyncActive(i):axType(i.conten).includes("HTML")?i.contentDom.appendChild(i.content):i.contentDom.innerHTML=i.content,this.save()),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i)}toggle(t){let e=axFindItem(t,this.data);e.active?this.collapse(e):this.expand(e)}collapse(t,e){let s=axType(t),i="Object"===s?t:axFindItem(t,this.data);if(!i)return!1;"collapse"in this.handlers&&this.emit("collapse",i),this.options.onCollapse&&this.options.onCollapse.call(this,i),delete i.active,i.wrapperDom.removeAttribute("active"),this.options.arrow.enable&&!this.options.arrow.rotate&&(i.arrowDom.classList.remove(this.options.arrow.iconOpen),i.arrowDom.classList.add(this.options.arrow.iconClose)),axSlideUp(i.bodyDom,"",()=>{"collapsed"in this.handlers&&this.emit("collapsed",i),this.options.onCollapsed&&this.options.onCollapsed.call(this,i),e&&e.call(this,i)}),this.save()}slideDown(t,e){let s=axType(t),i="Object"===s?t:axFindItem(t,this.data);if(!i)return!1;i.active=!0,i.wrapperDom.setAttribute("active",""),this.options.arrow.enable&&!this.options.arrow.rotate&&(i.arrowDom.classList.remove(this.options.arrow.iconClose),i.arrowDom.classList.add(this.options.arrow.iconOpen)),axSlideDown(i.bodyDom,"",()=>{"expanded"in this.handlers&&this.emit("expanded",i),this.options.onExpanded&&this.options.onExpanded.call(this,i),e&&e.call(this,i)})}expand(t,e){if(this.destroyed)return this;let s,i=axFindItem(t,this.data);axIsEmpty(i)||("expand"in this.handlers&&this.emit("expand",i),this.options.onExpand&&this.options.onExpand.call(this,i),"async"!==i.type||i.contentDom.innerHTML?("url"!==i.type||i.contentDom.getAttribute("src")||i.contentDom.setAttribute("src",i.content),this.slideDown(i,()=>{e&&e.call(this,i)})):(i.arrowDom&&i.arrowDom.setAttribute("loading",""),this.asyncActive(i,()=>{this.slideDown(i,()=>{e&&e.call(this,i)}),i.arrowDom&&i.arrowDom.removeAttribute("loading")})),this.options.multiple||(s=this.data.filter(t=>t!==i&&t.active),s.forEach(t=>{this.collapse(t)})),this.save())}add(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(this.data.length>=this.options.max&&0!==this.options.max)return console.warn("The number of children exceeds the maximum!"),!1;let s=axType(t),i=[],o=t=>{-1===this.data.findIndex(e=>e.label===t.label)&&this.appendItem(t,()=>{this.data.push(t),i.push(t)})};return"Object"===s&&o(t),"Array"===s&&t.length>0&&t.forEach(t=>{o(t)}),i.length>0&&(this.options.addToActive&&(this.options.multiple?i.forEach(t=>{this.expand(t)}):this.expand(i[i.length-1])),this.renderFinish()),this.save(),"add"in this.handlers&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),e&&e.call(this,i),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.data.length)return console.warn("The data is already empty!"),!1;let s=t=>{let e=axFindItem(t,this.data);e&&(e.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1),e.wrapperDom.remove(),this.data=this.data.filter(t=>t!==e))};return Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save(),"remove"in this.handlers&&this.emit("remove",""),this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout(()=>{let s=this.data.filter(t=>t.active).map(t=>t.id).filter(Boolean),i=this.data.filter(t=>t.disabled).map(t=>t.id).filter(Boolean);t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.data),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.data});let o=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",o),this.options.onSave&&this.options.onSave.call(this,o),e&&e.call(this,o),this},0)}destroy(t){return this.data.forEach(t=>{t.headerDom.removeEventListener(this.options.trigger,this.triggerShow)}),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this),this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axTab{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",trigger:"click",disabled:"",active:0,content:"",ajaxType:"post",headerNode:"ul",bodyNode:"ul",headerChildNode:"li",bodyChildNode:"li",max:0,removable:!1,updatable:!1,wrapperClass:"",headerClass:"ax-tab-group",bodyClass:"",sticky:0,swiper:{enable:!1,arrowShow:!1,options:{slidesPerView:"auto",threshold:4}},menu:{enable:!1,options:{columns:4,size:"lg"}},addToActive:!0,onInit:"",onAdd:"",onBeforeRemove:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onActive:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.swiperDom=null,this.swiper=null,this.maxIndex=0,this.triggerShow=function(){s.active(this)},this.labelRemove=(t=>{if(this.options.onBeforeRemove){let e=this.options.onBeforeRemove.call(this,t);e&&this.remove(t)}else this.remove(t)}),this.init()}init(){if(axInstance.push(this,this.options.insName,"tab"),this.destroyed=!1,this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.initDataStd(),this.options.onInit&&this.options.onInit.call(this),this}async initDataStd(){if(axIsEmpty(this.options.content)){if(!this.targetDom.classList.contains("ax-tab")&&this.targetDom.classList.add("ax-tab"),this.targetDom.querySelector(".ax-tab-header")&&this.targetDom.querySelector(".ax-tab-body")){this.navDom=this.targetDom.querySelector("[nav]"),this.prevDom=this.navDom?this.navDom.querySelector("[prev]"):null,this.nextDom=this.navDom?this.navDom.querySelector("[next]"):null,this.menuDom=this.navDom?this.navDom.querySelector("[menu]"):null,this.swiperDom=this.targetDom.querySelector(".ax-swiper"),this.headerWrapperDom=this.targetDom.querySelector(".ax-tab-header"),this.bodyWrapperDom=this.targetDom.querySelector(".ax-tab-body");let t=[...this.headerWrapperDom.children],e=[...this.bodyWrapperDom.children];for(let s=0,i=t.length;s<i&&!(s>=this.options.max&&0!==this.options.max);s++){let i=t[s],o=i.querySelector("[label]"),a=i.querySelector("[remove]"),n=i.querySelector("[update]"),r=e[s];if(r){let t={label:o?o.innerText:i.innerHTML,content:r.innerHTML,labelDom:o,headerDom:i,bodyDom:r};i.hasAttribute("active")&&(t.active=!0),i.hasAttribute("disabled")&&(t.disabled=!0),t.index=this.maxIndex,this.data.push(t),n&&(t.updateDom=n),a&&(this.isSticky(t)?a.remove():t.removeDom=a)}this.maxIndex++}this.createSwiper(),this.initActive()}}else this.targetDom.innerHTML="","string"==typeof this.options.content?await axAjax({url:this.options.content,type:this.options.ajaxType,success:t=>{this.targetDom.innerHTML="",this.data=t.content}},this.targetDom):this.data=this.options.content,this.data.length>0&&this.initRender(this.data);this.renderFinish()}initRender(t){this.headerWrapperDom=axAddElem(this.options.headerNode,{class:"ax-tab-header"}),this.bodyWrapperDom=axAddElem(this.options.bodyNode,{class:"ax-tab-body"});for(let e=0,s=t.length;e<s&&!(e>=this.options.max&&0!==this.options.max);e++)this.appendItem(t[e]);this.initActive(),this.disable(this.options.disabled),this.setAttribute(),this.options.swiper.enable?(this.headerWrapperDom.classList.add("ax-wrapper"),this.swiperDom=axAddElem("div",{class:"ax-swiper"},this.headerWrapperDom),this.navDom=axAddElem("div",{class:"ax-tab-swiper"},this.swiperDom),this.options.swiper.arrowShow&&(this.prevDom=axAddElem("i",{prev:""}),this.nextDom=axAddElem("i",{next:""}),this.navDom.insertAdjacentElement("afterbegin",this.prevDom),this.navDom.insertAdjacentElement("beforeend",this.nextDom)),this.options.menu.enable&&(this.menuDom=axAddElem("i",{menu:""}),this.navDom.insertAdjacentElement("beforeend",this.menuDom)),this.targetDom.appendChild(this.navDom),this.createSwiper()):this.targetDom.appendChild(this.headerWrapperDom),this.targetDom.appendChild(this.bodyWrapperDom)}isSticky(t){return"string"==typeof this.options.sticky?this.options.sticky===t.label:this.options.sticky===t.index}appendItem(t,e){if(!t.label)return!1;let s;s="async"===t.type||"url"===t.type?"":"node"===t.type?axIdToDom(t.content):"string"==typeof t.content?axStrType(t.content)?axIdToDom(t.content).innerHTML:t.content:t.content||"";let i=axAddElem(this.options.headerChildNode),o=axAddElem("i",{label:""},t.label),a=axAddElem("url"===t.type?"iframe":this.options.bodyChildNode,"url"===t.type?{src:t.content,frameborder:0}:"",s),n=axAddElem("i",{remove:""}),r=axAddElem("i",{update:""});if(t.index=this.maxIndex,i.appendChild(o),t.active&&(i.setAttribute("active",""),a.setAttribute("active","")),t.disabled&&i.setAttribute("disabled",""),!axIsEmpty(t.props))for(let e in t.props)a.setAttribute(e,t.props[e]);this.swiper&&i.classList.add("ax-slide"),t.headerDom=i,t.labelDom=o,t.bodyDom=a,this.headerWrapperDom.appendChild(i),this.options.updatable&&(t.updateDom=r,i.appendChild(r)),this.options.removable&&!this.isSticky(t)&&(t.removeDom=n,i.appendChild(n)),this.maxIndex++,e&&e(t)}initActive(){if(0===this.data.length)return!1;let t=this.data.find(t=>t.active)||this.data[0];this.options.active?this.active(this.options.active):this.active(t)}asyncActive(t,e){if(t.bodyDom.innerHTML.trim())return!1;"async"===t.type&&t.content&&"string"==typeof t.content&&axAjax({url:t.content,type:this.options.ajaxType,success:function(s){t.bodyDom.innerHTML=s.content,e&&e(s.content)}},t.bodyDom)}getDropDownData(){return this.data.map(t=>({value:t.label,label:t.label}))}createSwiper(){if(!this.swiperDom)return!1;let t=this.options.swiper.options;this.prevDom&&this.nextDom&&(t.navigation={nextEl:this.prevDom,prevEl:this.nextDom}),this.swiper=new axSwiper(this.swiperDom,t),this.menuDom&&setTimeout(()=>{this.dropdown=new axDropdown(this.menuDom,{arrowShow:!1,grid:{enable:0!==this.options.menu.options.columns&&1!==this.options.menu.options.columns,columns:this.options.menu.options.columns,fenceShow:!0},type:"button",popup:{size:this.options.menu.options.size},content:this.getDropDownData()}),this.dropdown.popup.on("show",()=>{this.getActive()&&this.getActive().label&&this.dropdown.updateValues(this.getActive().label)}),this.dropdown.on("set",t=>{(t||0===t)&&this.active(t),this.swiper.slideTo(this.getIndexActive())})},0)}setAttribute(){!this.targetDom.classList.contains("ax-tab")&&this.targetDom.classList.add("ax-tab"),this.options.wrapperClass&&axClass.add(this.targetDom,this.options.wrapperClass),this.options.headerClass&&axClass.add(this.headerWrapperDom,this.options.headerClass),this.options.bodyClass&&axClass.add(this.bodyWrapperDom,this.options.bodyClass)}renderFinish(){this.data.forEach(t=>{if(!t.disabled){let e=t.labelDom?t.labelDom:t.headerDom;e.addEventListener(this.options.trigger,this.triggerShow,!1),t.updateDom&&(t.updateDom.onclick=(()=>{this.updateContent(t)})),t.removeDom&&(t.removeDom.onclick=(()=>{this.labelRemove(t)}))}}),this.save()}workToggle(t,e="disable"){let s=t.labelDom?t.labelDom:t.headerDom;"enable"===e&&t.disabled?(delete t.disabled,t.headerDom.removeAttribute("disabled"),t.bodyDom.removeAttribute("disabled"),s.addEventListener(this.options.trigger,this.triggerShow,!1),t.removeDom&&(t.removeDom.onclick=(()=>{this.labelRemove(t)})),t.updateDom&&(t.updateDom.onclick=(()=>{this.updateContent(t)}))):"disable"!==e||t.disabled||(t.disabled=!0,t.headerDom.setAttribute("disabled",""),t.bodyDom.setAttribute("disabled",""),s.removeEventListener(this.options.trigger,this.triggerShow,!1),t.removeDom&&(t.removeDom.onclick=null),t.updateDom&&(t.updateDom.onclick=null)),this.save()}getIndexActive(){return this.data.findIndex(t=>t.active)}getDisabled(){return this.data.filter(t=>t.disabled)}getActive(){return this.data.find(t=>t.active)}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t);let i=this.data.filter(t=>t.disabled);"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.data),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t);let i=this.data.filter(t=>!t.disabled);"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.data),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.data);i&&(i.bodyDom.innerHTML="",e&&(i.content=e),"url"===i.type?i.bodyDom.src=e:"async"===i.type?this.asyncActive(i):axType(i.conten).includes("HTML")?i.bodyDom.appendChild(i.content):i.bodyDom.innerHTML=i.content,this.save()),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i)}active(t,e){if(this.destroyed)return this;let s,i=axType(t).includes("HTML")&&t.hasAttribute("label")?axFindItem(t,this.data,{dom:"labelDom"}):axFindItem(t,this.data),o=i;axIsEmpty(o)||(!o.active&&(o.active=!0),o.headerDom.setAttribute("active",""),o.bodyDom.setAttribute("active",""),axIsVnode(o.bodyDom)&&this.bodyWrapperDom.appendChild(o.bodyDom),"async"===o.type&&this.asyncActive(o),s=this.data.filter(t=>t!==o),s.forEach(t=>{t.active&&delete t.active,t.headerDom.removeAttribute("active"),t.bodyDom.removeAttribute("active")}),this.save()),"active"in this.handlers&&this.emit("active",o),this.options.onActive&&this.options.onActive.call(this,o),e&&e.call(this,o)}add(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(this.data.length>=this.options.max&&0!==this.options.max)return console.warn("The number of tabs exceeds the maximum!"),!1;let s=axType(t),i=[],o=t=>{-1===this.data.findIndex(e=>e.label===t.label)&&this.appendItem(t,()=>{this.data.push(t),i.push(t)})};return"Object"===s&&o(t),"Array"===s&&t.length>0&&t.forEach(t=>{o(t)}),i.length>0&&(this.swiper&&this.swiper.update(!0),this.options.addToActive&&(this.active(i[i.length-1]),this.swiper&&this.swiper.slideTo(i[i.length-1])),this.renderFinish(),this.dropdown&&this.dropdown.updateContent(this.getDropDownData())),"add"in this.handlers&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),e&&e.call(this,i),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.data.length)return console.warn("The data is already empty!"),!1;let s=t=>{let e=axFindItem(t,this.data);e&&(!e.labelDom&&e.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1),e.headerDom.remove(),e.bodyDom.remove(),this.data=this.data.filter(t=>t!==e),this.swiper&&this.swiper.update(!0))};return Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save(),this.swiper&&this.swiper.update(!0),this.dropdown&&this.dropdown.updateContent(this.getDropDownData()),"remove"in this.handlers&&this.emit("remove",""),
this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout(()=>{let s=this.getIndexActive(),i=this.data.filter(t=>t.disabled).map(t=>t.id).filter(Boolean);t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.data),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.data});let o=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",o),this.options.onSave&&this.options.onSave.call(this,o),e&&e.call(this,o),this},0)}update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this),this)}destroy(t){return this.data.forEach(t=>{let e=t.labelDom?t.labelDom:t.headerDom;e.removeEventListener(this.options.trigger,this.triggerShow),t.removeDom&&(t.removeDom.onclick=null),t.updateDom&&(t.updateDom.onclick=null)}),this.swiper&&this.swiper.destroy(),this.dropdown&&this.dropdown.popup.destroy(),this.destroyed=!0,this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axDrawer{constructor(t,e){return this.options=axExtend({insName:"",title:"",titleBreak:!0,overlay:!0,overlayClose:!0,duration:0,placement:"right",size:"sm",padding:"ax-padding",offset:"100px",content:"",type:"html",url:"",btnClass:"ax-opened",rel:"",close:!0,footerType:"center",footerShow:!0,footerBreak:!1,note:"",ajaxType:"post",zIndex:0,preventScroll:!1,onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onDestroy:"",confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},t,e,this.constructor.name),this.handlers={},this.form=null,e&&(this.button=axIdToDom(e)),this.state="hidden",this.sequenceShow=((t,e)=>{t.style[e]?t.style[e]=.6*parseInt(t.style[e])+parseInt(this.options.offset)+"px":t.style[e]=this.options.offset}),this.sequenceHide=((t,e)=>{if(t.style[e])t.style[e]==this.options.offset?t.removeAttribute("style"):t.style[e]=(parseInt(t.style[e])-parseInt(this.options.offset))/.6+"px";else{let s="left"===e||"right"===e?"width":"height";t.style[e]="-"+getComputedStyle(t)[s]}}),this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"drawer"),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return console.error("Form node is required!"),!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.footer.innerHTML=axFooterBtns(this.options,this),this.targetDom.querySelectorAll("[confirm]").forEach(t=>{t.onclick=(e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return console.error("Form node is required and type of options must be form string!"),!1;axValidRepeat(e,this.form,()=>{this.form.submit()}),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return console.error("Form node is required & type of options must be form string & url of async is required!"),!1;axValidRepeat(e,this.form,()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})})}else"prevent"==this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))})}),this.targetDom.querySelectorAll("[diy]").forEach(t=>{t.onclick=(()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)})}),this.targetDom.querySelectorAll("[cancel]").forEach(t=>{t.onclick=(()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)})}),this.targetDom.querySelectorAll("[close]").forEach(t=>{t.addEventListener("click",()=>{this.hide()},!1)}),this.button&&(this.button.onclick=(()=>{this.show()})),this.rel.length>0&&this.rel.forEach(t=>{t.onclick=(()=>{this.show()})}),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return'\n                    <div class="ax-drawer" data-overlay="true">\n                        <# if(this.overlay){ #><div class="ax-drawer-overlay" <# if(this.overlayClose){ #>close<# } #>></div><# } #>\n                        <div class="ax-drawer-wrapper">\n                            <# if(this.close){ #> <a href="###" class="ax-drawer-close" close><i class="ax-iconfont ax-icon-close"></i></a><# } #>\n                            <# if(this.title){ #><div class="ax-drawer-header"><div class="ax-col ax-align-center"><# this.title #></div></div><# } #>\n                            <# if(this.title && this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                            <div class="ax-drawer-body">\n                                <# if(this.padding){ #><div class="<# this.padding #>" <# if(this.type == \'iframe\'){ #>style="height:100%;"<# } #>> <# } #>\n                                    <div class="ax-drawer-content" <# if(this.type == \'iframe\'){ #>style="height:100%;"<# } #>></div>\n                                <# if(this.padding){ #></div><# } #>\n                            </div>\n                            <div class="ax-drawer-footer">\n                            </div>\n                        </div>\n                    </div>\n                  '}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-drawer-wrapper"),this.targetDom.querySelector(".ax-drawer-overlay")&&(this.overlay=this.targetDom.querySelector(".ax-drawer-overlay")),this.content=this.targetDom.querySelector(".ax-drawer-content"),this.body=this.targetDom.querySelector(".ax-drawer-body"),this.targetDom.querySelector(".ax-drawer-footer")&&(this.footer=this.targetDom.querySelector(".ax-drawer-footer")),this.width=window.getComputedStyle(this.wrapper).width,this.height=window.getComputedStyle(this.wrapper).height,this.left=window.getComputedStyle(this.wrapper).left,this.right=window.getComputedStyle(this.wrapper).right,this.top=window.getComputedStyle(this.wrapper).top,this.bottom=window.getComputedStyle(this.wrapper).bottom}setAttribute(){if("left"==this.options.placement)this.targetDom.setAttribute("data-placement","left");else if("right"==this.options.placement)this.targetDom.setAttribute("data-placement","right");else if("top"==this.options.placement)this.targetDom.setAttribute("data-placement","top");else{if("bottom"!=this.options.placement)return;this.targetDom.setAttribute("data-placement","bottom")}if("sm"==this.options.size)this.targetDom.setAttribute("data-size","sm");else if("md"==this.options.size)this.targetDom.setAttribute("data-size","md");else{if("lg"!=this.options.size)return;this.targetDom.setAttribute("data-size","lg")}this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}show(t){return this.destroyed||"hidden"!==this.state?this:(this.state="ing",document.body.appendChild(this.targetDom),this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.options.duration?this.duration=this.options.duration:this.duration=1e3*parseFloat(axStyle(this.wrapper).animationDuration),this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),axInstance.data.filter(t=>"drawer"===t.type&&!t.instance.destroyed).forEach(t=>{"shown"===t.instance.state&&t.instance.options.placement===this.options.placement&&this.sequenceShow(t.instance.wrapper,this.options.placement)}),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),setTimeout(()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")},this.duration),t&&t.call(this),this)}hide(t){return this.destroyed||"shown"!==this.state?this:(this.state="ing",this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.overlay&&(this.overlay.style.opacity=0),this.sequenceHide(this.wrapper,this.options.placement),setTimeout(()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.overlay&&this.overlay.removeAttribute("style"),this.wrapper.removeAttribute("style"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden","")},this.duration),axInstance.data.filter(t=>"drawer"===t.type&&!t.instance.destroyed).forEach(t=>{"shown"===t.instance.state&&t.instance.options.placement===this.options.placement&&t.instance!==this&&this.sequenceHide(t.instance.wrapper,this.options.placement)}),this.targetDom.querySelectorAll("video,audio").forEach(t=>{t.pause()}),this.button&&this.button.classList.remove(this.options.btnClass),t&&t.call(this),this)}destroy(t){return this.targetDom.remove(),this.button.onclick=null,this.rel.forEach(t=>{t.onclick=null}),this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.targetDom,i=axClone(this.options),o=axExtend(this.options,t),a=!1;return t&&JSON.stringify(o)!=JSON.stringify(i)&&(this.options=o,"shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),s.remove(),a=!0),e&&e.call(this,a,i,o),this.options.onUpdated&&this.options.onUpdated.call(this,a,i,o),"updated"in this.handlers&&this.emit("updated",a,i,o),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axDialog{constructor(t,e){return this.options=axExtend({insName:"",title:"",titleBreak:!1,overlay:!0,overlayClose:!0,duration:0,placement:"center",in:"springIn",out:"scaleOut",multiple:!0,size:"md",padding:"ax-padding",drag:!1,content:"",type:"html",url:"",btnClass:"ax-opened",rel:"",name:"",width:"",height:"",close:!0,closePlace:"inside",footerShow:!0,footerType:"center",footerBreak:!1,note:"",ajaxType:"post",zIndex:0,preventScroll:!1,onDrag:"",onDragged:"",onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onDestroy:"",confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},t,e,this.constructor.name),this.wrapper="",this.content="",this.overlay="",this.handlers={},this.wrapPosition="",this.wrapLeft="",this.wrapTop="",this.form=null,e&&(this.button=axIdToDom(e)),this.state="hidden",this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"dialog"),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),"phone"===axClient()&&(this.options.placement="center"),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return console.error("Form node is required!"),!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.footer.innerHTML=axFooterBtns(this.options,this),this.options.drag&&this.drag(),this.targetDom.querySelectorAll("[confirm]").forEach(t=>{t.onclick=(e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return console.error("Form node is required and type of options must be form string!"),!1;axValidRepeat(e,this.form,()=>{this.form.submit()}),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return console.error("Form node is required & type of options must be form string & url of async is required!"),!1;axValidRepeat(e,this.form,()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})})}else"prevent"==this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))})}),this.targetDom.querySelectorAll("[diy]").forEach(t=>{t.onclick=(()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)})}),this.targetDom.querySelectorAll("[cancel]").forEach(t=>{t.onclick=(()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)})}),this.targetDom.querySelectorAll("[close]").forEach(t=>{t.addEventListener("click",()=>{this.hide()},!1)}),this.button&&(this.button.onclick=(()=>{this.show()})),this.rel.length>0&&this.rel.forEach(t=>{t.onclick=(()=>{this.show()})}),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return'\n        <div class="ax-dialog" data-overlay="true">\n        <# if(this.overlay){ #><div class="ax-dialog-overlay" <# if(this.overlayClose){ #>close<# } #>></div><# } #>\n            <div class="ax-dialog-wrapper">\n                <# if(this.close){ #><a href="###" class="ax-dialog-close" close><i class="ax-iconfont ax-icon-close"></i></a><# } #>\n                <# if(this.title){ #><div class="ax-dialog-header"><# this.title #></div><# } #>\n                <# if(this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                <div class="ax-dialog-body">\n                    <# if(typeof this.padding == \'string\'){ #><div class="<# this.padding #>"> <# }else if(this.padding){ #><div class="ax-padding"> <# } #>\n                    <div class="ax-dialog-content"></div>\n                    <# if(this.padding){ #></div><# } #>\n                </div>\n                <div class="ax-dialog-footer">\n                </div>\n            </div>\n        </div>\n      '}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-dialog-wrapper"),this.header=this.targetDom.querySelector(".ax-dialog-header"),this.content=this.targetDom.querySelector(".ax-dialog-content"),this.body=this.targetDom.querySelector(".ax-dialog-body"),this.overlay=this.targetDom.querySelector(".ax-dialog-overlay"),this.footer=this.targetDom.querySelector(".ax-dialog-footer")}setAttribute(){this.options.size&&this.targetDom.setAttribute("data-size",this.options.size),this.options.footerType&&this.targetDom.setAttribute("data-footerType",this.options.footerType),this.options.height&&(this.content.style.height=this.options.height),this.oldStyle=this.options.width?`width:${this.options.width};`:null,this.options.type&&this.targetDom.setAttribute("data-type",this.options.type),!this.options.overlay&&this.targetDom.setAttribute("data-overlay","false"),!this.options.title&&this.options.close?"lg"==this.options.size?this.targetDom.setAttribute("data-closePlace","bottom"):this.options.title||"inside"!=this.options.closePlace?this.targetDom.setAttribute("data-closePlace",this.options.closePlace):this.targetDom.setAttribute("data-closePlace","outside"):this.options.closePlace&&this.options.close&&this.targetDom.setAttribute("data-closePlace",this.options.closePlace),this.targetDom.setAttribute("placement",this.options.placement),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}drag(t){if(this.destroyed)return!1;if(!this.options.title)return!1;{let e=this,s=this.targetDom.querySelector(".ax-dialog-header");this.targetDom.setAttribute("data-drag",this.options.drag),s.onmousedown=function(t){e.options.onDrag&&e.options.onDrag.call(this),"drag"in e.handlers&&e.emit("drag",""),this.style.cursor="move";let s=this.parentNode;s.style.cssText+="position:fixed ;",e.wrapPosition="fixed";let i=t.clientX-s.offsetLeft,o=t.clientY-s.offsetTop;document.onmousemove=function(t){let a=t.clientX-i,n=t.clientY-o,r=document.documentElement.clientWidth-s.clientWidth,l=document.documentElement.clientHeight-s.clientHeight;a<0&&(a=0),a>r&&(a=r),n<0&&(n=0),n>l&&(n=l),s.style.left=a+"px",s.style.top=n+"px",e.wrapLeft=s.style.left,e.wrapTop=s.style.top}},s.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,e.options.onDragged&&e.options.onDragged.call(this),"dragged"in e.handlers&&e.emit("dragged","")},s.ondragstart=function(t){axPreventDefault(t)},s.ondragend=function(t){axPreventDefault(t)},t&&t.call(this)}return this}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.targetDom,i=axClone(this.options),o=axExtend(this.options,t),a=!1;return t&&JSON.stringify(o)!=JSON.stringify(i)&&(this.options=o,"shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),s.remove(),a=!0),e&&e.call(this,a,i,o),this.options.onUpdated&&this.options.onUpdated.call(this,a,i,o),"updated"in this.handlers&&this.emit("updated",a,i,o),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}destroy(t){return this.targetDom.remove(),this.button.onclick=null,this.rel.forEach(t=>{t.onclick=null}),this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}show(t){if(this.destroyed||"hidden"!==this.state)return this;if(this.state="ing",document.body.appendChild(this.targetDom),this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.wrapperHeight=axArrHeight(this.wrapper).height,this.options.duration?this.duration=this.options.duration:this.wrapperHeight?this.duration=Math.floor(this.wrapperHeight/3+250):this.duration=1e3*parseFloat(axStyle(this.wrapper).animationDuration),!this.options.multiple){let t=axInstance.data.filter(t=>t.type.dialog&&t.instance!==this&&t.instance.isShow);t.forEach(t=>{t.instance.hide()})}this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),this.targetDom.classList.remove("ax-hide"),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass);let e="";return this.wrapPosition&&(e=`position:${this.wrapPosition};left:${this.wrapLeft};top:${this.wrapTop};`),"slideDown"==this.options.in?axHeightDown(this.wrapper,{height:this.wrapperHeight},"",this.duration):(this.options.duration&&(this.targetDom.style.animationDuration=`${this.options.duration}ms`),this.options.in&&(this.wrapper.style.cssText=`animation-name: ${this.options.in};${e};${this.oldStyle}`)),setTimeout(()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")},this.duration),t&&t.call(this),this}hide(t){if(this.destroyed||"shown"!==this.state)return this;this.state="ing",this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.options.duration&&(this.targetDom.style.animationDuration=this.options.duration),this.targetDom.classList.add("ax-hide");let e="";return this.wrapPosition&&(e=`position:${this.wrapPosition};left:${this.wrapLeft};top:${this.wrapTop};`),"slideUp"==this.options.out?axHeightUp(this.wrapper,{height:this.wrapperHeight},"",this.duration):this.options.out&&(this.wrapper.style.cssText=`animation-name: ${this.options.out};${e};${this.oldStyle}`),this.targetDom.querySelectorAll("video,audio").forEach(t=>{t.pause()}),setTimeout(()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden",""),this.wrapper.style.cssText=this.oldStyle},this.duration),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axPopupPosition{constructor(t,e,s){if(!t||!e)return!1;this.btnDom=axIdToDom(t),this.boxDom=axIdToDom(e),this.options=axExtend({placement:"top",arrowShow:!0,arrowOffset:"2.8rem",gap:".8rem",observer:document.body,onInit:"",onUpdated:""},s),this.handlers={},this.gap=this.strToNum(this.options.gap),this.observer=axIdToDom(this.options.observer),this.placement=this.options.placement,this.init()}init(){return"center"!==this.placement&&this.createArrow(),this.setAttribute(),this.resetPlacement(),window.addEventListener("resize",()=>{this.resetPlacement()}),window.addEventListener("scroll",()=>{this.resetPlacement()}),new MutationObserver(()=>{!this.unsettable("btn")&&this.btnData&&(axOffset(this.btnDom).left===this.btnData.left&&axOffset(this.btnDom).top===this.btnData.top||this.resetPlacement())}).observe(this.observer,{childList:!0,subtree:!0,characterData:!0}),this.options.onInit&&this.options.onInit.call(this,this.placement),this}strToNum(t){if(!t)return 0;let e;return e=t.endsWith("rem")||t.endsWith("REM")?10*t.replace("rem","").replace("REM",""):t.endsWith("px")||t.endsWith("PX")?~~t.replace("px","").replace("PX",""):~~t,e}setAttribute(){"absolute"!==getComputedStyle(this.boxDom).position&&(this.boxDom.style.position="absolute")}createArrow(){this.options.arrowShow&&(this.arrow=axAddElem("i",{style:"position:absolute",arrow:""}),this.boxDom.appendChild(this.arrow))}setArrow(t){let e=this.btnData.width>this.boxData.width/2,s=this.btnData.height>this.boxData.height/2,i=this.strToNum(getComputedStyle(this.arrow).width)/2;this.boxDom.setAttribute("placement",t),t.includes("top")||t.includes("bottom")?t.includes("start")?e?(this.arrow.style.left=this.options.arrowOffset,this.arrow.style.right="auto"):(this.arrow.style.left=Math.floor(this.btnData.width/2-i)+"px",this.arrow.style.right="auto"):t.includes("end")?e?(this.arrow.style.left="auto",this.arrow.style.right=this.options.arrowOffset):(this.arrow.style.left="auto",this.arrow.style.right=Math.floor(this.btnData.width/2-i)+"px"):this.arrow.style.left=this.boxData.width/2-1-i+"px":(t.includes("left")||t.includes("right"))&&(t.includes("start")?s?(this.arrow.style.top=this.options.arrowOffset,this.arrow.style.bottom="auto"):(this.arrow.style.top=Math.floor(this.btnData.height/2-i)+"px",this.arrow.style.bottom="auto"):t.includes("end")?s?(this.arrow.style.top="auto",this.arrow.style.bottom=this.options.arrowOffset):(this.arrow.style.top="auto",this.arrow.style.bottom=Math.floor(this.btnData.height/2-i)+"px"):this.arrow.style.top=this.boxData.height/2-1-i+"px")}getRectData(){this.browserData={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},this.btnData={width:this.btnDom.getBoundingClientRect().width,height:this.btnDom.getBoundingClientRect().height,offsetLeft:this.btnDom.getBoundingClientRect().left,offsetLeftAlt:this.btnDom.getBoundingClientRect().right,offsetRight:this.browserData.width-this.btnDom.getBoundingClientRect().right,offsetTop:this.btnDom.getBoundingClientRect().top,offsetTopAlt:this.btnDom.getBoundingClientRect().bottom,offsetBottom:this.browserData.height-this.btnDom.getBoundingClientRect().bottom,...axOffset(this.btnDom)},this.boxData={width:this.boxDom.getBoundingClientRect().width,height:this.boxDom.getBoundingClientRect().height,offsetLeft:this.boxDom.getBoundingClientRect().left,offsetLeftAlt:this.boxDom.getBoundingClientRect().right,offsetRight:this.browserData.width-this.boxDom.getBoundingClientRect().right,offsetTop:this.boxDom.getBoundingClientRect().top,offsetTopAlt:this.boxDom.getBoundingClientRect().bottom,offsetBottom:this.browserData.height-this.boxDom.getBoundingClientRect().bottom}}setPlacement(t){let[e,s,i,o]=["auto","auto","auto","auto"];t.includes("bottom")?("bottom"===t?e=this.btnData.left-(this.boxData.width-this.btnData.width)/2:"bottom-start"===t?e=this.btnData.left:"bottom-end"===t&&(e=this.btnData.left+this.btnData.width-this.boxData.width),i=`${Math.ceil(this.btnData.top+this.btnData.height+this.gap)}px`,e=`${Math.ceil(e)}px`):t.includes("top")?("top"===t?e=this.btnData.left-(this.boxData.width-this.btnData.width)/2:"top-start"===t?e=this.btnData.left:"top-end"===t&&(e=this.btnData.left+this.btnData.width-this.boxData.width),o=this.browserData.height-this.btnData.top+this.gap,o=`${Math.ceil(o)}px`,e=`${Math.ceil(e)}px`):t.includes("left")?("left"===t?i=`${Math.ceil(this.btnData.top-(this.boxData.height-this.btnData.height)/2)}px`:"left-start"===t?i=`${Math.ceil(this.btnData.top)}px`:"left-end"===t&&(o=`${Math.ceil(this.browserData.height-this.btnData.top-this.btnData.height)}px`),s=`${Math.ceil(this.browserData.width-this.btnData.left+this.gap)}px`):t.includes("right")?("right"===t?i=`${Math.ceil(this.btnData.top-(this.boxData.height-this.btnData.height)/2)}px`:"right-start"===t?i=`${Math.ceil(this.btnData.top)}px`:"right-end"===t&&(o=`${Math.ceil(this.browserData.height-this.btnData.top-this.btnData.height)}px`),e=`${Math.ceil(this.btnData.left+this.btnData.width+this.gap)}px`):"center"===t&&(this.boxDom.style.position="fixed",this.boxDom.style.marginLeft=`-${Math.ceil(this.boxData.width/2)}px`,this.boxDom.style.marginTop=`-${Math.ceil(this.boxData.height/2)}px`,e="50%",i="50%"),this.boxDom.style.left=e,this.boxDom.style.right=s,this.boxDom.style.top=i,this.boxDom.style.bottom=o,this.arrow&&this.setArrow(t)}getRectOffset(){let t=this.btnData.offsetLeft-this.boxData.width-this.gap,e=this.btnData.offsetTop-this.boxData.height-this.gap,s=this.browserData.width-this.btnData.offsetLeftAlt-this.boxData.width-this.gap,i=this.browserData.height-this.btnData.offsetTopAlt-this.boxData.height-this.gap,o=this.btnData.offsetTop,a=this.browserData.height-(o+this.boxData.height),n=this.btnData.offsetTop-(this.boxData.height-this.btnData.height)/2,r=this.browserData.height-(n+this.boxData.height),l=this.btnData.offsetTopAlt-this.boxData.height,h=this.browserData.height-this.btnData.offsetTopAlt,d=this.btnData.offsetLeft,p=this.browserData.width-(d+this.boxData.width),c=this.btnData.offsetLeft-(this.boxData.width-this.btnData.width)/2,m=this.browserData.width-(c+this.boxData.width),u=this.btnData.offsetLeftAlt-this.boxData.width,g=this.browserData.width-this.btnData.offsetLeftAlt;return{left:t,right:s,top:e,bottom:i,startTop:o,startBottom:a,centerTop:n,centerBottom:r,endTop:l,endBottom:h,startLeft:d,startRight:p,centerLeft:c,centerRight:m,endLeft:u,endRight:g}}edgeResponse(t,e){let s;return 1===e.length?s="center"===e[0].name?t:`${t}-${e[0].name}`:2===e.length?("top"!==t&&"bottom"!==t||(s=this.btnData.offsetLeft===this.boxData.offsetLeft&&this.boxData.offsetLeft<this.boxData.offsetRight?`${t}-start`:(this.btnData.offsetLeftAlt===this.boxData.offsetLeftAlt&&(this.boxData.offsetLeft,this.boxData.offsetRight),`${t}-end`)),"left"!==t&&"right"!==t||(s=this.btnData.offsetTop===this.boxData.offsetTop&&this.boxData.offsetTop<this.boxData.offsetBottom?`${t}-start`:this.btnData.offsetTopAlt===this.boxData.offsetTopAlt&&this.boxData.offsetTop>this.boxData.offsetBottom?`${t}-end`:t)):s=3===e.length?this.options.placement:this.placement,s}fixPlacement(){let t=this.getRectOffset(),e=this.options.placement,s=this.placement,i=[{name:"start",left:t.startLeft,right:t.startRight},{name:"center",left:t.centerLeft,right:t.centerRight},{name:"end",left:t.endLeft,right:t.endRight}],o=i.filter(t=>t.left>=0&&t.right>=0),a=[{name:"start",top:t.startTop,bottom:t.startBottom},{name:"center",top:t.centerTop,bottom:t.centerBottom},{name:"end",top:t.endTop,bottom:t.endBottom}],n=a.filter(t=>t.top>=0&&t.bottom>=0);return e.includes("bottom")?(s=this.edgeResponse("bottom",o),t.bottom<0&&t.top>0&&(s=s.replace("bottom","top"))):e.includes("top")?(s=this.edgeResponse("top",o),t.top<0&&t.bottom>0&&(s=s.replace("top","bottom"))):e.includes("left")?(s=this.edgeResponse("left",n),t.left<0&&t.right>0&&(s=e.replace("left","right"))):e.includes("right")&&(s=this.edgeResponse("right",n),t.right<0&&t.left>0&&(s=e.replace("right","left"))),this.placement=s,s}unsettable(t){let e="btn"===t?this.btnDom:this.boxDom;return axIsVnode(e)||"none"===getComputedStyle(e).display}resetPlacement(){if(this.unsettable())return!1;this.getRectData(),this.fixPlacement(),this.setPlacement(this.placement),this.options.onUpdated&&this.options.onUpdated.call(this,this.placement),
"updated"in this.handlers&&this.emit("updated",this.placement)}update(t){return this.resetPlacement(),t&&t.call(this,this.placement),this}change(t,e){return this.btnDom=axIdToDom(t),this.resetPlacement(),e&&e.call(this,this.placement),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axPopup{constructor(t,e){this.options=axExtend({insName:"",title:"",titleBreak:!1,placement:"top",arrow:!0,trigger:"click",pageClose:!0,size:"md",duration:0,in:"fadeIn",out:"fadeOut",multiple:!1,offsetShow:!0,rel:"",triggerRel:"click",theme:"",stay:!1,fixDistance:"2.4rem",name:"",width:"",height:"",padding:"ax-padding",content:"",type:"html",url:"",btnClass:"ax-opened",close:!0,closePlace:"inside",triggerShowOnly:!1,triggerStrict:!1,footerShow:!0,footerType:"line",footerBreak:!1,note:"",ajaxType:"post",zIndex:0,preventScroll:!1,onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onUpdatePosition:"",onDestroy:"",confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},e,t,this.constructor.name);let s=this;return this.handlers={},this.form=null,this.button=axIdToDom(t),this.state="hidden",this.bound=!1,this.triggerShow=function(t){if(s.options.triggerStrict&&![...s.rel,s.button].includes(t.target))return!1;if("click"===s.options.trigger||"click"===this.trigger)if("hidden"===s.state){if(s.show(),!s.options.multiple){let t=axInstance.data.filter(t=>"popup"===t.type&&t.instance!==s&&t.instance.isShow);t.forEach(t=>{t.instance.hide()})}}else"shown"===s.state&&!s.options.triggerShowOnly&&s.hide();else"input"===s.options.trigger&&(s.button.value?s.show():!s.options.triggerShowOnly&&s.hide())},this.toggleShow=(t=>{let e=!0;for(let s=0;s<this.rel.length;s++)if(!axIsOutside(t,this.rel[s])){e=!1;break}axIsOutside(t,this.targetDom)&&axIsOutside(t,this.button)&&e&&"shown"===this.state&&this.hide()}),this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"popup"),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return console.error("Form node is required!"),!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.footer.innerHTML=axFooterBtns(this.options,this),this.createPopup(),this.targetDom.querySelectorAll("[confirm]").forEach(t=>{t.onclick=(e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return console.error("Form node is required and type of options must be form string!"),!1;axValidRepeat(e,this.form,()=>{this.form.submit()}),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return console.error("Form node is required & type of options must be form string & url of async is required!"),!1;axValidRepeat(e,this.form,()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})})}else"prevent"===this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))})}),this.targetDom.querySelectorAll("[diy]").forEach(t=>{t.onclick=(()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)})}),this.targetDom.querySelectorAll("[cancel]").forEach(t=>{t.onclick=(()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)})}),this.targetDom.querySelectorAll("[close]").forEach(t=>{t.addEventListener("click",()=>{this.hide()},!1)}),this.showEvent(),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return`\n                            <div class="ax-popup" id="popup${(new Date).getTime()}">\n                                <div class="ax-popup-wrapper">\n                                    <# if(this.close){ #><i close></i><# } #>\n                                    <# if(this.title){ #><div class="ax-popup-header"><# this.title #></div><# } #>\n                                    <# if(this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                                    <div class="ax-popup-body">\n                                        <# if(typeof this.padding === 'string'){ #><div class="<# this.padding #>"> <# }else if(this.padding){ #><div class="ax-padding"> <# } #>\n                                        <# this.media #>\n                                        <div class="ax-popup-content"></div>\n                                        <# if(this.padding){ #></div><# } #>\n                                    </div>\n                                    <div class="ax-popup-footer">\n                                    </div>\n                                </div>\n                            </div>\n                            `}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-popup-wrapper"),this.content=this.targetDom.querySelector(".ax-popup-content"),this.body=this.targetDom.querySelector(".ax-popup-body"),this.targetDom.querySelector(".ax-popup-header")&&(this.header=this.targetDom.querySelector(".ax-popup-header")),this.footer=this.targetDom.querySelector(".ax-popup-footer")}setAttribute(){this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.type&&this.targetDom.setAttribute("type",this.options.type),this.options.footerType&&this.targetDom.setAttribute("footerType",this.options.footerType),this.options.height&&(this.content.style.height=this.options.height),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),this.options.close&&this.targetDom.setAttribute("closePlace",this.options.closePlace)}createPopup(){let t;t="center"===this.options.placement||axIsMobi()?"center":this.options.placement,this.popupPosition=new axPopupPosition(this.button,this.targetDom,{placement:t,arrowShow:this.options.arrow,gap:this.options.arrow?".8rem":".4rem",arrowOffset:this.options.fixDistance}),this.oldStyle=this.options.width?`width:${this.options.width};`:""}showEvent(){"click"===this.options.trigger||"input"===this.options.trigger?(!this.bound&&this.button.addEventListener(this.options.trigger,this.triggerShow,!1),this.rel.length>0&&this.rel.forEach(t=>{this.bound||(t.trigger=this.options.triggerRel||this.options.trigger,t.addEventListener(this.options.triggerRel||this.options.trigger,this.triggerShow,!1))})):"hover"===this.options.trigger?this.hover=new axHover(this.button,{enter:()=>{this.show()},leave:()=>{!this.options.triggerShowOnly&&this.hide()},hold:this.targetDom}):"sticky"===this.options.trigger&&this.show(),this.options.pageClose&&!this.options.multiple&&!this.bound&&document.addEventListener("click",this.toggleShow,!1),this.bound=!0}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=axClone(this.options),i=axExtend(this.options,t),o=!1;return t&&JSON.stringify(i)!=JSON.stringify(s)&&(this.options=i,this.targetDom.remove(),this.popupPosition="","shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),o=!0),e&&e.call(this,o,s,i),this.options.onUpdated&&this.options.onUpdated.call(this,o,s,i),"updated"in this.handlers&&this.emit("updated",o,s,i),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}updatePosition(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=axIdToDom(t);return this.popupPosition.change(s,t=>{this.options.onUpdatePosition&&this.options.onUpdatePosition.call(this,t),"updatePosition"in this.handlers&&this.emit("updatePosition",t)}),e&&e.call(this),this}show(t){return this.destroyed||"hidden"!==this.state?this:(this.state="ing",getComputedStyle(this.targetDom).display||document.body.appendChild(this.targetDom),this.options.preventScroll&&axPreventScroll(this.wrapper,this.body),this.wrapperHeight=axArrHeight(this.wrapper).height,this.options.duration?this.duration=this.options.duration:this.wrapperHeight?this.duration=Math.floor(this.wrapperHeight/3+250):this.duration=1e3*parseFloat(axStyle(this.targetDom).animationDuration),this.popupPosition.update(),this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),"slideDown"===this.options.in?axHeightDown(this.wrapper,{height:this.wrapperHeight},"",this.duration):(this.options.duration&&(this.targetDom.style.animationDuration=`${this.options.duration}ms`),this.options.in&&(this.targetDom.style.animationName=this.options.in)),this.targetDom.style.cssText+=`;${this.oldStyle}`,this.hover&&(this.hover.isActive=!0),setTimeout(()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")},this.duration),t&&t.call(this),this)}hide(t){return this.destroyed||"shown"!==this.state?this:(this.state="ing",this.options.stay||(this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),"slideUp"===this.options.out?axHeightUp(this.wrapper,{height:this.wrapperHeight},"",this.duration):this.options.out&&(this.targetDom.style.animationName=this.options.out),this.targetDom.style.cssText+=`;${this.oldStyle}`,this.targetDom.querySelectorAll("video,audio").forEach(t=>{t.pause()}),this.hover&&(this.hover.isActive=!1),setTimeout(()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden",""),"slideUp"===this.options.out&&(this.wrapper.style.height="auto")},this.duration),t&&t.call(this)),this)}destroy(t){return this.targetDom.remove(),this.popupPosition=null,this.hover=null,this.button.removeEventListener(this.options.trigger,this.triggerShow),this.rel.forEach(t=>{t.removeEventListener(this.options.triggerRel||this.options.trigger,this.triggerShow)}),this.toggleShow&&document.removeEventListener("click",this.toggleShow),this.bound=!1,this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axTooltip{constructor(t,e){this.button=axIdToDom(t),this.options=axExtend({insName:"",placement:"top",arrow:!0,trigger:"hover",size:"",multiple:!0,theme:"dark",content:""},e,this.button,this.constructor.name),this.init()}init(){axInstance.push(this,this.options.insName,"tooltip");let t=this.button.getAttribute("axTooltip");!this.options.content&&t&&!t.includes(":")&&(this.options.content=t);let e=Object.assign({type:"html",close:!1,footerShow:!1,padding:!1},this.options);this.popup=new axPopup(this.button,e),this.content=this.popup.content,this.setAttribute()}setAttribute(){this.popup.targetDom.classList.add("ax-tooltip"),this.options.theme&&this.popup.targetDom.setAttribute("theme",this.options.theme)}updateContent(t,e){return this.content.innerHTML=t,e&&e.call(this,update,before,this.content.innerHTML,this.options.content),"updated"in this.handlers&&this.emit("updated",""),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axUpload{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"beautify",accept:"jpg,jpeg,gif,png,svg,doc,docx,xls,xlsx,txt,mp4,mp3,pdf",mime:"",multiple:!0,name:"",separator:",",columns:0,min:0,max:0,size:0,url:"",fileType:[],action:"auto",tipsShow:!0,summaryShow:!1,cloud:"",pastable:{before:"请点击使用ctrl+v粘贴上传",ing:"使用ctrl+v粘贴进来",after:"ctrl+v粘贴上传成功"},icons:{file:"ax-iconfont ax-icon-file-text",attach:"ax-iconfont ax-icon-attach",image:"ax-iconfont ax-icon-image",video:"ax-iconfont ax-icon-video",audio:"ax-iconfont ax-icon-music"},beautify:{placeholder:"请选择文件...",text:"选择文件",className:"ax-file",display:"",callback:""},message:{passed:"通过文件校验!",exceeded:"超过了文件数量限制!",tooLarge:"文件体积太大了!",errorSuffix:"不支持该文件格式!",success:"上传成功!",failed:"提交地址可能错误!"},chooseBtn:{icon:'<i class="ax-iconfont ax-icon-plus"></i>',text:"选择文件",className:"",props:{},show:!0},uploadBtn:{icon:'<i class="ax-iconfont ax-icon-upload"></i>',text:"立即上传",className:"",props:{},show:!1},clearBtn:{icon:'<i class="ax-iconfont ax-icon-trash"></i>',text:"删除全部",className:"",props:{},show:!1},cubeBtn:{icon:'<i class="ax-iconfont ax-icon-plus-t"></i>',text:"",className:"",props:{},show:!0},boxBtn:{icon:'<i class="ax-iconfont ax-icon-addpic"></i>',text:"点击或拖拽上传",className:"",props:{},show:!0},onRendered:"",onPasted:"",onDropped:"",onUploading:"",onUploaded:"",onAllUploaded:"",onError:"",onCompleted:"",onAllCompleted:"",onChanged:"",onRemove:"",onClear:"",onBeforeRemove:"",onBeforeClear:"",onBeforeUpload:""},e,this.targetDom,this.constructor.name),this.name=this.targetDom&&"INPUT"==this.targetDom.nodeName?this.targetDom.getAttribute("name"):this.options.name,this.handlers={},this.sizeLimit=1024*this.options.size*1024;let s=[{name:"image",icon:this.options.icons.image,suffix:["png","jpg","jpeg","bmp","gif","webp","svg","tiff"]},{name:"video",icon:this.options.icons.video,suffix:["mp4","mpeg","avi","wmv","mov","m4v","flv","rmvb","3gp"]},{name:"audio",icon:this.options.icons.audio,suffix:["mp3","wma","m4a","ogg"]}];axIsEmpty(this.options.fileType)?this.fileTypes=[...s]:this.fileTypes=[...this.options.fileType,...s],this.files=[],this.details=[],this.history=[],this.value=[],this.inputValue="",this.summary=axAddElem("div",{summary:""}),this.init()}init(){return axInstance.push(this,this.options.insName,"upload"),this.createTips(),this.createButton(),this.createSkeleton(),this.setAttribute(),"beautify"!=this.options.type&&(this.chooseBtn.onclick=(()=>{this.inputFile.click()}),this.readyUpload(),this)}createTips(){this.tipsText="",this.options.size&&(this.tipsText+=`要求大小不超过${this.options.size}MB,`),this.options.min&&(this.tipsText+=`至少上传${this.options.min}个文件,`),this.options.max&&(this.tipsText+=`最多上传${this.options.max}个文件`),this.tips=axAddElem("div",{tips:""},this.tipsText)}createButton(){"gallery"==this.options.type?this.chooseBtn=axAddElem("div",Object.assign({choose:""},this.options.boxBtn.props),this.options.boxBtn.icon+"<div text>"+this.options.boxBtn.text+"</div>"):"picture"==this.options.type?this.chooseBtn=axAddElem("li",Object.assign(this.options.cubeBtn.className?{class:this.options.cubeBtn.className}:{choose:""},this.options.cubeBtn.props),this.options.cubeBtn.icon+this.options.cubeBtn.text):this.chooseBtn=axAddElem("a",Object.assign({href:"###",class:this.options.chooseBtn.className?"ax-btn "+this.options.chooseBtn.className:"ax-btn",choose:""},this.options.chooseBtn.props),this.options.chooseBtn.icon+this.options.chooseBtn.text)}createSkeleton(){if(this.targetDom?"INPUT"==this.targetDom.nodeName&&"file"==this.targetDom.type?(this.inputFile=this.targetDom,this.inputFile.name&&this.inputFile.setAttribute("name",this.name),this.parent=axAddElem("div",{class:"ax-upload"}),this.inputFile.insertAdjacentElement("beforeBegin",this.parent)):"INPUT"!=this.targetDom.nodeName||"hidden"!=this.targetDom.type&&"text"!=this.targetDom.type?(this.parent=this.targetDom,this.inputFile=axAddElem("input",{type:"file"}),this.inputText=axAddElem("input",{type:"hidden",readonly:"",name:this.name}),this.options.multiple&&this.inputFile.setAttribute("multiple","")):(this.inputText=this.targetDom,this.inputText.name&&this.inputText.setAttribute("name",this.name),this.inputText.setAttribute("readonly",""),this.inputFile=axAddElem("input",{type:"file"}),this.parent=axAddElem("div",{class:"ax-upload"}),this.inputText.insertAdjacentElement("beforeBegin",this.parent),this.options.multiple&&this.inputFile.setAttribute("multiple","")):(this.parent=axAddElem("div",{class:"ax-upload"}),this.inputFile=axAddElem("input",{type:"file"}),this.options.multiple&&this.inputFile.setAttribute("multiple",""),this.inputText=axAddElem("input",{type:"hidden",readonly:"",name:this.options.name})),this.options.mime&&this.inputFile.setAttribute("accept",this.options.mime),this.parent.appendChild(this.inputFile),"beautify"==this.options.type)this.parent.appendChild(this.inputFile),this.parent.dataset.placeholder=this.options.beautify.placeholder,this.parent.dataset.text=this.options.beautify.text,this.parent.classList.add(this.options.beautify.className),this.fileChange(this.parent,this.inputFile);else{this.list=axAddElem("ul"),this.parent.appendChild(this.list),this.parent.appendChild(this.inputText);let t=axAddElem("div",{info:""}),e=axAddElem("div",{footer:""},t);if(this.options.tipsShow&&this.tipsText&&(t.appendChild(this.tips),this.parent.setAttribute("withtips","")),this.options.summaryShow&&(t.appendChild(this.summary),this.summary.innerHTML=this.getSummary(),this.parent.setAttribute("withtips","")),"gallery"==this.options.type)this.createCtrlv(),this.parent.appendChild(e),this.parent.insertAdjacentElement("afterBegin",this.chooseBtn),this.list.classList.add("ax-grid","ax-space-xs"),this.options.columns&&this.list.classList.add("ax-grid-"+this.options.columns),this.options.clearBtn.show&&(this.clearBtn=axAddElem("a",Object.assign({href:"###",class:this.options.clearBtn.className?"ax-btn "+this.options.clearBtn.className:"ax-btn",clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),e.appendChild(this.clearBtn),this.parent.setAttribute("withtips","")),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("a",Object.assign({href:"###",class:this.options.uploadBtn.className?"ax-btn "+this.options.uploadBtn.className:"ax-btn",upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),e.appendChild(this.uploadBtn),this.parent.setAttribute("withtips",""));else if("picture"==this.options.type)this.parent.appendChild(e),this.list.appendChild(this.chooseBtn),this.options.clearBtn.show&&(this.clearBtn=axAddElem("li",Object.assign({class:this.options.clearBtn.className,clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),this.chooseBtn.insertAdjacentElement("afterEnd",this.clearBtn)),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("li",Object.assign({class:this.options.uploadBtn.className,upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),this.chooseBtn.insertAdjacentElement("afterEnd",this.uploadBtn));else{let t=axAddElem("div",{header:""});this.list.insertAdjacentElement("beforeBegin",e),this.parent.insertAdjacentElement("afterBegin",t),t.appendChild(this.chooseBtn),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("a",Object.assign({href:"###",class:this.options.uploadBtn.className?"ax-btn "+this.options.uploadBtn.className:"ax-btn",upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),t.appendChild(this.uploadBtn)),this.options.clearBtn.show&&(this.clearBtn=axAddElem("a",Object.assign({href:"###",class:this.options.clearBtn.className?"ax-btn "+this.options.clearBtn.className:"ax-btn",clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),t.appendChild(this.clearBtn))}}}createCtrlv(){this.options.pastable&&(this.ctrlv=axAddElem("i",{ctrlv:""},this.options.pastable.before),this.parent.appendChild(this.ctrlv),this.parent.onclick=(()=>{this.ctrlv.innerHTML=this.options.pastable.ing}),this.parent.onmouseleave=(()=>{this.ctrlv.innerHTML=this.options.pastable.before}))}sizeStr(t){let e="";return e=t/1024>=1024?"<i>"+(t/1048576).toFixed(2)+"</i>MB":t/1024>=1?"<i>"+(t/1024).toFixed(2)+"</i>KB":"<i>"+t+"</i>B",e}getSummary(){let t,e=0,s=this.details.length,i=this.details.filter(t=>"uploaded"==t.progress),o=i.length;return i.forEach(t=>{e+=t.file.size}),t=this.sizeStr(e),`提交了<i>${s}</i>个文件,成功上传了<i>${o}</i>个,共${t}`}createItem(t,e){let s="";s="gallery"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <div file>\n                    <div overlay>\n                        <i view class="ax-iconfont ax-icon-zoomin"></i>\n                        <a down href="###" class="ax-iconfont ax-icon-download"></a>\n                        <i remove class="ax-iconfont ax-icon-trash"></i>\n                    </div>\n                    <div track><div bar></div></div>\n                    <i percent></i>\n                    <div message>${e&&!e.valid?e.message:""}</div>\n                </div>\n                <div info>\n                    <div title>${t.name}</div>\n                    <div size>${this.sizeStr(t.size)}</div>\n                    <div url></div>\n                </div>\n            </li>\n            `:"picture"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <div file></div>\n                <div overlay>\n                    <i view class="ax-iconfont ax-icon-zoomin"></i>\n                    <a down href="###" class="ax-iconfont ax-icon-download"></a>\n                    <i remove class="ax-iconfont ax-icon-trash"></i>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <div message>${e&&!e.valid?e.message:""}</div>\n            </li>\n            `:"info"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <a href="###" file></a>\n                <div info>\n                    <a href="###" title>${t.name}</a>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <i message>${e&&!e.valid?e.message:""}</i>\n                <i remove class="ax-iconfont ax-icon-trash"></i>\n            </li>\n            `:`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <i icon class="${this.options.icons.attach}"></i>\n                <div info>\n                    <a href="###" title>${t.name}</a>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <i message>${e&&!e.valid?e.message:""}</i>\n                <i remove class="ax-iconfont ax-icon-trash"></i>\n            </li>\n            `;let i=axStrToDom(s),o=i.querySelector("[file]");return o&&this.fillHeader(t,o),"picture"==this.options.type?this.chooseBtn.insertAdjacentElement("beforeBegin",i):this.list.appendChild(i),i}fileChange(t,e){let s,i=this,o=t.getAttribute("data-text"),a=t.getAttribute("data-placeholder");o||t.classList.add("ax-simple"),e.classList.contains("ax-xs")?t.classList.add("ax-xs"):e.classList.contains("ax-sm")?t.classList.add("ax-sm"):e.classList.contains("ax-lg")&&t.classList.add("ax-lg"),this.options.beautify.display&&(s=axIdToDom(this.options.beautify.display)),e.addEventListener("change",function(){t.classList.add("ax-active"),t.setAttribute("data-placeholder",this.value.replace(/.*(\/|\\)/,"")),this.value||(t.setAttribute("data-placeholder",a),t.classList.remove("ax-active")),[...this.files].length>0&&([...this.files].forEach(t=>{i.value.push({name:t.name,size:t.size,time:t.lastModified,url:""})}),s&&(s.innerHTML="",[...this.files].forEach(t=>{t.type.startsWith("image")&&i.readFile(t,t=>{s.appendChild(axAddElem("img",{src:t}))})}))),i.options.beautify.callback&&i.options.beautify.callback.call(i,this.files),i.options.onChange&&i.options.onChange.call(i,this.files),"changed"in i.handlers&&i.emit("changed",this.files),i.options.onChanged&&i.options.onChanged.call(i,this.files)},!1),e.onfocus=(()=>{t.classList.add("ax-focus")}),e.onblur=(()=>{t.classList.remove("ax-focus")})}setAttribute(){this.options.type&&this.parent.setAttribute("type",this.options.type),this.options.pastable&&this.parent.setAttribute("pastable",""),this.parent.setAttribute("state","ready")}readyUpload(){this.inputFile.addEventListener("change",()=>{let t=[...this.inputFile.files];this.renderList(t),this.inputFile.value="","changed"in this.handlers&&this.emit("changed",t),this.options.changed&&this.options.changed.call(this,t)},!1),this.options.pastable&&this.parent.addEventListener("paste",t=>{let e=t.clipboardData?t.clipboardData:window.clipboardData;if(e){let t=e.items[0];t&&"file"===t.kind&&t.type.includes("image")&&(this.renderList([t.getAsFile()]),this.ctrlv&&(this.ctrlv.innerHTML=this.options.pastable.after)),"pasted"in this.handlers&&this.emit("pasted",t),this.options.onPasted&&this.options.onPasted.call(this,t)}},!1),this.parent.addEventListener("dragleave",t=>{t.preventDefault(),this.parent.removeAttribute("drag")}),this.parent.addEventListener("dragover",t=>{t.preventDefault()}),this.parent.addEventListener("dragenter",t=>{t.preventDefault(),this.parent.setAttribute("drag","")}),this.parent.addEventListener("drop",t=>{t.preventDefault(),this.parent.removeAttribute("drag");let e=t.dataTransfer.items;for(let t=0;t<e.length;t++){let s=e[t];if("file"===s.kind){let t=s.webkitGetAsEntry();this.getEntries(t)}}"dropped"in this.handlers&&this.emit("dropped",e),this.options.onDropped&&this.options.onDropped.call(this,e)},!1),this.clearBtn&&(this.clearBtn.onclick=(()=>{if(0==this.details.length)return!1;this.options.onBeforeClear?this.options.onBeforeClear.call(this):this.clear.call(this)}))}renderItem(t){let e,s=this.fileValid(t),i={file:t,state:s},o=(t,e)=>{t.dom=e,t.progress="rendered",e.setAttribute("progress","rendered")};s.valid?(this.files.push(t),e=this.createItem(t)):e=this.createItem(t,s),o(i,e),this.details.push(i);let a=e.querySelector("[remove]");return a&&(a.onclick=(()=>{this.options.onBeforeRemove?this.options.onBeforeRemove.call(this,i):this.remove(i.file)})),"rendered"in this.handlers&&this.emit("rendered",i),this.options.onRendered&&this.options.onRendered.call(this,i),e}getEntries(t){if(t.isFile)t.file(t=>this.renderList([t]));else{let e=t.createReader();e.readEntries(t=>{t.forEach(t=>this.getEntries(t))})}}renderList(t,e){if(0==t.length)return!1;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(0==this.history.length)this.history.push(s),this.renderItem(s);else{if(!this.history.every(t=>t.name!=s.name&&t.size!=s.size))continue;this.history.push(s),this.renderItem(s)}}"auto"==this.options.action?this.upload():this.uploadBtn&&(this.uploadBtn.onclick=(()=>{this.upload()})),this.parent.setAttribute("state","processing"),e&&e.call(this)}upload(t){if(!this.options.url)return console.error("The url is required!"),!1;let e=this.globalValid();if(!e.valid)return new axMessage({content:e.message,result:"error"}).show(),!1;let s=this.getUploadingFiles();if(this.options.onBeforeUpload&&!this.options.onBeforeUpload.call(this,s))return!1;s.forEach(t=>{this.uploadFile(t)}),"uploading"in this.handlers&&this.emit("uploading",""),this.options.onUploading&&this.options.onUploading.call(this),t&&t.call(this)}getUploadingFiles(){return this.details.filter(t=>t.state.valid&&"uploaded"!=t.progress)}activeOperate(t,e,s,i){e.setAttribute("valid","success"),e.setAttribute("progress","uploaded"),e.querySelector("[state]")||e.querySelector("[percent]").insertAdjacentHTML("afterend",'<i state class="ax-iconfont ax-icon-check"></i>'),this.options.cloud&&(s=this.options.cloud.server+s);let o=e.querySelector("[down]"),a=e.querySelector("[view]");if(o&&(this.options.cloud?o.onclick=(()=>{this.downloadFile(s,t.name)}):(o.setAttribute("download",""),o.setAttribute("href",s))),a){let e={media:s,caption:i,type:""};"image"==this.h5Type(t)?e.type="image":"video"==this.h5Type(t)?e.type="video":"audio"==this.h5Type(t)&&(e.type="audio"),e.type&&(a.onclick=function(){new axLightbox({src:e}).init().show()})}if("text"==this.options.type||"info"==this.options.type){let t=e.querySelector("[title]"),i=e.querySelector("[file]");t.setAttribute("href",s),t.setAttribute("target","_blank"),i&&(i.setAttribute("href",s),i.setAttribute("target","_blank"))}}downloadFile(t,e){let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="blob",s.onload=function(){let t=window.URL.createObjectURL(s.response),i=axAddElem("a");i.href=t,i.download=e,i.click()},s.send()}uploadFile(t){let e=new FormData,s=t.file,i=t.dom,o=t.state.valid,a=(t,e,i,o)=>{t?this.activeOperate(s,o,e,s.name):(o.setAttribute("valid","error"),o.querySelector("[message]").innerText=i),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary())};if(!o||"uploaded"==t.progress)return!1;if(t.progress="uploading",i.setAttribute("progress","uploading"),this.options.cloud){e.append(this.options.cloud.field?this.options.cloud.field:"file",s);for(let t in this.options.cloud.append)e.append(t,this.options.cloud.append[t])}else e.append(this.name?this.name:"file",s);axAjax({url:this.options.url,data:e,uploading:e=>{i.querySelector("[percent]").innerText=e.result,i.querySelector("[bar]").style.width=e.result,e.percent>=100&&(i.setAttribute("completed",""),t.completed=!0,this.handlers.hasOwnProperty("completed")&&this.emit("completed",t),this.options.onCompleted&&this.options.onCompleted.call(this,t),this.details.every(t=>t.state.valid&&t.completed)&&(this.handlers.hasOwnProperty("allCompleted")&&this.emit("allCompleted",""),this.options.onAllCompleted&&this.options.onAllCompleted.call(this)))},success:e=>{let o,n="",r="",l=0,h=0,d=(t,e)=>{if(!e)return"";if(!e.includes("."))return t[e];let s,i=e.split(".");return s=1==i.length?t[i[0]]:2==i.length?t[i[0]][i[1]]:"",s};if(this.options.cloud){let t=this.options.cloud.keys;r=d(e.content,t.url),l=d(e.content,t.size),h=d(e.content,t.time),n=d(e.content,t.message),o=this.options.cloud.code==e.content.code}else r=e.content.url,l=s.size,h=e.content.time,n=e.content.message,o=!0===e.content.valid;t.state.valid=o,t.state.time=h,t.state.url=r,t.state.message=n,o?(this.value.push({name:s.name,url:r,size:l,time:h}),this.valueToValue(this.value),t.progress="uploaded",
this.handlers.hasOwnProperty("uploaded")&&this.emit("uploaded",t,e.content),this.options.onUploaded&&this.options.onUploaded.call(this,t,e.content),this.details.every(t=>t.state.valid&&"uploaded"==t.progress)&&(this.handlers.hasOwnProperty("allUploaded")&&this.emit("allUploaded",e.content),this.options.onAllUploaded&&this.options.onAllUploaded.call(this,t,e.content))):(this.files=this.files.filter(t=>t!=s),this.handlers.hasOwnProperty("error")&&this.emit("error",t,e.content),this.options.onError&&this.options.onError.call(this,t,e.content)),a(o,r,n,i)},error:()=>{a(!1,"",this.options.message.failed,i)}})}valueToValue(t){let e=[];t.forEach(t=>{e.push(t.url)}),this.inputValue=e.join(this.options.separator),this.inputText&&(this.inputText.value=this.inputValue,this.inputText.onchange&&this.inputText.onchange())}getSuffix(t){return t.name.substring(t.name.lastIndexOf(".")+1)}h5Type(t){let e;return t.type.startsWith("image")?e="image":["mp4","ogg","webm"].includes(this.getSuffix(t))?e="video":["mp3","ogg","wav"].includes(this.getSuffix(t))&&(e="audio"),e}readFile(t,e){let s=new FileReader;s.readAsDataURL(t),s.onload=(t=>{e(t.target.result)})}fillHeader(t,e){let s,i=this.h5Type(t),o=this.fileTypes.filter(e=>e.suffix.includes(this.getSuffix(t)))[0];"image"==i?this.readFile(t,t=>{s=axAddElem("img",{src:t}),e.appendChild(s)}):"video"==i?this.readFile(t,t=>{s=axAddElem("video",{src:t,controls:""}),e.appendChild(s)}):"audio"==i?this.readFile(t,t=>{s=axAddElem("audio",{src:t,controls:""}),e.appendChild(s)}):(s=axAddElem("i",{class:o?o.icon:this.options.icons.file,icon:""}),e.appendChild(s))}fileValid(t){let e=this.options.message.passed,s=!0,i=this.getSuffix(t);return this.history.length>this.options.max&&this.options.max?(e=this.options.message.exceeded,s=!1):this.history.length<this.options.min&&this.options.min?(e=this.options.message.exceeded,s=!1):this.sizeLimit&&t.size>this.sizeLimit?(e=this.options.message.tooLarge,s=!1):this.options.accept.includes(i)||(e=this.options.message.errorSuffix,s=!1),{valid:s,message:e}}globalValid(){let t=this.options.message.passed,e=!0;return this.history.length<this.options.min?(t=`请至少上传${this.options.min}个文件!`,e=!1):this.history.length<this.options.min&&(t=`最多只能上传${this.options.max}个文件!`,e=!1),{valid:e,message:t}}remove(t,e){this.history=this.history.filter(e=>e!=t),this.files=this.files.filter(e=>e!=t);let s=this.details.find(e=>e.file==t),i=t.name,o=t.size,a=s.state.url,n=s.state.time;s.dom.remove(),this.details=this.details.filter(e=>e.file!=t),0==this.details.length&&this.parent.setAttribute("state","ready"),this.value=this.value.filter(t=>t.time!=n),this.valueToValue(this.value),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary()),this.options.onRemove&&this.options.onRemove.call(this,a,i,o),"remove"in this.handlers&&this.emit("remove",a,i,o),e&&e.call(this,a,i,o)}clear(t){return this.details.forEach(t=>{t.dom.remove()}),this.details=[],this.history=[],this.files=[],this.value=[],this.valueToValue(this.value),this.parent.setAttribute("state","ready"),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary()),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear",""),t&&t.call(this),this}getUrlFile(t,e,s){axAjax({url:t,type:"get",responseType:"blob",headers:{Accept:""},success:t=>{let i=new File([t.content],e,{type:t.content.type});s&&s(i)}})}show(t){let e=[];if("string"==typeof t){let s=t.trim().split(",");s.forEach(t=>{let s={url:t,name:t};e.push(s)})}else Array.isArray(t)&&"string"==typeof t[0]?t.forEach(t=>{let s={url:t,name:t};e.push(s)}):e=t;return 0!=e.length&&(this.parent.setAttribute("state","processing"),e.forEach(t=>{this.getUrlFile(t.url,t.name,e=>{this.history.push(e);let s=this.renderItem(e),i=this.details.find(t=>t.file==e);i.progress="uploaded",i.state.message=this.options.message.success,i.state.url=t.url,i.state.time=t.time||e.lastModified,this.activeOperate(e,s,t.url,t.name||t.url),s.setAttribute("completed",""),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary())})}),this.details.forEach(t=>{let e={name:t.file.name,url:t.state.url,size:t.file.size,time:t.state.time};this.value.push(e)}),this.valueToValue(this.value),this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axMessages=[];class axMessage{constructor(t){this.options=axExtend({insName:"",className:"",placement:"center-top",content:"",result:"info",delay:3e3,progress:!0,title:{warning:"操作警告！",success:"操作成功！",error:"操作失败！",question:"操作疑问！",info:"信息提示！"},close:!1,iconShow:!1,style:"simple",zIndex:0,icon:"",onShown:"",onHidden:"",onUpdated:""},t),this.handlers={},this.init()}init(){if(axInstance.push(this,this.options.insName,"message"),"simple"!=this.options.style&&this.options.style){if("complex"==this.options.style)switch(this.options.result){case"success":this.options.icon=axIcon.svg.success;break;case"error":this.options.icon=axIcon.svg.error;break;case"question":this.options.icon=axIcon.svg.question;break;case"warning":this.options.icon=axIcon.svg.warning;break;default:this.options.icon=axIcon.svg.info}}else switch(this.options.result){case"success":this.options.icon=axIcon.font.success,!this.options.content&&(this.options.content=this.options.title.success);break;case"error":this.options.icon=axIcon.font.error,!this.options.content&&(this.options.content=this.options.title.error);break;case"question":this.options.icon=axIcon.font.question,!this.options.content&&(this.options.content=this.options.title.question);break;case"warning":this.options.icon=axIcon.font.warning,!this.options.content&&(this.options.content=this.options.title.warning);break;default:this.options.icon=axIcon.font.info,!this.options.content&&(this.options.content=this.options.title.info)}switch("simple"!=this.options.style&&this.options.style?"complex"==this.options.style&&(this.template=axTplEngine('\n            <section data-style="complex">\n                <div class="ax-message-content">\n                    <div class="ax-message-header">\n                    <# if(this.iconShow){ #><span class="ax-result ax-result-show" legend><# this.icon #></span><# } #>\n                    <span class="ax-message-title"><# if(this.result == \'success\'){ #> <# this.title.success #> <# }else if(this.result == \'error\'){ #> <# this.title.error #> <# }else if(this.result == \'question\'){#> <# this.title.question #> <# }else if(this.result == \'warning\'){#> <# this.title.warning #> <# } else {#> <# this.title.info #> <# } #></span></div>\n                    <div class="ax-message-body"><# this.content #></div>\n                </div>\n                <# if(this.close){ #><i close></i> <# } #>\n                <# if(this.progress){ #><div class="ax-message-progress" style="transition-duration:<# this.delay #>ms;"></div><# } #>\n            </section>\n            ',this.options)):this.template=axTplEngine('\n            <section data-style="simple">\n                <div class="ax-message-content">\n                    <# if(this.iconShow){ #><span legend><# this.icon #></span><# } #>\n                    <div class="ax-message-body"><# this.content #></div>\n                    <# if(this.close){ #><i close></i> <# } #>\n                </div>\n            </section>\n            ',this.options),this.targetDom=axStrToDom(this.template),this.contentDom=this.targetDom.querySelector(".ax-message-body"),this.titleDom=this.targetDom.querySelector(".ax-message-title"),this.closeDom=this.targetDom.querySelector("[close]"),this.progressDom=this.targetDom.querySelector(".ax-message-progress"),this.legendDom=this.targetDom.querySelector("[legend]"),this.options.result){case"success":this.targetDom.setAttribute("data-result","success");break;case"error":this.targetDom.setAttribute("data-result","error");break;case"question":this.targetDom.setAttribute("data-result","question");break;case"warning":this.targetDom.setAttribute("data-result","warning");break;default:this.targetDom.setAttribute("data-result","info")}let t="";switch(t=this.options.className?"":" "+this.options.className,this.options.close&&this.targetDom.setAttribute("data-close","true"),this.contentDom.innerHTML=this.options.content,this.wrapperDom="",this.shown=!1,this.event=(e=>{let s=axMessages.find(t=>t.position===e);s?this.wrapperDom=s.parent:(this.wrapperDom=axAddElem("div",{class:"ax-message"+t,"data-placement":e}),axMessages.push({position:e,parent:this.wrapperDom}))}),this.options.placement){case"left-top":this.event("left-top");break;case"center-top":this.event("center-top");break;case"right-top":this.event("right-top");break;case"left-center":this.event("left-center");break;case"center-center":this.event("center-center");break;case"right-center":this.event("right-center");break;case"left-bottom":this.event("left-bottom");break;case"center-bottom":this.event("center-bottom");break;case"right-bottom":this.event("right-bottom");break;case"left":this.event("left-top");break;case"top":this.event("center-top");break;case"right":this.event("right-top");break;case"center":this.event("center-center");break;default:this.event("center-top")}return this.closeDom&&(this.closeDom.onclick=(()=>{this.hide()})),this.options.zIndex&&(this.wrapperDom.style.zIndex=this.options.zIndex),axIsVnode(this.wrapperDom)&&document.body.appendChild(this.wrapperDom),this}show(t){return!this.shown&&(this.wrapperDom.appendChild(this.targetDom),axSlideDown(this.targetDom,"",()=>{this.shown=!0,this.handlers.hasOwnProperty("shown")&&this.emit("shown",""),this.options.onShown&&this.options.onShown.call(this),t&&t.call(this),this.options.close||(this.options.progress&&this.progressDom&&(this.progressDom.style.cssText+="width:0;"),setTimeout(()=>{this.hide()},this.options.delay))}),this)}hide(t){return!!this.shown&&(axSlideUp(this.targetDom,"",()=>{this.targetDom.remove(),this.shown=!1,this.handlers.hasOwnProperty("hidden")&&this.emit("hidden",""),this.options.onHidden&&this.options.onHidden.call(this),t&&t.call(this)}),this)}update(t,e){return this.targetDom.remove(),this.options=axExtend(this.options,t),this.init(),this.handlers.hasOwnProperty("updated")&&this.emit("updated",""),this.options.onUpdated&&this.options.onUpdated.call(this),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axMenu{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",theme:"light",content:"",dispose:!1,active:"",disabled:"",multiple:!1,collapseAll:!0,ajaxType:"post",zIndex:0,trigger:"click",rootStart:-1,idStart:0,arrowShow:!0,max:0,targetClass:"",addToActive:!0,gapless:!1,lamp:"",full:!1,nav:{enable:!1,headerWidth:"",bodyWidth:"",marginLeft:"",marginRight:"",align:"left"},onInit:"",onTreeCompleted:"",onPlanted:"",onTrigger:"",onAdd:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onExpand:"",onExpanded:"",onCollapse:"",onCollapsed:"",onSelected:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:"",onExpandAll:"",onCollapseAll:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.triggerShow=function(){s.toggle(this)},this.triggerSelected=(t=>{t.headerDom.setAttribute("selected",""),t.selected=!0;let e=this.flatData.filter(e=>e!==t&&e.selected&&!e.children);e.forEach(t=>{t.headerDom.removeAttribute("selected"),delete t.selected}),this.options.onSelected&&this.options.onSelected.call(this,t),"selected"in this.handlers&&this.emit("selected",t),"trigger"in this.handlers&&this.emit("trigger",t),this.options.onTrigger&&this.options.onTrigger.call(this,t),this.save()}),this.rawHTML="",this.init()}init(){if(axInstance.push(this,this.options.insName,"menu"),this.destroyed=!1,this.flatData=[],this.treeData=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.resolveSource(),this}async resolveSource(){if(axIsEmpty(this.options.content))this.targetDom.innerHTML&&(this.rawHTML=this.targetDom.innerHTML,this.treeData=this.ulToArr(),this.treeData=axTreeMethod.addPath(this.treeData,this.options.rootStart,this.options.idStart).data);else{if(this.targetDom.innerHTML="","String"===axType(this.options.content))await axTreeMethod.fullData({source:this.options.content,ajaxType:this.options.ajaxType,async:!0,rootStart:this.options.rootStart,idStart:this.options.idStart,opened:t=>{this.contentXhr=t.xhr},before:t=>{this.targetDom.innerHTML=t.content},success:()=>{this.targetDom.innerHTML=""}}).then(t=>{this.treeData=t.data});else if("Array"===axType(this.options.content)){if(0===this.options.content.length)return console.warn("Array is empty!"),!1;await axTreeMethod.fullData({source:this.options.content,rootStart:this.options.rootStart,idStart:this.options.idStart}).then(t=>{this.treeData=t.data})}this.arrayToDom(this.treeData)}this.options.onTreeCompleted&&this.options.onTreeCompleted.call(this,this.treeData),"treeCompleted"in this.handlers&&this.emit("treeCompleted",this.treeData),this.processDataFormat(this.treeData)}processDataFormat(t){this.flatData=axArrToFlat(t),this.initParms(),this.renderFinish(),this.options.onInit&&this.options.onInit.call(this),"init"in this.handlers&&this.emit("init","")}initParms(){this.initAttribute(),this.initActive(),this.initDisabled()}ulToArr(){let t=[],e=this.options.idStart,s=(t,i)=>{let o={},a=t.querySelector("ul");return o.id=i,o.wrapperDom=t,o.headerDom=t.firstElementChild,o.labelDom=o.headerDom.querySelector("[label]"),o.label=o.labelDom.textContent.trim(),o.tipDom=o.headerDom.querySelector("[tip]"),o.tip=o.tipDom?o.tipDom.textContent.trim():"",o.url=o.labelDom.href&&!o.labelDom.href.includes("##")?o.labelDom.href:"",o.target=o.labelDom.target,o.arrowDom=o.headerDom.querySelector("[arrow]"),o.legendDom=o.headerDom.querySelector("[legend]"),o.legendDom&&(o.legend=o.legendDom.getAttribute("class")),t.hasAttribute("expanded")&&(o.expanded=!0),o.headerDom.hasAttribute("selected")&&(o.selected=!0),o.headerDom.hasAttribute("disabled")&&(o.disabled=!0),a&&(o.children=[],o.bodyDom=a,[...a.children].forEach(t=>{e++,o.children.push(s(t,e))})),o},i=()=>{[...this.targetDom.children].forEach(i=>{t.push(s(i,e)),e++})};return i(),t}childToParent(t){return t.headerDom.onclick=null,t.expanded=!0,t.wrapperDom.setAttribute("expanded",""),t.arrowDom=this.options.arrowShow&&t.children?axAddElem("i",{arrow:"",class:"ax-iconfont ax-icon-right"}):null,t.headerDom.appendChild(t.arrowDom),t.bodyDom=axAddElem("ul",{style:"display:block"}),t}createHeaderDom(t){t.labelDom=axAddElem(t.url?"a":"i",{label:""},t.label),t.url&&(t.labelDom.href=t.url),t.target&&(t.labelDom.target=t.target),t.legendDom=t.legend?axAddElem("i",{legend:"",class:`ax-iconfont ${t.legend}`}):null,t.arrowDom=this.options.arrowShow&&t.children?axAddElem("i",{arrow:"",class:"ax-iconfont ax-icon-right"}):null,t.headerDom=axAddElem("div"),t.tipDom=t.tip?axAddElem("i",{tip:""},t.tip):null,t.wrapperDom=axAddElem("li"),t.wrapperDom.appendChild(t.headerDom),t.legendDom&&t.headerDom.appendChild(t.legendDom),t.headerDom.appendChild(t.labelDom),t.tipDom&&t.headerDom.appendChild(t.tipDom),t.arrowDom&&t.headerDom.appendChild(t.arrowDom)}arrayToDom(t){let e=axAddElem("ul"),s=document.createDocumentFragment(),i=(t,e)=>{let s=axAddElem("ul");return e.forEach(t=>{this.createHeaderDom(t),t.hasOwnProperty("children")&&(t.bodyDom=i(t.wrapperDom,t.children)),s.appendChild(t.wrapperDom)}),t.appendChild(s),s};i(e,t);let o=e.childNodes[0].childNodes;[...o].forEach(t=>{s.appendChild(t)}),this.targetDom.appendChild(s),this.options.onPlanted&&this.options.onPlanted.call(this),"planted"in this.handlers&&this.emit("planted","")}initAttribute(){if(!this.targetDom.classList.contains("ax-menu")&&this.targetDom.classList.add("ax-menu"),this.options.targetClass&&axClass.add(this.targetDom,this.options.targetClass),this.targetDom.setAttribute("theme",this.options.theme),this.options.gapless&&this.targetDom.setAttribute("gapless",""),this.options.lamp&&this.targetDom.setAttribute("lamp",this.options.lamp),this.options.full&&!this.options.nav.enable&&this.targetDom.setAttribute("full",""),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),this.options.nav.enable){if(this.targetDom.setAttribute("nav",""),this.options.nav.align&&this.targetDom.setAttribute("align",this.options.nav.align),this.options.nav.headerWidth){let t=this.flatData.filter(t=>1===t.floor);t.forEach(t=>{t.wrapperDom.style.width=this.options.nav.headerWidth})}this.options.nav.bodyWidth&&this.flatData.forEach(t=>{t.bodyDom&&(t.bodyDom.style.width=this.options.nav.bodyWidth)}),this.options.nav.marginLeft&&this.flatData.filter(t=>1===t.floor).forEach(t=>{t.wrapperDom.style.marginLeft=this.options.nav.marginLeft}),this.options.nav.marginRight&&this.flatData.filter(t=>1===t.floor).forEach(t=>{t.wrapperDom.style.marginRight=this.options.nav.marginRight})}}getPathIds(t){if(0===t.length)return[];let e=[],s=this.options.multiple?t:t.slice(0,1);return s.forEach(t=>{let s,i=axFindItem(t,this.flatData);i&&(s=i.path.split(">"),e.push(...s))}),[...new Set(e)].map(t=>parseInt(t))}initActive(){if(0===this.flatData.length)return!1;if(this.options.multiple&&!this.options.collapseAll)this.expandAll();else{let t,e=""!==this.options.active?axValueToArr(this.options.active):[];e.push(...this.flatData.filter(t=>t.selected),...this.flatData.filter(t=>t.expanded)),t=this.getPathIds(e),this.flatData.forEach(e=>{t.includes(e.id)&&(e.children?this.expand(e):this.triggerSelected(e))})}}initDisabled(){if(0===this.flatData.length)return!1;let t=this.flatData.filter(t=>t.disabled),e=""!==this.options.disabled?axValueToArr(this.options.disabled):[];e.push(...t),e.forEach(t=>{let e=axFindItem(t,this.flatData);e&&(e.disabled=!0,e.headerDom.setAttribute("disabled",""))})}renderFinish(){this.options.dispose||this.flatData.forEach(t=>{if(t.children){if(!t.disabled){let e=t.url&&t.arrowDom?t.arrowDom:t.headerDom;"click"===this.options.trigger?e.addEventListener(this.options.trigger,this.triggerShow,!1):"hover"===this.options.trigger&&(this.hover=new axHover(t.wrapperDom,{enter:()=>{this.expand(t),"trigger"in this.handlers&&this.emit("trigger",t),this.options.onTrigger&&this.options.onTrigger.call(this,t)},leave:()=>{this.collapse(t)}}))}}else t.disabled||(t.headerDom.onclick=(()=>{this.triggerSelected(t)}));t.callback&&t.callback.call(this,t)}),this.save()}workToggle(t,e="disable"){let s=t.url&&t.arrowDom?t.arrowDom:t.headerDom;"enable"===e?(t.disabled&&delete t.disabled,t.headerDom.removeAttribute("disabled"),t.children?s.addEventListener(this.options.trigger,this.triggerShow,!1):t.headerDom.onclick=(()=>{this.triggerSelected(t)})):"disable"===e&&(t.disabled=!0,t.headerDom.setAttribute("disabled",""),t.children?s.removeEventListener(this.options.trigger,this.triggerShow,!1):t.headerDom.onclick=null),this.save()}getDisabled(){return this.flatData.filter(t=>t.disabled)}getExpanded(){return this.flatData.filter(t=>t.expanded)}getActive(){return this.flatData.filter(t=>t.expanded||t.selected)}getSelected(){return this.flatData.find(t=>t.selected)}collapseAll(t){if(this.destroyed)return this;this.flatData.filter(t=>t.expanded).forEach(t=>{this.collapse(t)}),"collapseAll"in this.handlers&&this.emit("collapseAll",""),this.options.onCollapseAll&&this.options.onCollapseAll.call(this),t&&t.call(this)}expandAll(t){if(this.destroyed||!this.options.multiple)return this;this.flatData.forEach(t=>{this.expand(t)}),"expandAll"in this.handlers&&this.emit("expandAll",""),this.options.onExpandAll&&this.options.onExpandAll.call(this),t&&t.call(this)}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.flatData);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save();let i=this.flatData.filter(t=>t.disabled);"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.flatData),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.flatData);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save();let i=this.flatData.filter(t=>!t.disabled);"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.flatData),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}toggle(t){let e=axFindItem(t,this.flatData)||axFindItem(t,this.flatData,{dom:"arrowDom"});e.expanded?this.collapse(e):this.expand(e),"trigger"in this.handlers&&this.emit("trigger",e),this.options.onTrigger&&this.options.onTrigger.call(this,e)}collapse(t,e){let s=axType(t),i="Object"===s?t:axFindItem(t,this.flatData);if(!i||!i.children)return!1;"collapse"in this.handlers&&this.emit("collapse",i),this.options.onCollapse&&this.options.onCollapse.call(this,i),delete i.expanded,i.wrapperDom.removeAttribute("expanded"),axSlideUp(i.bodyDom,"",()=>{"collapsed"in this.handlers&&this.emit("collapsed",i),this.options.onCollapsed&&this.options.onCollapsed.call(this,i),e&&e.call(this,i)}),this.save()}expand(t,e){if(this.destroyed)return this;let s,i=axFindItem(t,this.flatData);!axIsEmpty(i)&&i.children&&("expand"in this.handlers&&this.emit("expand",i),this.options.onExpand&&this.options.onExpand.call(this,i),i.expanded=!0,i.wrapperDom.setAttribute("expanded",""),axSlideDown(i.bodyDom,"",()=>{"expanded"in this.handlers&&this.emit("expanded",i),this.options.onExpanded&&this.options.onExpanded.call(this,i),e&&e.call(this,i)}),this.options.multiple||(s=this.flatData.filter(t=>t!==i&&t.expanded&&t.floor===i.floor&&t.children),s.forEach(t=>{this.collapse(t)})),this.save())}active(t,e){if(this.destroyed)return this;let s=[],i=[],o=t=>{let e=axFindItem(t,this.flatData);if(e){let t=e.path.split(">").map(t=>parseInt(t));t.forEach(t=>{this.expand(t)}),e.children||this.triggerSelected(e)}};s=Array.isArray(t)?this.options.multiple?t:t.slice(0,1):[t],i=s.map(t=>axFindItem(t,this.flatData)).filter(Boolean),s.forEach(t=>{o(t)}),"active"in this.handlers&&this.emit("active",i),this.options.onActive&&this.options.onActive.call(this,i),e&&e.call(this,i),this.save()}add(t,e,s=!1,i=!1,o){if(this.destroyed)return this;if(this.flatData.length>=this.options.max&&0!==this.options.max)return console.warn("The number of children exceeds the maximum!"),!1;let a=axType(t),n=[],r=(t,e,s,i)=>{let o;t.hasOwnProperty("pId")&&t.pId!==this.options.rootStart?(o=axFindItem(t.pId,this.flatData),s=!0):void 0===e||"end"===e?o=this.flatData.filter(t=>1===t.floor).slice(-1)[0]:"start"===e?(o=this.flatData.filter(t=>1===t.floor)[0],i=!0):o=axFindItem(e,this.flatData);let a=axTreeMethod.createData(t,o,this.flatData,s);if(this.createHeaderDom(a),s)o.children?axTreeMethod.existChildPush(a,o):axTreeMethod.noExistChildPush(a,o,()=>this.childToParent(o));else{let t=this.flatData.find(t=>t.id==o.pId),e=t?t.children:this.treeData,s=e.indexOf(o);i?(0==s?e.unshift(a):e.splice(s,0,a),o.wrapperDom.insertAdjacentElement("beforeBegin",a.wrapperDom)):(e.splice(s+1,0,a),o.wrapperDom.insertAdjacentElement("afterEnd",a.wrapperDom))}this.flatData.push(a),n.push(a)};if("Array"===a&&t.length>0?t.forEach(t=>{r(t,e,s,i)}):r(t,e,s,i),n.length>0){if(this.options.addToActive)if(this.options.multiple)n.forEach(t=>{t.children&&this.expand(t)});else{let t=n[n.length-1];t.children&&this.expand(t)}this.renderFinish()}return"add"in this.handlers&&this.emit("add",n),this.options.onAdd&&this.options.onAdd.call(this,n),o&&o.call(this,n),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.flatData.length)return console.warn("The data is already empty!"),!1;let s=t=>{let e,s=axFindItem(t,this.flatData);s&&(e=axTreeMethod.remove(s,this.flatData,this.treeData),this.flatData=e.flat,this.treeData=e.tree)};return Array.isArray(t)?t.forEach(t=>{s(t)}):s(t),this.save(),"remove"in this.handlers&&this.emit("remove",""),this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout(()=>{let s=[...this.flatData.filter(t=>t.selected),...this.flatData.filter(t=>t.expanded)].filter(Boolean).map(t=>t.id),i=this.flatData.filter(t=>t.disabled).map(t=>t.id);t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.flatData),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.flatData});let o=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",o),this.options.onSave&&this.options.onSave.call(this,o),e&&e.call(this,o),this},0)}destroy(t){return this.flatData.forEach(t=>{let e=t.url&&t.arrowDom?t.arrowDom:t.headerDom;e.removeEventListener(this.options.trigger,this.triggerShow),e.onclick=null,t.headerDom.onclick=null}),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.flatData);return i&&("String"===axType(e)?(i.label=e,i.labelDom.innerHTML=e):"Object"===axType(e)&&(e.label&&(i.label=e.label,i.labelDom.innerHTML=e.label),e.url&&i.url&&(i.url=e.url,i.labelDom.href=e.url),e.target&&i.url&&(i.target=e.target,i.labelDom.target=e.target)),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i),this.save()),this}update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.targetDom.innerHTML=this.rawHTML?this.rawHTML:"",this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this),this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axSticks=[];class axStick{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",refer:"body",space:"0px",width:"",zIndex:""},e,this.targetDom,this.constructor.name),this.handlers={},this.height=this.targetDom.offsetHeight,this.width=this.targetDom.offsetWidth,this.left=axOffset(this.targetDom).left,this.top=axOffset(this.targetDom).top,this.bottom=axOffset(this.targetDom).top+this.height,this.style=this.targetDom.getAttribute("style"),this.placeholder=axAddElem("DIV",{style:`width:${this.width}px;height:${this.height}px;display:none;`}),this.targetDom.insertAdjacentElement("beforebegin",this.placeholder),this.init(),this}init(){return axInstance.push(this,this.options.insName,"stick"),this.refer=this.targetDom.closest(this.options.refer),this.referHeight=this.refer.offsetHeight,this.referWidth=this.refer.offsetWidth,this.referLeft=axOffset(this.refer).left,this.referTop=axOffset(this.refer).top,this.referBottom=axOffset(this.refer).top+this.referHeight,"body"===this.options.refer||"fixed"===getComputedStyle(this.refer).position&&"absolute"===getComputedStyle(this.refer).position||(this.refer.style.position="relative"),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),"none"!==getComputedStyle(this.targetDom).float&&(this.placeholder.style.float=getComputedStyle(this.targetDom).float),window.addEventListener("scroll",()=>{this.height>window.innerHeight?this.bottom<document.documentElement.scrollTop+window.innerHeight&&this.referBottom>document.documentElement.scrollTop+window.innerHeight?(this.targetDom.style.cssText+=`width:${this.targetDom.offsetWidth}px;`,this.targetDom.style.cssText+=`left:${axOffset(this.targetDom).left}px;`,this.targetDom.style.cssText+=`position:fixed;bottom:${this.options.space};margin:0;`,this.placeholder.style.display="block","sticked"in this.handlers&&this.emit("sticked","fixed")):this.referBottom<document.documentElement.scrollTop+window.innerHeight?(this.targetDom.style.position="absolute",this.targetDom.style.left=this.left-this.referLeft+"px",this.targetDom.style.cssText+=`position:absolute;bottom:${this.options.space};margin:0;`,this.placeholder.style.display="none","sticked"in this.handlers&&this.emit("sticked","absolute")):axOffset(this.refer).top>document.documentElement.scrollTop&&(this.targetDom.setAttribute("style",this.style),this.placeholder.style.display="none","unsticked"in this.handlers&&this.emit("unsticked","")):this.top<document.documentElement.scrollTop?(this.options.width?(this.targetDom.style.cssText+=`width:${this.options.width};`,this.targetDom.style.cssText+=`left:calc(50% - ${this.options.width}/2);`):(this.targetDom.style.cssText+=`width:${this.targetDom.offsetWidth}px;`,this.targetDom.style.cssText+=`left:${this.left}px;`),this.targetDom.style.cssText+=`position:fixed;top:${this.options.space};bottom:auto;margin:0;`,this.placeholder.style.display="block","sticked"in this.handlers&&this.emit("sticked","fixed"),this.height>this.referBottom-document.documentElement.scrollTop&&(this.targetDom.style.position="absolute",this.targetDom.style.left=this.left-this.referLeft+"px",this.targetDom.style.top="auto",this.targetDom.style.bottom=0,"sticked"in this.handlers&&this.emit("sticked","absolute"))):(this.targetDom.setAttribute("style",this.style),this.placeholder.style.display="none","unsticked"in this.handlers&&this.emit("unsticked",""))},!1),this}destroy(t){this.targetDom.lastChild.removeEventListener("click",this.event,!1),this.targetDom.innerHTML=this.html,t&&t.call(this)}update(t,e){return this.targetDom.style=this.style,this.options=axExtend(this.options,t),this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axSelect{constructor(t,e){return this.inputDom=axIdToDom(t),!!this.inputDom&&(this.options=axExtend({insName:"",storageName:"",least:0,most:0,content:"",async:!1,trigger:"click",selected:"",disabled:"",clearShow:!1,removable:!1,separator:",",dropdownShow:!0,ajaxType:"post",absentAddable:!1,idStart:0,width:"",size:"md",readonly:!1,enterSelect:!0,className:"",language:{inputPlaceholder:"请选择...",searchPlaceholder:"输入关键字...",editPlaceholder:"输入关键字...",absent:'列表中没有"<# this.value #>"可供选择！',absentAddable:'列表中没有"<# this.value #>"，但是作为新项加入了列表！',empty:'没有找到符合"<# this.value #>"的选项！',emptyAddable:'没有找到符合"<# this.value #>"的选项，请使用回车键添加！',most:'只能最多选择"<# this.value #>"项！',addFail:'添加失败！列表中已经有了"<# this.value #>"这一项。'},search:{enable:!1,fuzzy:!0,limit:0,reorder:!1,editable:!0},dialog:{},popup:{},onInit:"",onBeforeAdd:"",onAdd:"",onBeforeRemove:"",onRemove:"",onSelect:"",onUnselect:"",onDisabled:"",onEnabled:"",onClear:"",onAbsentSelect:"",onToggleSelect:"",onMost:"",onLeast:"",onUpdate:"",onDestroy:"",onSave:""},e,this.inputDom,this.constructor.name),this.handlers={},"SELECT"===this.inputDom.nodeName?this.inputDom.hasAttribute("multiple")?this.inputType="select-multiple":this.inputType="select-single":"INPUT"===this.inputDom.nodeName&&(this.inputType="input"),this.clickSelect=(t=>{if(~~t.disabled||t.children)return!1;let e={id:t.id,value:t.value||t.label};if("select-single"===this.inputType){if(~~t.selected)return!1;this.toggleList(t,this.data),this.tagsIns.clear(),this.tagsIns.add(e)}else this.selectedAttrToggle(t,!~~t.selected),
~~t.selected?this.tagsIns.add(e):this.tagsIns.remove(e)}),this.keydownSelect=(t=>{if(axIsEmpty(t))return document.onkeydown=null,!1;document.onkeydown=(e=>{let s=t.filter(t=>!t.children&&!~~t.disabled),i=s.find(t=>t.active),o=s.findIndex(t=>t===i)||0;"ArrowDown"===e.code?(axPreventDefault(e),this.keyToggleActive("down",i,o,s)):"ArrowUp"===e.code?(axPreventDefault(e),this.keyToggleActive("up",i,o,s)):"Enter"===e.code&&i&&this.options.enterSelect&&("select-single"===this.inputType?this.select(i):~~i.selected?this.unselect(i):this.select(i))})}),this.bodyClickBlur=(t=>{this.selectDom.contains(t.target)||(this.selectDom.classList.remove("ax-opened"),document.removeEventListener("click",this.bodyClickBlur))}),this.init(),this)}beforeInit(){this.selectDom&&(this.tagsIns.destroy(),this.tagsIns=null,this.popupIns&&(this.popupIns.destroy(),this.popupIns=null),this.tagsDom.innerHTML="",this.listDom.innerHTML="",this.searchDom&&this.searchDom.remove())}async init(){if(this.beforeInit(),axInstance.push(this,this.options.insName,"select"),this.destroyed=!1,this.maxIndex=this.options.idStart,this.value="",this.selected=[],this.searchResult=[],this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}this.inputDom.style.width&&!this.options.width&&(this.options.width=this.inputDom.style.width),this.createSkeleton();let t=axType(this.options.content);return"input"===this.inputType&&"String"===t&&this.options.async?await this.getAsyncData(t=>{this.data=axArrToFlat(t)}):this.inputType.includes("select")?this.getDataFromNode(this.inputDom):"input"===this.inputType&&(axIsEmpty(this.options.content)?this.inputDom.value&&this.getDataFromStr(this.inputDom.value):"String"===t?this.options.content.trim().startsWith("#")?this.getDataFromNode(this.options.content):this.getDataFromStr(this.options.content):"Array"===t?(this.data=axArrToFlat(this.options.content),!isNaN(this.data[0].id)&&(this.maxIndex=Math.max(...this.data.map(t=>t.id))+1)):t.includes("HTML")&&this.getDataFromNode(this.options.content)),this.initRender(),this.renderFinish(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}getAsyncData(t){return axAjax({type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:e=>{if(axIsEmpty(e.content)&&!Array.isArray(e.content))return console.warn("No data obtained from database!"),!1;this.tagsDom.innerHTML="",this.listDom.innerHTML="",t&&t(e.content)}},this.tagsDom)}getDataFromNode(t){let e,s=axIdToDom(t);if("UL"===s.nodeName)e=axUlToArr(s,0);else{if("SELECT"!==s.nodeName&&"DATALIST"!==s.nodeName)return!1;e=axSelectToArr(s,0)}this.data=axArrToFlat(e.data),this.maxIndex=e.index}getDataFromStr(t){let e=t.split(this.options.separator);this.data=e.map((t,e)=>({id:e,label:t,value:t})),this.maxIndex=e.length+1}setAttribute(){this.options.className&&axClass.add(this.selectDom,this.options.className),this.selectDom.setAttribute("type",this.inputType),this.options.width&&(this.selectDom.style.width=this.options.width),!axIsMobi()&&this.selectDom.getBoundingClientRect().width&&(this.options.popup.width=this.selectDom.getBoundingClientRect().width+"px"),this.selectDom.setAttribute("size",this.options.size),this.options.readonly&&this.readonly()}initDataStd(){let t=axType(this.options.selected),e=axType(this.options.disabled),s=(t,e)=>{let s,i=axType(t);"Number"===i||"Object"===i?s=axFindItem(t,this.data):"String"===i&&(s=axFindItem(t,this.data)||axFindItem(t,this.data,{string:"value"})),s&&(s[e]=!0,s.dom.setAttribute(e,""))};if("Array"===t)for(let t of this.options.selected)s(t,"selected");else"String"===t?this.options.selected.split(",").forEach(t=>{s(t,"selected")}):s(this.options.selected,"selected");if("Array"===e)for(let t of this.options.disabled)s(t,"disabled");else"String"===e?this.options.disabled.split(",").forEach(t=>{s(t,"disabled")}):s(this.options.disabled,"disabled")}createSkeleton(){this.selectDom||(this.selectDom=axAddElem("div",{class:"ax-select"}),this.inputDom.style.display="none",this.inputDom.insertAdjacentElement("beforebegin",this.selectDom),this.selectDom.appendChild(this.inputDom),this.tagsDom=axAddElem("div",{class:"ax-tags"}),this.selectDom.appendChild(this.tagsDom),this.options.dropdownShow&&(this.arrowDom=axAddElem("i",{arrow:""}),this.selectDom.appendChild(this.arrowDom),this.wrapperDom=axAddElem("div",{class:"ax-select-wrapper"}),this.listDom=axAddElem("ul"),this.wrapperDom.appendChild(this.listDom))),this.selectDom.contains(this.clearDom)||(this.clearDom=axAddElem("i",{clear:""}),this.options.clearShow&&this.arrowDom.insertAdjacentElement("beforebegin",this.clearDom)),this.setAttribute()}initRender(){this.data.forEach(t=>{this.fillItem(t,this.listDom)})}fillItem(t,e,s="end"){t.dom=axAddElem("li","",`${t.legend?'<i class="ax-iconfont '+t.legend+'" legend></i>':""}${t.image?'<i image><img src="'+t.image+'"/></i>':""}<i label>${t.label}</i>${t.tip?"<i tip>"+t.tip+"</i>":""}`),t.children?t.dom.setAttribute("parent",""):(~~t.selected&&t.dom.setAttribute("selected",""),~~t.disabled&&t.dom.setAttribute("disabled","")),e&&("end"!==s?e.insertAdjacentElement("afterbegin",t.dom):e.appendChild(t.dom))}reRenderList(t){this.initDataStd(),this.listDom.innerHTML="",t[0].hasOwnProperty("weight")?t.forEach(t=>{let e=new RegExp(t.keys.join("|"),"g"),s=t.source.dom.querySelector("[label]");s.innerHTML=s.innerHTML.replace(/<[^>]+>/g,"").replace(e,t=>`<s>${t}</s>`),this.listDom.appendChild(t.source.dom)}):t.forEach(t=>{t.dom.querySelector("[label]").innerHTML=t.dom.querySelector("[label]").innerHTML.replace(/<[^>]+>/g,""),this.listDom.appendChild(t.dom)})}selectedAttrToggle(t,e){if(e){if(!~~t.selected){if("single-multiple"!==this.inputType&&0!==this.options.most&&this.data.filter(t=>~~t.selected).length>=this.options.most)return new axMessage({content:axTplEngine(this.options.language.most,{value:this.options.most}),result:"error",iconShow:!0}).show(),this.handlers.hasOwnProperty("most")&&this.emit("most",this.options.most),this.options.onMost&&this.options.onMost.call(this,this.options.most),!1;Reflect.set(t,"selected",!0),t.dom.setAttribute("selected",""),this.inputType.includes("select")&&t.node&&t.node.setAttribute("selected","")}}else~~t.selected&&(Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected"),this.inputType.includes("select")&&t.node&&t.node.removeAttribute("selected"));"toggleSelect"in this.handlers&&this.emit("toggleSelect",t),this.options.onToggleSelect&&this.options.onToggleSelect.call(this,t)}toggleList(t,e){this.selectedAttrToggle(t,!0);let s=e.find(e=>e!=t&&~~e.selected);s&&this.selectedAttrToggle(s,!1)}keyToggleActive(t,e,s,i){if("hidden"===this.popupIns.state)this.popupIns.show(),e||(i[0].active=!0,i[0].dom.setAttribute("active",""));else if("shown"===this.popupIns.state){let o,a=0;"up"===t?s>0&&(e&&(Reflect.deleteProperty(e,"active"),e.dom.removeAttribute("active")),o=i[s-1],o.active=!0,o.dom.setAttribute("active",""),s--,o.dom.offsetTop>this.wrapperDom.clientHeight&&(a=o.dom.offsetTop+o.dom.getBoundingClientRect().height-this.wrapperDom.clientHeight),axScrollTo(a,{parent:this.wrapperDom,duration:200})):"down"===t&&s+1<i.length&&(e&&(Reflect.deleteProperty(e,"active"),e.dom.removeAttribute("active")),o=i[s+1],o.active=!0,o.dom.setAttribute("active",""),s++,axChildVisible(o.dom,this.wrapperDom)||(a=o.dom.offsetTop+o.dom.getBoundingClientRect().height-this.wrapperDom.clientHeight),axScrollTo(a,{parent:this.wrapperDom,duration:200}))}}renderFinish(){this.rawData=[...this.data];let t="";if(t=this.options.most>0&&this.options.least>0?`最多选择${this.options.most}项，至少选择${this.options.least}项`:this.options.most>0?`最多选择${this.options.most}项`:this.options.most>0?`至少选择${this.options.most}项`:this.options.language.inputPlaceholder,this.tagsIns=new axTags(this.tagsDom,{content:this.data.filter(t=>~~t.selected).map(t=>({id:t.id,value:t.value||t.label})),removable:"select-single"!==this.inputType&&this.options.removable,compact:"select-single"!==this.inputType,text:"select-single"===this.inputType,theme:"select-single"===this.inputType?"auto":"light",emptyShow:!(!this.inputType.includes("select")&&("input"!==this.inputType||this.options.search.enable)),emptyTip:`<i class="ax-color-ignore">${t}</i>`,edit:{enable:!this.inputType.includes("select")&&this.options.search.enable,addable:this.options.search.editable,deletable:this.options.search.editable,placeholder:this.options.language.editPlaceholder}}),this.inputType.includes("select")?this.searchDom=axAddElem("input",{type:"text",placeholder:this.options.language.searchPlaceholder}):"input"===this.inputType&&(this.searchDom=this.tagsIns.inputDom),this.options.dropdownShow){this.options.search.enable&&this.inputType.includes("select")&&this.wrapperDom.insertAdjacentElement("afterbegin",this.searchDom),this.popupIns=new axPopup(this.selectDom,axExtend({content:this.wrapperDom,trigger:this.options.trigger,footerShow:!1,close:!1,padding:!1,triggerStrict:!0,arrow:!1,theme:"select",placement:"bottom-start"},this.options.popup)),this.popupIns.on("show",()=>{this.searchDom&&"input"===this.inputType&&this.searchDom.focus()}),this.popupIns.on("shown",()=>{this.searchDom&&this.inputType.includes("select")&&this.searchDom.focus(),axPreventScroll(this.wrapperDom)}),this.popupIns.on("hide",()=>{this.keydownSelect()}),this.popupIns.on("hidden",()=>{}),this.selectDom.onclick=(()=>{this.keydownSelect(this.searchResult.length>0?this.searchResult.map(t=>t.source):this.data)}),this.clearDom&&(this.clearDom.onclick=(()=>{this.clear()})),"input"===this.inputType&&this.searchDom&&(this.searchDom.onclick=(()=>{"hidden"===this.popupIns.state&&this.popupIns.show()}));for(let t of this.data)~~t.disabled||t.children||(t.dom.onclick=(()=>{this.clickSelect(t),"select-multiple"===this.inputType&&0!==this.options.least&&this.data.filter(t=>~~t.selected).length<this.options.least&&(new axMessage({content:`至少选择${this.options.least}项!`,result:"warning",iconShow:!0}).show(),this.handlers.hasOwnProperty("least")&&this.emit("least",this.options.least),this.options.onLeast&&this.options.onLeast.call(this,this.options.least))}));this.tagsIns.on("remove",t=>{t.forEach(t=>{let e=axFindItem({id:t.id,value:t.value},this.data);e&&this.selectedAttrToggle(e,!1)})}),this.searchDom&&(this.searchDom.oninput=axDebounce(()=>{let t=this.searchDom.value;t?(this.searchResult=axArrSearch(t,"label",this.data,{fuzzy:this.options.search.fuzzy,reorder:this.options.search.reorder,limit:this.options.search.limit}),0===this.searchResult.length?("input"===this.inputType?(this.options.enterSelect&&this.searchDom.addEventListener("keyup",this.tagsIns.inputEdit),this.listDom.innerHTML=`<li message><i label>${axTplEngine(this.options.language.emptyAddable,{value:t})}</i></li>`):this.listDom.innerHTML=`<li message><i label>${axTplEngine(this.options.language.empty,{value:t})}</i></li>`,this.keydownSelect()):("input"===this.inputType&&this.options.enterSelect&&this.searchDom.removeEventListener("keyup",this.tagsIns.inputEdit),this.reRenderList(this.searchResult),this.keydownSelect(this.searchResult.map(t=>t.source)))):(this.reRenderList(this.data),this.keydownSelect(this.data))})),this.tagsIns.contentProxy.instance.on("complete",t=>{this.selected=t.target.map(t=>({id:t.id,value:t.value})),this.value=t.target.map(t=>t.value).join(this.options.separator),"input"===this.inputType&&(this.inputDom.value=this.value),"select-single"!==this.inputType&&this.popupIns&&this.popupIns.popupPosition.update(),this.save()})}else this.selectDom.onclick=(()=>{this.selectDom.classList.contains("ax-opened")||this.selectDom.classList.add("ax-opened"),this.searchDom&&"input"===this.inputType&&this.searchDom.focus(),document.addEventListener("click",this.bodyClickBlur,!1)})}select(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=axType(t),i=[],o=[],a=t=>{let e=axFindItem(t,this.data);if(e){i.push(e);let t={id:e.id,value:e.value||e.label};~~e.selected||("select-single"===this.inputType?(this.toggleList(e,this.data),this.tagsIns.clear(),this.tagsIns.add(t)):(this.selectedAttrToggle(e,!~~e.selected),this.tagsIns.add(t)))}else o.push(t)};if("Array"===s?t.forEach(t=>{a(t)}):"String"===s?t.split(",").forEach(t=>{a(t)}):a(t),o.length>0){let t=o.map(t=>t.label||t).join(",");this.options.absentAddable?new axDialog(axExtend({content:axTplEngine(this.options.language.absentAddable,{value:t}),confirm:{callback:()=>{o.forEach(t=>{this.add(t,"end",t=>{t.forEach(e=>{e.dom.setAttribute("selected",""),e.selected=!0,this.tagsIns.add({id:e.id,value:e.value||e.label}),i.push(...t)})})}),this.handlers.hasOwnProperty("absentSelect")&&this.emit("absentSelect",i),this.options.onAbsentSelect&&this.options.onAbsentSelect.call(this,i)}}},this.options.dialog)).show():new axMessage({content:axTplEngine(this.options.language.absent,{value:t}),iconShow:!0}).show()}return this.handlers.hasOwnProperty("select")&&this.emit("select",i),this.options.onSave&&this.options.onSave.call(this,i),e&&e.call(this,i),this}unselect(t,e){if(this.destroyed)return this;let s=axType(t),i=[],o=t=>{let e=axFindItem(t,this.data);if(e){i.push(e);let t={id:e.id,value:e.value};~~e.selected&&(this.selectedAttrToggle(e,!1),this.tagsIns.remove(t))}else this.tagsIns.remove(t)};return"Array"===s?t.forEach(t=>{o(t)}):"String"===s?t.split(",").forEach(t=>{o(t)}):o(t),this.handlers.hasOwnProperty("unselect")&&this.emit("unselect",i),this.options.onSave&&this.options.onSave.call(this,i),e&&e.call(this,i),this}arrAdd(t,e){t.forEach(t=>{this.fillItem(t,this.listDom,e),"end"!==e?this.data.unshift(t):this.data.push(t),t.dom.onclick=(()=>{this.clickSelect(t)})})}add(t,e="end",s){if(axIsEmpty(t)||this.destroyed)return this;let i=axType(t),o=[],a=t=>{let e=axType(t);if("String"===e){let e=t.split(this.options.separator),s=new axMessage({content:"",result:"error",iconShow:!0});for(let t of e)this.data.find(e=>e.label===t)?s.update({content:axTplEngine(this.options.language.addFail,{value:t})}).show():(o.push({id:this.maxIndex,label:t,value:t}),this.maxIndex++)}else"Object"===e&&(axFindItem(t,this.data)?msgIns.update({content:axTplEngine(this.options.language.addFail,{value:t.label})}).show():(t.hasOwnProperty("id")||(t.id=this.maxIndex,this.maxIndex++),o.push(t)))};return"Array"===i?t.forEach(t=>{a(t)}):"String"===i&&a(t),this.options.onBeforeAdd?this.options.onBeforeAdd.call(o):this.arrAdd(o,e),this.handlers.hasOwnProperty("add")&&this.emit("add",o),this.options.onAdd&&this.options.onAdd.call(this,o),s&&s.call(this,o),this.save(),this}arrRemove(t){t.length>0&&(t.forEach(t=>{t.dom.remove()}),this.data=this.data.filter(e=>!t.includes(e)))}remove(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=axType(t),i=[],o=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach(t=>{o(t)}):"String"===s?t.split(",").forEach(t=>{o(t)}):o(t),this.options.onBeforeRemove?this.options.onBeforeRemove.call(i):this.arrRemove(i),this.handlers.hasOwnProperty("remove")&&this.emit("remove",i),this.options.onRemove&&this.options.onRemove.call(this,i),e&&e.call(this,i),this.save(),this}clear(t){this.tagsIns.clear();for(let t of this.data)~~t.selected&&(Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected"),t.node&&t.node.removeAttribute("selected"));return this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),this.options.onClear&&this.options.onClear.call(this),t&&t.call(this),this}readonly(t){return this.inputDom.setAttribute("readonly",""),this.selectDom.setAttribute("readonly",""),t&&t.call(this),this}readable(t){return this.inputDom.removeAttribute("readonly"),this.selectDom.removeAttribute("readonly"),t&&t.call(this),this}disable(t,e){if(this.destroyed)return this;let s=axType(t),i=[],o=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach(t=>{o(t)}):"String"===s?t.split(",").forEach(t=>{o(t)}):o(t),i.forEach(t=>{~~t.disabled||(t.dom.setAttribute("disabled",""),t.disabled=!0)}),this.handlers.hasOwnProperty("disabled")&&this.emit("disabled",i),this.options.onDisabled&&this.options.onDisabled.call(this,i),e&&e.call(this,i),this.save(),this}enable(t,e){if(this.destroyed)return this;let s=axType(t),i=[],o=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach(t=>{o(t)}):"String"===s?t.split(",").forEach(t=>{o(t)}):o(t),i.forEach(t=>{~~t.disabled&&(t.dom.removeAttribute("disabled"),Reflect.deleteProperty(t,"disabled"))}),this.handlers.hasOwnProperty("enabled")&&this.emit("enabled",i),this.options.onEnabled&&this.options.onEnabled.call(this,i),e&&e.call(this,i),this.save(),this}save(t,e){if(this.destroyed)return this;if(!this.options.storageName)return!1;t?axLocalStorage.set(this.options.storageName,t):(this.options.content=this.data,axLocalStorage.set(this.options.storageName,this.options));let s=axLocalStorage.get(this.options.storageName);return this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s),this}async update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.save(),await this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this),this)}destroy(t){return this.selectDom.onclick=null,this.clearDom&&(this.clearDom.onclick=null),this.searchDom&&(this.searchDom.onclick=null),this.searchDom&&this.searchDom.removeEventListener("keyup",this.tagsIns.inputEdit),document.removeEventListener("click",this.bodyClickBlur),this.contentXhr&&this.contentXhr.abort(),this.popupIns&&this.popupIns.destroy(),this.tagsIns.destroy(),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axDropdown{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({type:"list",content:"",node:"a",nowrap:!0,breakShow:!0,arrowShow:!0,grid:{enable:!1,columns:0,fenceShow:!1},onInit:"",onBeforeSet:"",onAfterSet:"",onConfirm:"",onUpdate:"",onUpdateContent:"",plugin:{value:""},popup:{in:"slideDown",out:"slideUp",size:"sm",placement:"bottom-start",close:!1}},e,this.targetDom,this.constructor.name),this.handlers={},this.init(),this}init(){if(axInstance.push(this,this.options.insName,"dropdown"),this.plugin=null,this.popup=null,this.value="",this.valueArr=[],this.list=[],this.options.plugin.value?this.initValue=this.options.plugin.value:this.initValue="","INPUT"!=this.targetDom.nodeName&&"TEXTAREA"!=this.targetDom.nodeName||(this.targetDom.setAttribute("readonly",""),this.targetDom.value?(this.options.plugin.value=this.targetDom.value,this.initValue=this.targetDom.value):this.initValue&&(this.targetDom.value=this.initValue)),"checkbox"===this.options.type||"radio"===this.options.type)axIsEmpty(this.options.content)||(this.options.plugin.children=this.options.content),this.options.plugin.type=this.options.type,this.options.grid.enable?(this.options.plugin.display="grid",this.options.grid.columns&&(this.options.plugin.columns=this.options.grid.columns),this.options.grid.fenceShow&&(this.options.plugin.parentClass="ax-fence",this.options.plugin.childClass="ax-padding-left",this.options.popup.padding=!1)):this.options.plugin.display="block",this.plugin=new axCheckbox("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.reset()}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.getValues("string"),this.valueArr=this.plugin.getValues("array"),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.getValues("string")&&this.updateValues(this.targetDom.value)});else if("list"===this.options.type){this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,padding:!1}));let t=null;"String"===axType(this.options.content)?axStrType(this.options.content)?(t=axIdToDom(this.options.content),this.popup.content.innerHTML=axIdToDom(this.options.content).innerHTML):this.popup.content.innerHTML=this.options.content:axType(this.options.content).includes("HTML")?this.popup.content.innerHTML=this.options.content.innerHTML:"Array"===axType(this.options.content)&&(t=axAddElem("div",{class:"ax-list-wrapper"}),this.renderList(this.options.content,t),this.popup.content.innerHTML="",this.popup.content.appendChild(t))}else if("button"===this.options.type){this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,padding:!1}));let t=axAddElem("div",{class:"ax-list-wrapper"});this.renderList(this.options.content,t),this.list.forEach(t=>{t.props.disabled||(t.dom.onclick=(e=>{axPreventDefault(e),this.value=t.props.value,this.valueArr=[t.props.value],t.dom.setAttribute("checked",""),this.list.filter(e=>e.dom!=t.dom).forEach(t=>{t.dom.removeAttribute("checked")}),this.options.onBeforeSet?this.options.onBeforeSet.call(this,t.props.value):this.setToHide(t.props.value)}))}),this.popup.content.innerHTML="",this.popup.content.appendChild(t),this.initValue&&this.updateValues(this.initValue),this.popup.on("show",()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.updateValues(this.targetDom.value)})}else"text"===this.options.type||"textarea"===this.options.type?(this.options.plugin.type=this.options.type,this.options.content&&(this.options.plugin.value=this.options.content),this.plugin=new axInput("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.set(this.initValue)}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.getValues("string"),this.valueArr=this.plugin.getValues("array"),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.getValues()&&this.updateValues(this.targetDom.value),setTimeout(()=>{let t=this.plugin.field.value;this.plugin.field.value="",this.plugin.field.focus(),this.plugin.field.value=t},100)}),"text"===this.options.type&&(this.plugin.field.onkeyup=(t=>{"Enter"===t.code&&this.popup.options.confirm.callback()}))):"number"===this.options.type?(this.options.plugin.width="100%",this.plugin=new axAmount("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.reset()}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.value,this.valueArr.push(this.plugin.value),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.value&&this.updateValues(this.targetDom.value)}),setTimeout(()=>{let t=this.plugin.field.value;this.plugin.field.value="",this.plugin.field.focus(),this.plugin.field.value=t},100),this.plugin.field.onkeyup=(t=>{"Enter"===t.code&&this.popup.options.confirm.callback()})):"switch"===this.options.type||"html"===this.options.type&&(this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,content:this.options.content})));this.setAttribute(),this.options.onInit&&this.options.onInit.call(this)}setAttribute(){if(this.options.arrowShow&&this.targetDom&&!this.targetDom.querySelector(".ax-at-right")){let t=axAddElem("i",{class:"ax-dropdown-arrow"});this.targetDom.appendChild(t)}this.popup.targetDom.classList.add("ax-dropdown")}setToHide(t,e){t=t||this.value,"INPUT"===this.targetDom.nodeName&&(this.targetDom.value=t),this.options.onAfterSet&&this.options.onAfterSet.call(this,t),"set"in this.handlers&&this.emit("set",t),e&&e.call(this,t),this.popup.hide()}updateToShow(t){this.popup.show(),setTimeout(()=>{this.updateValues(t)},100)}updateValues(t){if(["checkbox","radio","text","textarea","number"].includes(this.options.type))this.plugin.set(t);else if("button"===this.options.type){let e="";e=Array.isArray(t)?t[0]:t,this.list.forEach(t=>{t.props.value===e?t.dom.setAttribute("checked",""):t.dom.removeAttribute("checked")})}}getValues(t="string"){return"string"===t?this.value:"array"===t?this.valueArr:void 0}renderList(t,e){if(this.options.grid.enable){let t="ax-grid";this.options.grid.columns&&(t+=` ax-grid-${this.options.grid.columns}`),this.options.grid.fenceShow&&(t+=" ax-fence"),axClass.add(e,t)}t.forEach((t,s)=>{let i=axAddElem(this.options.node,{class:"ax-bulletin ax-hover",...t.props},'<div class="ax-bulletin-body"></div>'),o=i.querySelector(".ax-bulletin-body"),a=null;t.disabled&&i.setAttribute("disabled",""),"a"===this.options.node&&("list"===this.options.type?(i.target=t.target?t.target:"_blank",i.href=t.url?t.url:"###"):i.href="###"),this.options.nowrap?("a"!=this.options.node&&t.url?(a=axAddElem("a",{caption:""},t.label),"list"===this.options.type?(a.target=t.target?t.target:"_blank",a.href=t.url?t.url:"###"):a.href="###"):a=axAddElem("i",{caption:""},t.label),o.appendChild(a)):o.textContent=t.label,axIsEmpty(t.prefix)||("legend"===t.prefix.type?o.insertAdjacentElement("beforebegin",axAddElem("i",{class:"ax-iconfont "+t.prefix.data,legend:""})):"avatar"===t.prefix.type?o.insertAdjacentElement("beforebegin",axAddElem("i",{avatar:""},`<img src="${t.prefix.data}" />`)):"image"===t.prefix.type&&o.insertAdjacentElement("beforebegin",axAddElem("i",{image:""},`<img src="${t.prefix.data}"/>`))),t.suffix&&o.insertAdjacentElement("afterend",axAddElem("i",{arrow:""},t.suffix)),e.appendChild(i),!this.options.grid.enable&&this.options.breakShow&&s+1!=this.options.content.length&&e.insertAdjacentHTML("beforeend","<hr/>"),this.list.push({props:t,dom:i}),t.disabled||t.callback&&t.callback(i,t)})}update(t,e){return this.popup.targetDom.remove(),this.popup.destroy(),this.options.content=axExtend(this.options.content,t),this.init(),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update"),e&&e.call(this),this}updateContent(t,e){return this.popup.targetDom.remove(),this.popup.destroy(),this.options.content=t,this.init(),this.options.onUpdateContent&&this.options.onUpdateContent.call(this),"updateContent"in this.handlers&&this.emit("updateContent"),e&&e.call(this),this}show(t){return this.popup.show(),t&&t.call(this),this}hide(t){return this.popup.hide(),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axAmounts=[];class axAmount{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",width:"",placeholder:"输入数量",value:"",min:"",max:"",step:1,precision:0,rule:"",disabled:!1,increase:!0,decrease:!0,cookie:"",onInit:"",onMined:"",onMaxed:"",onUpdated:"",onChanged:""},e,this.targetDom,this.constructor.name),this.handlers={},this.value="",this.activeIn=!0,this.activeDe=!0,this.init()}init(){if(axInstance.push(this,this.options.insName,"amount"),""!==this.options.min&&""!==this.options.mam&&this.options.min>this.options.mam)return console.error("The minimum value is greater than the maximum value!"),!1;this.createSkeleton(),this.ruleToSet(),this.initValue(),this.getCookie(),this.rawValue=this.value,this.setAttribute();let t=t=>{"ArrowUp"===t.code||"ArrowRight"===t.code?(t.preventDefault(),e()):"ArrowLeft"!==t.code&&"ArrowDown"!==t.code||(t.preventDefault(),s())},e=()=>{this.activeDe||(this.options.decrease=!0,this.decrease.removeAttribute("disabled"));let t=Number(this.field.value),e=Number(this.field.value);""===this.options.max?t+=this.options.step:""!==this.options.max&&t<this.options.max&&(t+=this.options.step),""!==this.options.max&&t+this.options.step>this.options.max&&(this.options.increae=!1,this.increase.setAttribute("disabled","true"),this.activeIn=!1,this.options.onMaxed&&this.options.onMaxed.call(this),"maxed"in this.handlers&&this.emit("maxed","")),this.field.value=t.toFixed(this.options.precision),this.value=this.field.value,this.setCookie(),this.field.value>e&&(this.options.onChanged&&this.options.onChanged.call(this,e,this.field.value),"changed"in this.handlers&&this.emit("changed",e,this.field.value))},s=()=>{this.activeIn||(this.options.increae=!0,this.increase.removeAttribute("disabled"));let t=Number(this.field.value),e=Number(this.field.value);""===this.options.min?t-=this.options.step:""!==this.options.min&&t>this.options.min&&(t-=this.options.step),""!==this.options.min&&t-this.options.step<this.options.min&&(this.options.decreae=!1,this.decrease.setAttribute("disabled","true"),this.activeDe=!1,this.options.onMined&&this.options.onMined.call(this),"mined"in this.handlers&&this.emit("mined","")),this.field.value=t.toFixed(this.options.precision),this.value=this.field.value,this.setCookie(),this.field.value<e&&(this.options.onChanged&&this.options.onChanged.call(this,e,this.field.value),"changed"in this.handlers&&this.emit("changed",e,this.field.value))};return this.options.disabled||this.field.hasAttribute("disabled")?(this.increase.removeEventListener("click",e,!1),this.decrease.removeEventListener("click",s,!1),this.field.setAttribute("disabled","")):(!this.options.increase||this.increase.hasAttribute("disabled")?(this.increase.removeEventListener("click",e,!1),this.increase.setAttribute("disabled","")):(this.increase.addEventListener("click",e,!1),this.field.addEventListener("keydown",t,!1)),!this.options.decrease||this.decrease.hasAttribute("disabled")?(this.decrease.removeEventListener("click",s,!1),this.decrease.setAttribute("disabled","")):(this.decrease.addEventListener("click",s,!1),this.field.addEventListener("keydown",t,!1)),this.field.onblur=(()=>{this.value=this.correctValue(Number(this.field.value)),this.field.value=this.value,this.setCookie()}),this.field.addEventListener("keyup",t=>{"Enter"===t.code&&this.field.blur()},!1)),this.options.onInit&&this.options.onInit.call(this),this}ruleToSet(){switch(this.options.rule){case"currency":this.options.min=0,this.options.max="",this.options.step=.01,this.options.precision=2;break;case"quantity":this.options.min=1,this.options.max=999,this.options.step=1,this.options.precision=0;break;case"percent":this.options.min=0,this.options.max=100,this.options.step=1,this.options.precision=0;break;case"month":this.options.min=1,this.options.max=12,this.options.step=1,this.options.precision=0;break;case"day":this.options.min=1,this.options.max=31,this.options.step=1,this.options.precision=0;break;case"hour":this.options.min=0,this.options.max=24,this.options.step=1,this.options.precision=0;break;case"minute":case"second":this.options.min=0,this.options.max=59,this.options.step=1,this.options.precision=0}}initValue(){""!==this.options.value?(""!==this.options.min&&this.options.value<this.options.min?this.value=this.options.min:""!==this.options.max&&this.options.value>this.options.max?this.value=this.options.max:this.value=this.options.value,
this.field.value=this.value):this.field.value&&(""!==this.options.min&&this.options.min>Number(this.field.value)&&(this.field.value=this.options.min),""!==this.options.max&&this.options.max<Number(this.field.value)&&(this.field.value=this.options.max),this.value=this.field.value)}getCookie(){let t=axCookie.get(this.options.cookie);this.options.cookie&&t&&(this.value=t,this.field.value=t)}setCookie(){this.options.cookie&&axCookie.set(this.options.cookie,Number(this.field.value))}setAttribute(){this.options.disabled&&(this.field.setAttribute("disabled","true"),this.increase.setAttribute("diabled","true"),this.decrease.setAttribute("diabled","true")),this.options.increase||this.increase.setAttribute("diabled","true"),this.options.decrease||this.decrease.setAttribute("diabled","true"),!this.field.getAttribute("placeholder")&&this.field.setAttribute("placeholder",this.options.placeholder),this.options.width&&(this.parent.style.width=this.options.width)}createSkeleton(){this.targetDom&&"INPUT"!==this.targetDom.nodeName?(this.parent=this.targetDom,this.field=this.parent.querySelector("input"),this.increase=this.parent.querySelector("[increase]"),this.decrease=this.parent.querySelector("[decrease]")):(this.parent=axAddElem("div",{class:"ax-amount"}),this.field=this.targetDom?this.targetDom:axAddElem("input",{type:"text"}),this.decrease=axAddElem("a",{href:"###",decrease:""},'<i class="ax-iconfont ax-icon-minus"></i>'),this.increase=axAddElem("a",{href:"###",increase:""},'<i class="ax-iconfont ax-icon-plus"></i>'),this.field.insertAdjacentElement("beforeBegin",this.parent),this.parent.appendChild(this.field),this.parent.appendChild(this.decrease),this.parent.appendChild(this.increase))}correctValue(t){return""!==this.options.min&&t<this.options.min?t=this.options.min:""!==this.options.max&&t>this.options.max&&(t=this.options.max),t}set(t,e){return t=this.correctValue(t),this.field.value=t,this.value=t,this.options.cookie&&(this.value=axCookie.set(this.options.cookie,t)),e&&e.call(this,t),this}reset(t){return this.set(this.rawValue),t&&t.call(this,this.rawValue),this.options.cookie&&(this.value=axCookie.set(this.options.cookie,this.rawValue)),this}update(t,e){return this.options=axExtend(this.options,t),this.options.onUpdated&&this.options.onUpdated.call(this),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axShare{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",source:"",title:"",des:"",url:window.location.href,image:"",key:"",origin:window.location.origin,qrTitle:"<p>在微信里点击“发现”，再点击“扫一扫，”<br />便可将本文分享至朋友圈。</p>",qrSize:180,newPage:!0,dialogText:"确定分享本页面？",onShare:""},e,this.targetDom,"axShare"),this.handlers={},this.options.source||(this.options.source=document.querySelector('meta[name="site"]')||document.title),this.options.title||(this.options.title=document.querySelector('meta[name="title"]')||document.title),this.options.des||(this.options.des=document.querySelector('meta[name="description"]')||""),this.options.image||(this.options.image=(document.images[0]||0).src||""),this.init()}init(){axInstance.push(this,this.options.insName,"share"),this.shareUrl={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+this.options.url+"&title="+this.options.title+"&desc="+this.options.des+"&summary="+this.options.summary+"&site="+this.options.source+"&pics="+this.options.image,youdao:"http://note.youdao.com/memory/?title="+this.options.title+"&pic="+this.options.image+"&summary="+this.options.des+"&url="+this.options.url,qq:"http://connect.qq.com/widget/shareqq/index.html?url="+this.options.url+"&title="+this.options.title+"&source="+this.options.source+"&desc="+this.options.des+"&pics="+this.options.image+"&summary="+this.options.summary,weibo:"https://service.weibo.com/share/share.php?url="+this.options.url+"&title="+this.options.title+"&pic="+this.options.image+"&appkey="+this.options.key,daoban:"http://shuo.douban.com/!service/share?href="+this.options.url+"&name="+this.options.title+"&text="+this.options.des+"&image="+this.options.image+"&starid=0&aid=0&style=11",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title="+this.options.title+"&url="+this.options.url+"&summary="+this.options.summary+"&source="+this.options.source+"&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u="+this.options.url,twitter:"https://twitter.com/intent/tweet?text="+this.options.title+"&url="+this.options.url+"&via="+this.options.origin,google:"https://plus.google.com/share?url="+this.options.url,pinterest:"https://www.pinterest.com/pin/create/button/?url="+this.options.url+"&description="+this.options.des+"&media="+this.options.image,tumblr:"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&url="+this.options.url+"&title="+this.options.title};for(let t in this.shareUrl)this.changeHref(t);if(this.targetDom.querySelector('[share="wechat"]')){if("undefined"==typeof QRCode)return console.error("Please import the QRCode plugin first!"),!1;this.createQrcode()}}changeHref(t){let e=this.targetDom.querySelector("[share="+t+"]");e&&(e.hasAttribute("confirm")?e.addEventListener("click",e=>{axPreventDefault(e),new axDialog({content:this.options.dialogText,footerType:"right",confirm:{callback:()=>{this.options.newPage?(window.open(this.shareUrl[t]),this.hide()):window.location.href=this.shareUrl[t],this.options.onShare&&this.options.onShare.call(this,t)}}}).show()},!1):(this.options.newPage?e.setAttribute("target","_blank"):e.removeAttribute("target"),e.setAttribute("href",this.shareUrl[t]),e.addEventListener("click",e=>{this.options.onShare&&this.options.onShare.call(this,t)},!1)))}createQrcode(){let t=this.targetDom.querySelector('[share="wechat"]');if(0===t.length)return!1;let e=axAddElem("div",{class:"ax-qrcode"}),s=axAddElem("div",{class:"ax-qrcode-body"}),i=axAddElem("div",{class:"ax-qrcode-title"},this.options.qrTitle);new QRCode(s,{text:this.options.url,width:this.options.qrSize,height:this.options.qrSize}),e.appendChild(s),e.appendChild(i),new axPopup(t,{content:e,padding:!0,placement:"bottom",close:!1,footerShow:!1})}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axComplete{constructor(t,e){return this.inputDom=axIdToDom(t),!!this.inputDom&&(this.options=axExtend({insName:"",content:"",async:"",ajaxType:"post",fuzzy:!0,reorder:!1,limit:20,ignore:!0,keys:"label",template:"",className:"",breakShow:!0,msgShow:!0,msgPlace:"inside",highlight:!0,fill:"label",idStart:0,language:{message:"共有<# this.value #>个结果符合要求"},popup:{rel:"",triggerRel:"click"},onInit:"",onSearch:"",onSelected:"",onUpdate:"",onDestroy:""},e,this.inputDom,this.constructor.name),this.handlers={},this.inputEdit=(()=>{let t=this.inputDom.value;this.search(t)}),this.init(),this)}beforeInit(){this.inputDom.removeEventListener("input",this.inputEdit),this.popupIns&&(this.popupIns.destroy(),this.popupIns=null),this.contentXhr&&this.contentXhr.abort()}async init(){this.beforeInit(),axInstance.push(this,this.options.insName,"complete"),this.destroyed=!1,this.createSkeleton(),this.setAttribute(),this.popupIns=new axPopup(this.inputDom,axExtend({content:this.wrapperDom,trigger:"input",padding:!1,placement:"bottom-start",close:!1,footerShow:!1},this.options.popup)),this.popupIns.on("show",()=>{let t=this.inputDom.value;this.inputDom.value="",this.inputDom.focus(),this.inputDom.value=t}),this.popupIns.on("hidden",()=>{!this.inputDom.value&&this.reset()}),this.inputDom.addEventListener("input",this.inputEdit,!1),this.rawData=[],this.sliceData=[],this.filterData=[];let t=axType(this.options.content);return"String"===t&&this.options.async?await this.getAsyncData(this.options.async,"",t=>{this.getRawData(t)}):this.getRawData(this.options.content),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}createSkeleton(){this.wrapperDom=axAddElem("div",{class:"ax-complete"}),this.listDom=axAddElem("ul"),this.wrapperDom.appendChild(this.listDom),this.msgDom=axAddElem("div",{class:"ax-complete-msg"},axTplEngine(this.options.language.message,{value:0})),this.options.msgShow&&("newline"===this.options.msgPlace?this.inputDom.insertAdjacentElement("afterend",this.msgDom):axStrType(this.options.msgPlace)?axIdToDom(this.options.msgPlace).appendChild(this.msgDom):this.wrapperDom.insertAdjacentElement("afterbegin",this.msgDom))}setAttribute(){this.options.className&&axClass.add(this.wrapperDom,this.options.className),this.inputDom.setAttribute("autocomplete","off")}getRawData(t){let e=axType(t);if("String"===e)if(axStrType(t))this.rawData=axSelectToArr(t,this.options.idStart).data;else{let e=axSplitToArr(t);this.rawData=e.map((t,e)=>({id:this.options.idStart+e,label:t,value:t}))}else"Array"===e&&("object"==typeof t[0]?(t.forEach((t,e)=>{!t.hasOwnProperty("id")&&(t.id=this.options.idStart+e),!t.hasOwnProperty("value")&&(t.value=t.label)}),this.rawData=t):"string"==typeof t[0]&&(this.rawData=t.map((t,e)=>({id:this.options.idStart+e,label:t,value:t}))));this.rawData.forEach(t=>{t.dom=axStrToDom(axTplEngine(this.getTemplate(),t)),t.dom.onclick=(()=>{this.inputDom.value=t[this.options.fill],this.popupIns.hide(),this.handlers.hasOwnProperty("selected")&&this.emit("selected",t),this.options.onSelected&&this.options.onSelected.call(this,t)})}),this.sliceData=this.getSliceData(),this.reRenderList(this.sliceData)}getSliceData(){return this.options.limit>0?this.rawData.slice(0,this.options.limit):this.rawData}getFilterData(t){this.filterData=axArrSearch(t,this.options.keys,this.rawData,{fuzzy:this.options.fuzzy,reorder:this.options.reorder,limit:this.options.limit,ignore:this.options.ignore})}getAsyncData(t="json",e,s){return axAjax({data:"sql"===t?{value:axSplitToArr(e," ","one").join(","),keys:this.options.keys,fuzzy:this.options.fuzzy,limit:this.options.limit,reorder:this.options.reorder,ignore:this.options.ignore}:"",type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:e=>{if(axIsEmpty(e.content))return console.warn(`No data obtained from the ${"sql"===t?"database":"json"}!`),!1;this.listDom.innerHTML="",s&&s(e.content)}},this.listDom)}reRenderList(t){if(this.listDom.innerHTML="",axIsEmpty(t))return!1;let e=document.createDocumentFragment();t[0].hasOwnProperty("weight")?(t.forEach(t=>{if(this.options.highlight){let e=new RegExp(t.keys.join("|"),"g"),s=t.source.dom.querySelector("[label]")||t.source.dom.querySelector("[caption]");s.innerHTML=s.innerHTML.replace(/<[^>]+>/g,"").replace(e,t=>`<s>${t}</s>`)}e.appendChild(t.source.dom)}),this.output=t):t.forEach(t=>{if(this.options.highlight){let e=t.dom.querySelector("[label]")||t.dom.querySelector("[caption]");e.innerHTML=e.innerHTML.replace(/<[^>]+>/g,"")}e.appendChild(t.dom)}),this.listDom.appendChild(e)}getTemplate(){let t=`<li>\n                        ${this.options.breakShow?"<hr/>":""}\n                        <div class="ax-bulletin ax-hover">\n                            <div class="ax-bulletin-body"><i caption><# this.label #></i></div>\n                        </div>\n                    </li>\n                        `;return this.options.template||t}async search(t,e){if(this.destroyed)return this;let s=[];return t?("String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql",t,t=>{this.getRawData(t),this.popupIns.show(),s=this.sliceData,this.msgDom.innerHTML=axTplEngine(this.options.language.message,{value:s.length})}):(this.getFilterData(t),0===this.filterData.length?this.listDom.innerHTML="":(this.reRenderList(this.filterData),this.popupIns.show(),s=this.filterData)),!(0!==s.length||"inside"===this.options.msgPlace&&this.options.msgShow)&&this.popupIns.hide(),this.msgDom.innerHTML=axTplEngine(this.options.language.message,{value:s.length})):this.popupIns.hide(),this.handlers.hasOwnProperty("search")&&this.emit("search",s),this.options.onSearch&&this.options.onSearch.call(this,s),e&&e.call(this,data),this}async update(t,e){return this.destroyed?this:(this.options.content=t,"String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql","",t=>{this.getRawData(t)}):this.getRawData(this.options.content),this.handlers.hasOwnProperty("update")&&this.emit("update",this.sliceData),this.options.onUpdate&&this.options.onUpdate.call(this,this.sliceData),e&&e.call(this,this.sliceData),this)}async reset(t){return this.destroyed?this:(this.inputDom.value="","String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql","",t=>{this.getRawData(t)}):this.getRawData(this.sliceData),this.handlers.hasOwnProperty("reset")&&this.emit("reset",this.sliceData),this.options.onReset&&this.options.onReset.call(this,this.sliceData),t&&t.call(this,this.sliceData),this)}destroy(t){return this.beforeInit(),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axDate{constructor(t,e){this.inputDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",content:"",format:"YYYY/MM/DD",mode:"single",maxSelection:100,rows:1,cols:1,minDate:"",maxDate:"",flexible:!1,footerShow:!0,nowHide:!1,nowShow:!1,clearShow:!0,closeShow:!0,cancelShow:!1,resultShow:!1,confirmHide:!0,autoFill:!1,autoCorrect:!0,forceSelect:!1,language:{month:["01","02","03","04","05","06","07","08","09","10","11","12"],week:["一","二","三","四","五","六","日"],year:{prev:"上一页",next:"下一页",placeholder:"输入年份"},range:"至",unit:{Y:"年",M:"月",D:"日",h:"时",m:"分",s:"秒"},time:{select:"时间选择",start:"开始时间",end:"结束时间"},button:{clear:"清除",close:"关闭",cancel:"清除并关闭",now:"现在",confirm:"确定"},toolTip:{restore:"还原",reset:"归零",now:"现在",close:"关闭"},empty:'<i class="ax-color-ignore">还未选择日期!</i>',message:{requireTwoValue:"区间模式至少需要选择两个日期！",requireYearFormat:"请填入3或4位年份数字!",requireOneSelected:"请至少选择一个日期!"},noEvent:'<i class="ax-color-ignore">今天没有需要安排的事项!</i>'},weekStart:"monday",separator:",",buttonDom:"",positionDom:"",display:"popup",toDrawer:!0,bubble:{},fillNow:!1,next:"",lunar:{enable:!1,handler:"",map:{},template:"<div>农历：<#this.animal#>年 <#this.month#><#this.date#></div>\n                        <div>干支：<#this.gzYear#>年 <#this.gzMonth#>月 <#this.gzDate#>日</div>\n                        <div>节日/节气：<#this.term#> <#this.lunarFestival#> <#this.solarFestival#></div>\n                        ",arrange:["solarFestival","lunarFestival","term","date"],tags:[]},event:{enable:!1,display:"popup",template:"<div label><#this.label#></div><div content><#this.content#></div>",list:[]},menu:[],onInit:"",onClear:"",onSet:"",onSetRange:"",onCreatePanels:"",onCancel:"",onConfirm:"",onSetTime:"",onUpdate:"",onDestroy:"",onSave:""},e,this.inputDom,this.constructor.name),this.handlers={},this.triggerShow=(()=>{this.active(this)}),this.content=[],this.raw=[],this.monthStr=`\n            <li><span content><i label>01${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>02${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>03${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>04${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>05${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>06${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>07${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>08${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>09${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>10${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>11${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>12${this.options.language.unit.M}</i></span></li>\n        `,this.init()}init(){if(axInstance.push(this,this.options.insName,"date"),this.destroyed=!1,this.data={startDate:"",selectedDates:[],type:"",panels:[],menu:[],year:{panelDom:"",listDom:"",list:[]},month:{panelDom:"",listDom:"",list:[]},time:[]},this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.options.format=axTrim(this.options.format),this.data.type=axDateMethod.type(this.options.format),"range"===this.options.mode&&1===this.options.cols&&(this.options.cols=2),"phone"===axClient()?("inline"!==this.options.display&&this.options.toDrawer&&(this.options.display="drawer"),this.options.lunar.enable?(this.options.cols=1,this.options.rows=1):this.options.cols>1&&(this.options.cols=1,this.options.rows=2),this.bilateralCondition=!1):this.bilateralCondition="time"!==this.data.type&&this.options.cols>1||"time"===this.data.type&&"range"===this.options.mode,this.separator="range"===this.options.mode&&this.options.language.range?this.options.language.range:this.options.separator,this.positionDom=this.options.positionDom?axIdToDom(this.options.positionDom):this.inputDom,this.buttonDom=this.options.buttonDom?axIdToDom(this.options.buttonDom):this.inputDom,this.selectedDatesProxy=new axObserve(this.data.selectedDates,{deep:!0}),this.selectedDatesProxy.instance.on("complete",t=>{if(this.resultDom){let e=t.target.map(t=>axDateMethod.fillFormat(t,this.options.format)),s=this.resultIns.content.map(t=>t.value);this.options.resultShow&&this.resultIns&&JSON.stringify(e)!=JSON.stringify(s)&&this.resultIns.update({content:e})}this.options.autoFill&&this.confirm(!1)}),"time"!==this.data.type&&this.handleDayContent(),this.createSkeleton(),"time"!==this.data.type?this.createPanels():this.handleTimeContent(),"inline"===this.options.display?this.positionDom.insertAdjacentElement("afterend",this.targetDom):"popup"===this.options.display?this.bubbleIns=this.bubbleIns||new axPopup(this.positionDom,axExtend({size:"",padding:!1,placement:"bottom-start",close:!1,footerShow:!1,rel:this.options.buttonDom,content:this.targetDom},this.options.bubble)):"dialog"===this.options.display?this.bubbleIns=this.bubbleIns||new axDialog(axExtend({size:"",padding:!1,footerShow:!1,content:this.targetDom,rel:this.options.buttonDom},this.options.bubble),this.buttonDom):"drawer"===this.options.display&&(this.options.flexible=!0,this.bubbleIns=this.bubbleIns||new axDrawer(axExtend({size:"",padding:!1,footerShow:!1,content:this.targetDom,placement:"bottom",rel:this.options.buttonDom},this.options.bubble),this.buttonDom)),this.bubbleIns&&this.bubbleIns.on("show",()=>{this.checkBeforeShow()}),this.setAttribute(),this.renderFinish(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}createPanel(t,e){let s=axDateMethod.toDate(e,this.data.type),i={},o=()=>"monday"===this.options.weekStart?`<li>${this.options.language.week[0]}</li>\n                            <li>${this.options.language.week[1]}</li>\n                            <li>${this.options.language.week[2]}</li>\n                            <li>${this.options.language.week[3]}</li>\n                            <li>${this.options.language.week[4]}</li>\n                            <li>${this.options.language.week[5]}</li>\n                            <li>${this.options.language.week[6]}</li>`:`<li>${this.options.language.week[6]}</li>\n                            <li>${this.options.language.week[0]}</li>\n                            <li>${this.options.language.week[1]}</li>\n                            <li>${this.options.language.week[2]}</li>\n                            <li>${this.options.language.week[3]}</li>\n                            <li>${this.options.language.week[4]}</li>\n                            <li>${this.options.language.week[5]}</li>`;this.data.type.includes("date")?(s.setMonth(s.getMonth()+t),i.month=s.getMonth(),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n                            <li panel='${this.options.lunar.enable?"lunar":"date"}'>\n                                <div header>\n                                    <span year><i>${i.year}</i>${this.options.language.unit.Y}</span><span month><i>${i.month+1}</i>${this.options.language.unit.M}</span>\n                                </div>\n                                <div body days>\n                                    <ul column>\n                                        ${o()}\n                                    </ul>\n                                    <ul list></ul>\n                                </div>\n                            </li>\n                            `),i.type="date",i.headerDom=i.panelDom.querySelector("[header]"),i.yearDom=i.headerDom.querySelector("[year]"),i.monthDom=i.headerDom.querySelector("[month]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelDayList(i.listDom,s)):"month"===this.data.type?(s.setFullYear(s.getFullYear()+t),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n                        <li panel='month'>\n                            <div header>\n                                <span year><i>${i.year}</i>${this.options.language.unit.Y}</span>\n                            </div>\n                            <div body>\n                                <ul list>${this.monthStr}</ul>\n                            </div>\n                        </li>\n                        `),i.type="month",i.headerDom=i.panelDom.querySelector("[header]"),i.yearDom=i.headerDom.querySelector("[year]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelMonthList(i.listDom,s)):"year"===this.data.type&&(s.setFullYear(s.getFullYear()+18*t-7),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n            <li panel='year'>\n                <div header>\n                    <span year><i>${i.year}</i>${this.options.language.unit.Y}~<i>${i.year+17}</i>${this.options.language.unit.Y}</span>\n                </div>\n                <div body>\n                    <ul list></ul>\n                </div>\n            </li>\n            `),i.type="year",i.headerDom=i.panelDom.querySelector("[header]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelYearList(i.listDom,s)),i.bodyDom=i.panelDom.querySelector("[body]"),this.data.panels.push(i),this.panelsDom.appendChild(i.panelDom)}createPanels(t,e=!1,s){if(this.destroyed)return!1;let i,o=this.options.rows*this.options.cols;if(i=t?axDateMethod.toDate(t,this.data.type):this.data.startDate,!e&&this.inCurPanels(i))return!1;this.data.panels=[],this.panelsDom.innerHTML="";for(let t=0;t<o;t++)this.createPanel(t,i);this.data.startDate=i;let a=this.getCurGrids();a.forEach(t=>{this.inSelectedDate(t)&&!t.selected&&this.selectedAttrToggle(t,!0)}),"range"===this.options.mode&&this.setRangeAttr(a);let n=axDateMethod.toObj(new Date,!1,this.data.type),r=a.find(t=>JSON.stringify(t.value)==JSON.stringify(n));return r&&r.wrapperDom.setAttribute("now",""),this.renderFinish(),this.handlers.hasOwnProperty("createPanels")&&this.emit("createPanels",""),this.options.onCreatePanels&&this.options.onCreatePanels.call(this),s&&s.call(this),this}inSelectedDate(t){let e=this.getDateValue(t,this.data.type);return this.selectedDatesProxy.proxy.some(t=>{let{hh:s,mm:i,ss:o,...a}=t;return JSON.stringify(a)==JSON.stringify(e)})}showEvent(t){if(this.todayDom.innerHTML=axDateMethod.fillFormat(t.value,"YYYY年MM月DD日 周WW"),this.options.lunar.enable&&this.options.lunar.handler){let e={...this.options.lunar.map},s=this.options.lunar.handler(t.value.YYYY,t.value.MM+1,t.value.DD);for(let t in e)e.hasOwnProperty(t)&&(e[t]=s[e[t]]);this.lunarDom.innerHTML=axTplEngine(this.options.lunar.template,e)}let e=this.options.event.list.find(e=>JSON.stringify(axDateMethod.toObj(e.date,!1,"date"))==JSON.stringify(axDateMethod.toObj(t.value,!1,"date")));this.eventDom.innerHTML=e&&e.content?axTplEngine(this.options.event.template,e):this.options.language.noEvent}inCurPanels(t,e){let s,i="datetime"===this.data.type?"date":this.data.type,o="Object"===axType(t)?{...t}:t,a=axDateMethod.toObj(o,!1,i),n=e||this.getCurGrids();return s=n.some(t=>JSON.stringify(t.value)==JSON.stringify(a)),s}setAttribute(){!this.bilateralCondition&&this.targetDom.setAttribute("footerType","line"),this.targetDom.setAttribute("mode",this.options.mode),this.data.type&&this.targetDom.setAttribute("type",this.data.type),this.targetDom.setAttribute("display",this.options.display),"INPUT"===this.inputDom.nodeName&&this.inputDom.setAttribute("readonly",""),this.options.flexible&&this.targetDom.setAttribute("flexible",""),this.targetDom.setAttribute("footerShow",this.options.footerShow),this.options.lunar.enable&&this.targetDom.setAttribute("lunar","")}inputValueToDates(t=!0){let e,s=[];return e="INPUT"===this.inputDom.nodeName?this.inputDom.value.trim():this.inputDom.innerText.trim(),!e||isNaN(parseFloat(e.substr(0,2)))?s:(e&&(s=t?e.split(this.separator).map(t=>new Date(t)):axTrim(e)),s)}contentToArr(){let t=axType(this.options.content),e=[];if("time"===this.data.type)this.inputDom&&(this.inputDom.value||this.inputDom.innerText)?e=this.inputValueToDates(!1):axIsEmpty(this.options.content)?e=axDateMethod.fillFormat(new Date,this.options.format):"String"===t?e=this.options.content.split(this.separator):"Array"===t&&(e=this.options.content);else if(axIsEmpty(this.options.content))e=this.inputDom&&(this.inputDom.value||this.inputDom.innerText)?this.inputValueToDates(!0):this.options.fillNow?[new Date]:[];else{let t=axType(this.options.content);"Array"===t?e=this.options.content.map(t=>"string"==typeof t?new Date(t):t):"Date"===t?e.push(this.options.content):"String"===t&&(e=this.options.content.split(this.separator).map(t=>new Date(t)))}return e}handleDayContent(){this.content=this.contentToArr(),this.content.length>1&&"range"===this.options.mode&&(this.content.sort(function(t,e){return t-e}),this.content.length>2&&(this.content=this.content.slice(0,2))),this.data.startDate=0===this.content.length?new Date:this.content[0];let t=this.datesToObjs(this.content);if(this.selectedDatesProxy.proxy.splice(0,this.data.selectedDates.length,...t),this.raw=[...t],this.inputDom){let t=this.selectedDatesProxy.proxy.map(t=>axDateMethod.fillFormat(t,this.options.format)).join(this.separator);this.fillInput(t)}}timeStrSTD(t,e="object"){let s=axType(t),i=[],o=[],a=t=>{let e,s,i=axType(t);if("String"===i)e=axTrim(t).split(":").map(t=>~~t),1===e.length?e.push(0,0):2===e.length&&e.push(0),s={hh:e[0],mm:e[1],ss:e[2]};else if("Object"===i){for(let e in t)t.hasOwnProperty(e)&&(t[e]=~~t[e]);!t.hasOwnProperty("mm")&&(t.mm=0),!t.hasOwnProperty("ss")&&(t.ss=0),s=t}return s};return"Array"===s?t.forEach(t=>{i.push(a(t))}):i.push(a(t)),"string"===e?(o=i.map(t=>`${axDateMethod.fillZero(t.hh)}:${axDateMethod.fillZero(t.mm)}:${axDateMethod.fillZero(t.ss)}`),o):i}handleTimeContent(){if(this.content=this.timeStrSTD(this.contentToArr()),"range"===this.options.mode?0===this.content.length?this.setTime([{hh:0,mm:0,ss:0},{hh:0,mm:0,ss:0}]):1===this.content.length?this.setTime([this.content[0],{hh:0,mm:0,ss:0}]):this.setTime(this.content):0===this.content.length?this.setTime({hh:0,mm:0,ss:0}):this.setTime(this.content[0]),this.raw=[...this.content],this.inputDom&&!axIsEmpty(this.options.content)){let t=this.timeStrSTD(this.content,"string").join(this.separator);"INPUT"===this.inputDom.nodeName?this.inputDom.value=t:this.inputDom.innerText=t}}datesToObjs(t){let e=[];return"year"===this.data.type?e=t.map(t=>({YYYY:t.getFullYear()})):"month"===this.data.type?e=t.map(t=>({YYYY:t.getFullYear(),MM:t.getMonth()})):"time"===this.data.type?e=t.map(t=>({hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()})):"date"===this.data.type?e=t.map(t=>({YYYY:t.getFullYear(),MM:t.getMonth(),DD:t.getDate()})):"datetime"===this.data.type&&(e=t.map(t=>({YYYY:t.getFullYear(),MM:t.getMonth(),DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()}))),e}checkBeforeShow(){if(!this.options.autoCorrect)return!1;if("time"!==this.data.type){let t=this.inputValueToDates(),e=this.datesToObjs(t),s=JSON.stringify(e)==JSON.stringify(this.data.selectedDates);s||(this.data.startDate=t.length>0?t[0]:axDateMethod.toDate(this.data.selectedDates[0],this.data.type),this.createPanels(),this.clear(),this.set(e))}else{let t=this.timeStrSTD(this.inputValueToDates(!1));this.setTime(t)}}createSkeleton(){let t="",e="";"time"!==this.data.type&&(t=`<div outer>\n                            <div prev></div>\n                                <div next></div>\n                                <ul panels ${this.bilateralCondition?'style="grid-template-columns:repeat('+this.options.cols+', 1fr)"':""}></ul>\n                            </div>`),this.options.footerShow&&(e=`<div footer>\n                            ${this.bilateralCondition?"<div left></div><div right></div>":""}\n                            </div>`),this.targetDom=axStrToDom(`\n        <div class="ax-date">\n            <div wrapper>\n                ${this.options.menu.length>0?"<ul menu></ul>":""}\n                <div main>\n                    ${this.options.resultShow&&"time"!==this.data.type?"<div result></div>":""}\n                    ${t}\n                    ${e}\n                </div>\n            </div>\n        </div>\n    `),this.wrapperDom=this.targetDom.querySelector("[wrapper]"),this.menuDom=this.targetDom.querySelector("[menu]"),this.resultDom=this.targetDom.querySelector("[result]"),this.outerDom=this.targetDom.querySelector("[outer]"),this.prevDom=this.targetDom.querySelector("[prev]"),this.nextDom=this.targetDom.querySelector("[next]"),this.mainDom=this.targetDom.querySelector("[main]"),this.panelsDom=this.targetDom.querySelector("[panels]"),this.options.footerShow&&(this.footerDom=this.targetDom.querySelector("[footer]"),this.timeBtnWrapperDom=this.bilateralCondition?this.footerDom.querySelector("[left]"):this.footerDom,this.handleBtnsWrapperDom=this.bilateralCondition?this.footerDom.querySelector("[right]"):this.footerDom,this.confirmDom=axAddElem("i",{class:`ax-btn${this.bilateralCondition?"":" ax-text"} `,confirm:""},this.options.language.button.confirm),this.clearDom=this.options.clearShow?axAddElem("i",{class:"ax-btn ax-text",clear:""},this.options.language.button.clear):"",this.closeDom=this.options.closeShow?axAddElem("i",{class:"ax-btn ax-text",close:""},this.options.language.button.close):"",this.cancelDom=this.options.cancelShow?axAddElem("i",{class:"ax-btn ax-text",cancel:""},this.options.language.button.cancel):"",this.nowDom=this.options.nowShow?axAddElem("i",{class:"ax-btn ax-text",now:""},this.options.language.button.now):"",this.timeBtnDom=this.data.type.includes("time")?axAddElem("i",{class:"ax-btn ax-text",time:""},this.options.language.time.select):"",this.yearSearchDom="year"===this.data.type?axAddElem("span",{search:""},`<input type="text" placeholder="${this.options.language.year.placeholder}" /><i go>arrow-right</i>`):"",this.confirmDom&&this.handleBtnsWrapperDom.appendChild(this.confirmDom),this.nowDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.nowDom),this.clearDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.clearDom),this.closeDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.closeDom),this.cancelDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.cancelDom),this.timeBtnDom&&this.timeBtnWrapperDom.insertAdjacentElement("afterbegin",this.timeBtnDom),this.yearSearchDom&&this.timeBtnWrapperDom.insertAdjacentElement("afterbegin",this.yearSearchDom)),this.options.event.enable&&(this.detailDom=axAddElem("div",{detail:""}),
this.todayDom=axAddElem("div",{today:""}),this.eventDom=axAddElem("div",{event:""},this.options.language.noEvent),this.detailDom.appendChild(this.todayDom),this.detailDom.appendChild(this.eventDom),this.options.lunar.enable&&this.options.lunar.handler&&(this.lunarDom=axAddElem("div",{lunar:""}),this.todayDom.insertAdjacentElement("afterend",this.lunarDom)),"inline"===this.options.event.display?this.wrapperDom.appendChild(this.detailDom):"popup"===this.options.event.display&&(this.detailIns=this.detailIns||new axPopup(this.panelsDom,{content:this.detailDom,trigger:"hovor",placement:"bottom",size:"sm",footerShow:!1}))),this.data.type.includes("time")&&this.options.footerShow&&this.createTimeSelectPanel(),this.createMenu(),"time"!==this.data.type&&(this.resultDom&&(this.resultIns=this.resultIns||new axTags(this.resultDom,{content:"",closable:!0,text:!0,emptyTip:this.options.language.empty})),"year"===this.data.type||"month"===this.data.type?(this.prevDom.innerHTML='<i prevYear class= "ax-iconfont ax-icon-left-double"></i> ',this.nextDom.innerHTML='<i nextYear class= "ax-iconfont ax-icon-right-double"></i> '):this.data.type.includes("date")&&(this.prevDom.innerHTML='<i prevYear class= "ax-iconfont ax-icon-left-double"></i> <i prevMonth class="ax-iconfont ax-icon-left"></i>',this.nextDom.innerHTML='<i nextYear class= "ax-iconfont ax-icon-right-double"></i> <i nextMonth class="ax-iconfont ax-icon-right"></i>'),this.prevYearDom=this.prevDom.querySelector("[prevYear]"),this.prevMonthDom=this.prevDom.querySelector("[prevMonth]"),this.nextYearDom=this.targetDom.querySelector("[nextYear]"),this.nextMonthDom=this.targetDom.querySelector("[nextMonth]"),("month"===this.data.type||this.data.type.includes("date"))&&this.createYearPanel(),this.data.type.includes("date")&&this.createMonthPanel())}createMenu(){if(this.options.menu.length>0){this.data.menu=this.options.menu;let t=document.createDocumentFragment();this.data.menu.forEach(e=>{let s=axAddElem("li","",e.label);e.dom=s,t.appendChild(s)}),this.menuDom.appendChild(t),this.data.menu.forEach(t=>{t.dom.onclick=(()=>{t.action&&t.action.call(this),t.dom.setAttribute("selected",""),t.selected=!0,this.data.menu.filter(e=>e!==t).forEach(t=>{Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected")})})})}}createMonthPanel(t){this.data.month.panelDom=axAddElem("div",{panel:"month"},`<div body><ul list>${this.monthStr}</ul></div>`),this.data.month.listDom=this.data.month.panelDom.querySelector("[list]"),[...this.data.month.listDom.children].forEach((t,e)=>{let s={wrapperDom:t,contentDom:t.querySelector("[content]"),value:e};this.data.month.list.push(s)}),this.panelsDom.insertAdjacentElement("afterend",this.data.month.panelDom),t&&t()}createYearPanel(t){this.data.year.panelDom=axAddElem("div",{panel:"year"},`\n    <div body>\n                        <ul list></ul>\n                        <ul pages>\n                            <li><i prev>${this.options.language.year.prev}</i></li>\n                            <li><input type="text" placeholder=${this.options.language.year.placeholder} class="ax-sm"/><i go>arrow-right</i></li>\n                            <li><i next>${this.options.language.year.next}</i></li>\n                        </ul>\n                    </div>\n    `),this.data.year.listDom=this.data.year.panelDom.querySelector("[list]"),this.data.year.prevDom=this.data.year.panelDom.querySelector("[prev]"),this.data.year.nextDom=this.data.year.panelDom.querySelector("[next]"),this.data.year.inputDom=this.data.year.panelDom.querySelector("input"),this.data.year.goDom=this.data.year.panelDom.querySelector("[go]"),this.panelsDom.insertAdjacentElement("afterend",this.data.year.panelDom),t&&t()}createYearList(t,e,s){this.data.year.listDom.innerHTML="",this.data.year.list=[];for(let s=0;s<15;s++){let i=e||0===e?e+s:t.year-7+s,o={wrapperDom:axAddElem("li","",`<span content> <i label>${i}年</i></span> `),value:i};o.contentDom=o.wrapperDom.querySelector("[content]"),o.labelDom=o.wrapperDom.querySelector("[label]"),this.data.year.listDom.appendChild(o.wrapperDom),this.data.year.list.push(o)}this.data.year.list.forEach(e=>{t.year===e.value?this.selectedAttrToggle(e,!0):this.selectedAttrToggle(e,!1),e.contentDom.onclick=(()=>{if(e.disabled)return!1;if(t.year!==e.value){let t=e.value;"month"===this.data.type?t=e.value-s:this.data.type.includes("date")&&(t=e.value-(this.data.panels[s].year-this.data.panels[0].year)),this.data.startDate.setFullYear(t),this.createPanels("",!0),axHide(this.data.year.panelDom)}})})}goto(t,e=!1,s){if(this.destroyed)return!1;let i=axDateMethod.toDate(t,this.data.type);e?this.set(i):this.createPanels(i),s&&s.call(this)}offset(t,e){if(this.destroyed)return!1;if(this.data.selectedDates.length>0){let e=this.data.selectedDates.map(e=>axDateMethod.toObj(axDateMethod.getChain(e,t),!1,this.data.type));this.set(e)}else this.data.startDate=axDateMethod.getChain(axDateMethod.toObj(new Date,!1,this.data.type),t),this.set(this.data.startDate);e&&e.call(this)}selectedAttrToggle(t,e){e?t.selected||(Reflect.set(t,"selected",!0),t.wrapperDom.setAttribute("selected","")):t.selected&&(Reflect.deleteProperty(t,"selected"),t.wrapperDom.removeAttribute("selected"))}setSelected(t,e,s){let i=this.findFromPanels(t,e,s),o=i.list,a=i.target,n=t=>{let e={};return e="range"===this.options.mode?1===this.selectedDatesProxy.proxy.length?this.data.type.includes("time")?{...t,...this.data.time[1].value}:t:this.data.type.includes("time")?{...t,...this.data.time[0].value}:t:this.data.time.length>0&&this.data.type.includes("time")?{...t,...this.data.time[0].value}:t,e},r=e=>{let s;if(s=this.data.type.includes("time")?t.hasOwnProperty("hh")&&t.hasOwnProperty("mm")&&t.hasOwnProperty("ss")?t:n(e.value):t.value||t,!e.disabled){if("range"===this.options.mode){let t=this.selectedDatesProxy.proxy.length;if(t<2){if(this.selectedDatesProxy.proxy.push(s),1===t){let t={...this.data.selectedDates[0]},e={...this.data.selectedDates[1]};axDateMethod.toDate(t)>axDateMethod.toDate(e)&&(this.selectedDatesProxy.proxy.sort((t,e)=>axDateMethod.toDate(t)-axDateMethod.toDate(e)),this.assignDaytime()),this.setRange(this.data.selectedDates)}}else this.clear(!1),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,s)}else if("single"===this.options.mode){if(this.inSelectedDate(s))return!1;this.clear(!1),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,s)}else"multiple"===this.options.mode&&!this.inSelectedDate(s)&&this.selectedDatesProxy.proxy.push(s);this.selectedAttrToggle(e,!0)}};o.includes(t)||a||(this.createPanels(t.hasOwnProperty("value")?t.value:t),a=this.findFromPanels(t).target),!a.selected&&r(a),this.options.event.enable&&a&&this.showEvent(a)}setUnselected(t,e,s){if(axIsEmpty(t))return!1;let i=s||this.getCurGrids(),o=this.findFromPanels(t,e,i).target,a=[];o&&this.selectedAttrToggle(o,!1),a=this.data.selectedDates.filter(e=>!axDateMethod.isSameDay(e,t.hasOwnProperty("value")?t.value:t)),this.selectedDatesProxy.proxy.splice(0,this.data.selectedDates.length,...a),"range"===this.options.mode&&this.data.selectedDates.length<2&&i.forEach(t=>{this.removeRangeAttr(t)})}setRangeAttr(t){if(2!==this.data.selectedDates.length)return!1;let e=t||this.getCurGrids(),s="datetime"===this.data.type?"date":this.data.type;e.forEach(t=>{this.removeRangeAttr(t),this.selectedAttrToggle(t,!1),axDateMethod.toDate(t.value,s)>axDateMethod.toDate(this.data.selectedDates[0],s)&&axDateMethod.toDate(t.value,s)<axDateMethod.toDate(this.data.selectedDates[1],s)&&t.wrapperDom.setAttribute("contain","")});let i=this.findFromPanels(this.data.selectedDates[0],"",e).target,o=this.findFromPanels(this.data.selectedDates[1],"",e).target;i&&(i.wrapperDom.setAttribute("start",""),this.selectedAttrToggle(i,!0)),o&&(o.wrapperDom.setAttribute("end",""),this.selectedAttrToggle(o,!0))}removeRangeAttr(t){t.wrapperDom.hasAttribute("start")&&t.wrapperDom.removeAttribute("start"),t.wrapperDom.hasAttribute("end")&&t.wrapperDom.removeAttribute("end"),t.wrapperDom.hasAttribute("contain")&&t.wrapperDom.removeAttribute("contain")}limitRange(t,e,s){if(!this.options.minDate||!this.options.maxDate||t.disabled)return!1;let i,o=axDateMethod.toDate(t.value,e),a=axDateMethod.toDate(this.options.minDate,e),n=axDateMethod.toDate(this.options.maxDate,e),r=t=>{i&&(t.disabled=!0,t.wrapperDom.setAttribute("disabled",""))};"date"===e||"month"===e?i=this.options.minDate&&o<a||this.options.maxDate&&o>n:"year"===e?i=this.options.minDate&&t.value.YYYY<~~this.options.minDate||this.options.maxDate&&t.value.YYYY>~~this.options.maxDate:"time"===e&&(a=axDateMethod.toObj(this.options.minDate,!1,e),n=axDateMethod.toObj(this.options.maxDate,!1,e),i=t.value<a[s]||t.value>n[s]),r(t)}getDateValue(t,e){let s=axType(t),i={};"Object"===s?i=t.hasOwnProperty("value")?t.value:t:"Number"===s?i=this.data.selectedDates[t]:"String"!==s&&"Date"!==s||(i=axDateMethod.toObj(t,!1,this.data.type));let{hh:o,mm:a,ss:n,...r}=i;return"year"===e?(Reflect.deleteProperty(r,"DD"),Reflect.deleteProperty(r,"MM")):"month"===e&&Reflect.deleteProperty(r,"DD"),r}getCurGrids(){return this.data.panels.map(t=>t.list).flat(1/0).filter(t=>!t.exceed)}findFromPanels(t,e,s){let i=this.getDateValue(t,this.data.type),o=s||this.getCurGrids(),a=e||o.find(t=>JSON.stringify(t.value)==JSON.stringify(i));return{target:a,list:o}}renderFinish(){if("time"!==this.data.type){let t=this.getCurGrids();if(this.data.panels.forEach(e=>{e.list.forEach(e=>{e.contentDom.onclick=(()=>{if(e.disabled)return!1;if(this.data.selectedDates.length>this.options.maxSelection)return console.warn(`The selected items have exceeded the ${this.options.maxSelection} limit!`),!1;let s=t.find(t=>JSON.stringify(t.value)==JSON.stringify(e.value));"multiple"===this.options.mode&&s&&s.selected?this.setUnselected(e,s,t):this.setSelected(e,s,t),this.handlers.hasOwnProperty("set")&&this.emit("set",e),this.options.onSet&&this.options.onSet.call(this,e)}),this.detailIns&&(e.contentDom.onmouseenter=(()=>{this.showEvent(e),this.detailIns.updatePosition(e.contentDom).show()}))})}),this.resultIns&&(this.resultIns.on("remove",(t,e)=>{let s=this.getCurGrids(),i=this.findFromPanels(e[0],"",s).target;i&&this.selectedAttrToggle(i,!1),this.selectedDatesProxy.proxy.splice(e[0],1),s.forEach(t=>{this.removeRangeAttr(t)})}),this.resultIns.on("update",()=>{this.resultIns.content.forEach(t=>{t.dom.onclick=(e=>{e.target.hasAttribute("close")||this.findFromPanels(t.value).target||this.createPanels(t.value)})})})),this.prevYearDom&&(this.prevYearDom.onclick=(()=>{let t=-1;"year"===this.data.type?t=-18*this.options.cols*this.options.rows:"month"===this.data.type&&(t=-this.options.cols*this.options.rows),this.createPanels(axDateMethod.getChain(this.data.startDate,{YYYY:t}),!0)})),this.nextYearDom&&(this.nextYearDom.onclick=(()=>{let t=1;"year"===this.data.type?t=18*this.options.cols*this.options.rows:"month"===this.data.type&&(t=this.options.cols*this.options.rows),this.createPanels(axDateMethod.getChain(this.data.startDate,{YYYY:t}),!0)})),this.data.type.includes("date")&&(this.prevMonthDom.onclick=(()=>{this.createPanels(axDateMethod.getChain(this.data.startDate,{MM:-1}),!0)}),this.nextMonthDom.onclick=(()=>{this.createPanels(axDateMethod.getChain(this.data.startDate,{MM:1}),!0)})),this.data.panels.forEach((t,e)=>{t.yearDom&&(t.yearDom.onclick=(()=>{this.data.year.panelDom.style.top=t.panelDom.offsetTop+t.headerDom.clientHeight+"px",this.data.year.panelDom.style.left=t.panelDom.offsetLeft+"px",this.data.month.panelDom&&axIsVisible(this.data.month.panelDom)&&axHide(this.data.month.panelDom),this.createYearList(t,"",e),axToggle(this.data.year.panelDom)}),this.data.year.prevDom.onclick=(()=>{this.createYearList(t,this.data.year.list[0].value-15,e)}),this.data.year.nextDom.onclick=(()=>{this.createYearList(t,this.data.year.list[14].value+1,e)}),this.data.year.goDom.onclick=(()=>{this.searchYearToRefresh(this.data.year.inputDom)}),this.data.year.inputDom.onkeyup=(t=>{"Enter"===t.code&&this.searchYearToRefresh(this.data.year.inputDom)})),t.monthDom&&(t.monthDom.onclick=(()=>{this.data.month.panelDom.style.top=t.panelDom.offsetTop+t.headerDom.clientHeight+"px",this.data.month.panelDom.style.left=t.panelDom.offsetLeft+"px",axIsVisible(this.data.year.panelDom)&&axHide(this.data.year.panelDom),this.data.month.list.forEach(s=>{t.month===s.value?this.selectedAttrToggle(s,!0):this.selectedAttrToggle(s,!1),s.contentDom.onclick=(()=>{t.month!==s.value&&(this.data.startDate.setMonth(s.value-e),this.createPanels("",!0),axHide(this.data.month.panelDom))})}),axToggle(this.data.month.panelDom)}))}),this.data.selectedDates.forEach((e,s)=>{let i=this.findFromPanels(e,"",t).target;i&&(this.selectedAttrToggle(i,!0),0===s&&this.options.event.enable&&this.showEvent(i))}),this.yearSearchDom){let t=this.yearSearchDom.querySelector("[go]"),e=this.yearSearchDom.querySelector("input");t.onclick=(()=>{this.searchYearToRefresh(e,!1)}),e.onkeyup=(t=>{"Enter"===t.code&&this.searchYearToRefresh(e,!1)})}this.timePanelsDom&&("range"===this.options.mode?0===this.data.selectedDates.length?this.setTime([{hh:0,mm:0,ss:0},{hh:0,mm:0,ss:0}]):1===this.data.selectedDates.length?this.setTime([this.data.selectedDates[0],{hh:0,mm:0,ss:0}]):this.setTime(this.data.selectedDates):0===this.data.selectedDates.length?this.setTime({hh:0,mm:0,ss:0}):this.setTime(this.data.selectedDates[0]),this.timeBtnDom&&(this.timeBtnDom.onclick=(()=>{axSlideToggle(this.timePanelsDom,"inline-grid",()=>{this.openTimeToPrevent()})})))}if(this.options.footerShow&&(this.confirmDom.onclick=(()=>{this.confirm()}),this.nowDom&&(this.nowDom.onclick=(()=>{this.now()})),this.clearDom&&(this.clearDom.onclick=(()=>{this.clear(!0)}))),this.data.type.includes("time")&&this.data.time.length>0){let t=this.data.time.map(t=>t.colsDom).flat(1/0);"inline"===this.options.display?this.openTimeToPrevent(t):this.bubbleIns&&this.bubbleIns.on("shown",()=>{this.openTimeToPrevent(t)})}this.bubbleIns?this.bubbleIns.on("shown",()=>{this.setResultWidth()}):this.setResultWidth(),this.save()}setResultWidth(){this.resultDom&&(this.resultDom.style.maxWidth=this.panelsDom.getBoundingClientRect().width+"px")}openTimeToPrevent(t){let e=t||this.data.time.map(t=>t.colsDom).flat(1/0);e.forEach(t=>{this.showForemost(t),axPreventScroll(t)})}searchYearToRefresh(t,e=!0){let s=t.value;!s||isNaN(s)||3!==s.length&&4!==s.length?new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireYearFormat}).show():(this.data.startDate.setFullYear(~~s),this.createPanels(),e&&axHide(this.data.year.panelDom))}createPanelDayList(t,e){t.innerHTML="";let s=axDateMethod.toDate(e,this.data.type);s.setDate(1);let i,o=[],a=s.getMonth(),n=s.getFullYear(),r=axDateMethod.getDays(s),l=axDateMethod.getChain(s,{MM:-1}),h=l.getMonth(),d=l.getFullYear(),p=axDateMethod.getChain(s,{MM:1}),c=p.getMonth(),m=p.getFullYear(),u=document.createDocumentFragment();i="monday"===this.options.weekStart?0===s.getDay()?7:s.getDay():0===s.getDay()?1:s.getDay()+1;let g=1;for(let t=1;t<=42;){let e,s={wrapperDom:axAddElem("li"),contentDom:axAddElem("span",{content:""}),labelDom:axAddElem("i",{label:""})};if(s.wrapperDom.appendChild(s.contentDom),s.contentDom.appendChild(s.labelDom),t<i?(e=axDateMethod.getDays({YYYY:d,MM:h})-i+t+1,s.value={YYYY:d,MM:h,DD:e},s.exceed=!0,s.wrapperDom.setAttribute("exceed","")):t>=i+r?(e=t-i-r+1,s.value={YYYY:m,MM:c,DD:e},s.exceed=!0,s.wrapperDom.setAttribute("exceed","")):(e=g,s.value={YYYY:n,MM:a,DD:e},g++),s.label=e,s.labelDom.innerText=e,this.limitRange(s,"date"),this.options.lunar&&this.options.lunar.handler){let t=this.options.lunar.handler(s.value.YYYY,s.value.MM+1,s.value.DD);if(t&&-1!=t){let e="",i="";for(let s of this.options.lunar.arrange)if(this.options.lunar.map.hasOwnProperty(s)&&t[this.options.lunar.map[s]]){e=t[this.options.lunar.map[s]],s.includes("Festival")?i="festival":"term"===s&&(i=s);break}s.lunarDom=axAddElem("u","",e),i&&s.lunarDom.setAttribute(i,""),s.labelDom.insertAdjacentElement("afterend",s.lunarDom)}if(this.options.lunar.tags.length>0)for(let t of this.options.lunar.tags){let e=axDateMethod.toObj(t.date,!1,this.data.type),i=axAddElem("s",t.props,t.content);if(JSON.stringify(e)==JSON.stringify(s.value)){s.contentDom.appendChild(i);break}}}if(this.options.event.enable)for(let t of this.options.event.list){let e=axDateMethod.toObj(t.date,!1,this.data.type);if(JSON.stringify(e)==JSON.stringify(s.value)){s.busy=!0,s.wrapperDom.setAttribute("busy","");break}}t++,u.appendChild(s.wrapperDom),o.push(s)}return t.appendChild(u),o}createPanelMonthList(t,e){let s=[];return[...t.children].forEach((t,i)=>{let o={wrapperDom:t,contentDom:t.querySelector("[content]"),value:{YYYY:e.getFullYear(),MM:i}};this.limitRange(o,"month"),s.push(o)}),s}createPanelYearList(t,e){let s=[],i=document.createDocumentFragment();for(let t=0;t<18;t++){let o=e.getFullYear()+t,a=axAddElem("li","",`<span content><i label>${o}年</i></span>`),n={wrapperDom:a,value:{YYYY:o}};n.contentDom=n.wrapperDom.querySelector("[content]"),this.limitRange(n,"year"),s.push(n),i.appendChild(a)}return t.appendChild(i),s}createLoopStr(t){let e="<li>";for(let s=0;s<t;s++)e+=`<div> <span content><i label>${axDateMethod.fillZero(s)}</i></span></div> `;return e+="</li>",e}createTimeList(t){return`\n    <li panel = "time">\n                        <span tools><i restore title='${this.options.language.toolTip.restore}'></i><i reset title='${this.options.language.toolTip.reset}'></i><i now title='${this.options.language.toolTip.now}'></i><i hide title='${this.options.language.toolTip.close}'></i></span>\n                        <div header>\n                            <span time>${t}</span>\n                        </div>\n                        <div body>\n                            <ul column>\n                                <li>${this.options.language.unit.h}</li>\n                                <li>${this.options.language.unit.m}</li>\n                                <li>${this.options.language.unit.s}</li>\n                            </ul>\n                            <ul list>\n                            ${this.createLoopStr(24)}\n                            ${this.createLoopStr(60)}\n                            ${this.createLoopStr(60)}\n                            </ul>\n                        </div>\n                    </li>\n    `}toggleTimeList(t,e){this.selectedAttrToggle(t,!0);let s=e.find(e=>e!=t&&e.selected);s&&this.selectedAttrToggle(s,!1)}getTimeListArr(t,e){let s=t.children,i=[];return[...s].forEach((t,s)=>{let o={wrapperDom:t,contentDom:t.querySelector("[content]"),value:s};this.options.format.includes(e)||(o.disabled=!0,o.wrapperDom.setAttribute("disabled","")),this.limitRange(o,"time",e),i.push(o)}),i}showForemost(t){let e=axType(t),s=t=>{let e=t.querySelector("[selected]"),s=e.getBoundingClientRect().height*Math.floor(~~e.innerText/2);e&&!axChildVisible(e,t)&&(t.scrollTop=s)};"Array"===e?t.forEach(t=>{s(t)}):s(t)}createTimeSelectPanel(){this.timePanelsDom=axAddElem("ul",{panels:"hms"}),"range"===this.options.mode?this.timePanelsDom.innerHTML=this.createTimeList(this.options.language.time.start)+this.createTimeList(this.options.language.time.end):this.timePanelsDom.innerHTML=this.createTimeList(this.options.language.time.select),[...this.timePanelsDom.querySelectorAll("[panel]")].forEach(t=>{let e=[...t.querySelectorAll("[list] li")],s={panelDom:t,colsDom:e,restoreDom:t.querySelector("[restore]"),resetDom:t.querySelector("[reset]"),nowDom:t.querySelector("[now]"),closeDom:t.querySelector("[hide]"),value:{},hh:this.getTimeListArr(e[0],"hh"),mm:this.getTimeListArr(e[1],"mm"),ss:this.getTimeListArr(e[2],"ss")};this.data.time.push(s)}),this.footerDom.insertAdjacentElement("beforebegin",this.timePanelsDom),this.data.time.forEach((t,e)=>{t.closeDom.onclick=(()=>{axSlideUp(this.timePanelsDom,"inline-grid")}),t.restoreDom.onclick=(()=>{this.raw[e]&&this.setTime(this.raw[e],e,!0)}),t.resetDom.onclick=(()=>{this.setTime({hh:0,mm:0,ss:0},e,!0)}),t.nowDom.onclick=(()=>{let t=axDateMethod.toObj(new Date,!1,this.data.type);this.setTime({hh:t.hh,mm:t.mm,ss:t.ss},e,!0)}),t.hh.forEach(s=>{s.contentDom.onclick=(()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.hh),t.value.hh=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)})}),t.mm.forEach(s=>{s.contentDom.onclick=(()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.mm),t.value.mm=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)})}),t.ss.forEach(s=>{s.contentDom.onclick=(()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.ss),t.value.ss=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)})})})}timeToUpdate(t,e,s=!1){s&&this.setTimeBtnHTML(),"time"===this.data.type||"single"!==this.options.mode&&"range"!==this.options.mode||this.data.selectedDates.length>=e+1&&Object.assign(this.selectedDatesProxy.proxy[e],t.value),"time"===this.data.type&&this.options.autoFill&&this.confirm(!1)}setTimeBtnHTML(){if(!this.data.type.includes("time")||!this.timeBtnDom)return!1;let t=this.data.time.map(t=>axIsEmpty(t.value)?this.options.language.time.select:`${axDateMethod.fillZero(t.value.hh)}:${axDateMethod.fillZero(t.value.mm)}:${axDateMethod.fillZero(t.value.ss)}`);this.timeBtnDom.innerHTML=t.join("~")}setTime(t,e=0,s=!1,i){if(axIsEmpty(t)||!this.data.type.includes("time")||this.destroyed)return!1;let o=axType(t),a=(e,i)=>{let o;o="string"==typeof e?axDateMethod.strToTimeObj(t):e,this.data.time[i].value.hh=o.hh,this.toggleTimeList(this.data.time[i].hh[o.hh],this.data.time[i].hh),this.data.time[i].value.mm=o.mm,this.toggleTimeList(this.data.time[i].mm[o.mm],this.data.time[i].mm),this.data.time[i].value.ss=o.ss,this.toggleTimeList(this.data.time[i].ss[o.ss],this.data.time[i].ss),s&&"datetime"===this.data.type&&this.timeToUpdate(this.data.time[i],i)};"Array"===o?t.forEach((t,e)=>{this.data.time.length>e&&a(t,e)}):a(t,e),this.setTimeBtnHTML(),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",t),this.options.onSetTime&&this.options.onSetTime.call(this,t),i&&i.call(this)}assignDaytime(){this.selectedDatesProxy.proxy.forEach((t,e)=>{this.data.time[e]&&Object.assign(t,this.data.time[e].value)})}confirm(t=this.options.confirmHide,e){if(this.destroyed)return this;let s="";if("time"!==this.data.type){if("range"===this.options.mode)if(0===this.data.selectedDates.length)s="";else{if(2!==this.data.selectedDates.length)return new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireTwoValue}).show(),!1;{let t=axDateMethod.fillFormat(this.data.selectedDates[0],this.options.format),e=axDateMethod.fillFormat(this.data.selectedDates[1],this.options.format);s=`${t}${this.options.language.range}${e} `}}else if(s=this.data.selectedDates.map(t=>axDateMethod.fillFormat(t,this.options.format)).join(this.options.separator),this.options.forceSelect&&!s)return new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireOneSelected}).show(),!1}else s=this.data.time.map(t=>axDateMethod.fillFormat(t.value,this.options.format)).join(this.separator);if(this.fillInput(s),t&&this.bubbleIns){this.bubbleIns.hide();let t=this.options.next?axInstance.find(this.options.next,"date"):null;t&&t.bubbleIns&&t.bubbleIns.show()}this.handlers.hasOwnProperty("confirm")&&this.emit("confirm",s),this.options.onConfirm&&this.options.onConfirm.call(this,s),e&&e.call(this,s)}fillInput(t){this.inputDom&&("INPUT"===this.inputDom.nodeName?this.inputDom.value=t:this.inputDom.innerHTML=t),this.save()}now(t=this.options.nowHide){if(this.destroyed)return this;let e=axDateMethod.toObj(new Date,!1,this.data.type);"time"===this.data.type?this.setTime(e):(this.timePanelsDom&&"range"!==this.options.mode&&this.setTime(e),this.setSelected(e)),t&&(this.confirm(),this.bubbleIns&&this.bubbleIns.hide())}save(t,e){return this.destroyed?this:!!this.options.storageName&&(setTimeout(()=>{t?(!t.hasOwnProperty("content")&&(t.content=this.inputValueToDates(!1)),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,Object.assign(this.options,{content:this.inputValueToDates(!1)}));let s=axLocalStorage.get(this.options.storageName);this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s)},0),this)}removeInstances(){this.targetDom.remove(),this.bubbleIns&&(this.bubbleIns.destroy(),this.bubbleIns=null),this.detailIns&&(this.detailIns.destroy(),this.detailIns=null),this.resultIns&&(this.resultIns.destroy(),this.resultIns=null),this.options.storageName&&axLocalStorage.set(this.options.storageName,{})}update(t,e){return this.destroyed?this:(this.removeInstances(),this.options=axExtend(this.options,t),this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this),this)}destroy(t){return this.removeInstances(),this.inputDom.onclick=null,this.positionDom&&(this.positionDom.onclick=null),this.buttonDom&&(this.buttonDom.onclick=null),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}setValuesToObjs(t){let e=axType(t),s=[];if("Array"===e&&(s=t),"Date"===e)s=[t];else if("Object"===e)s=[t];else if("String"===e){let e;e=t.includes(this.options.separator)?this.options.separator:this.separator,s=t.split(e)}return 0===s.length?[]:s.map(t=>axDateMethod.toObj(t,!1,this.data.type))}set(t,e){if(axIsEmpty(t)||this.destroyed)return!1;let s=this.setValuesToObjs(t);return 0!==s.length&&("range"===this.options.mode?(s.length>=2?(s.splice(2,s.length-2),this.setRange(s)):this.setSelected(s[0]),this.setTime(s,"",!0)):"single"===this.options.mode?(this.setSelected(s[0]),this.setTime(s[0],0,!0)):"multiple"===this.options.mode&&s.forEach(t=>{this.setSelected(t)}),this.handlers.hasOwnProperty("set")&&this.emit("set",s),this.options.onSet&&this.options.onSet.call(this,s),e&&e.call(this,s),this)}setRange(t,e){if(axIsEmpty(t)||2!==t.length||this.destroyed)return!1;let s=t.map(t=>axDateMethod.toObj(t,!0,this.data.type)),i=this.getCurGrids();return axDateMethod.sort(s),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,...s),this.inCurPanels(s[0],i)||this.inCurPanels(s[1],i)?this.setTime(s):this.createPanels(s[0]),this.setRangeAttr(),this.handlers.hasOwnProperty("ranged")&&this.emit("ranged",s),this.options.onRanged&&this.options.onRanged.call(this,s),e&&e.call(this,s),this}cancel(t,e){if(axIsEmpty(t)||this.destroyed)return!1;let s=this.setValuesToObjs(t);return 0!==s.length&&(s.forEach(t=>{this.setUnselected(t)}),this.handlers.hasOwnProperty("cancel")&&this.emit("cancel",s),this.options.onCancel&&this.options.onCancel.call(this,s),e&&e.call(this,s),this)}clear(t=!0,e){if(this.destroyed)return this;if("time"!==this.data.type){this.selectedDatesProxy.proxy.splice(0),this.resultIns&&this.resultIns.clear();let t=this.getCurGrids();t.forEach(t=>{t.selected&&this.selectedAttrToggle(t,!1),this.removeRangeAttr(t)})}if(t&&this.timePanelsDom)for(let t in this.data.time)this.setTime({hh:0,mm:0,ss:0},t);return this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),this.options.onClear&&this.options.onClear.call(this),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axRanges=[];class axRange{constructor(t,e){if(this.targetDom="string"==typeof t?document.querySelector(t):t,!(this instanceof axRange))return new axRange(t,e);let s=this;this.calcCount=0,this.updateTm=0,this.oldFrom=0,this.oldTo=0,this.oldMinInterval=null,this.rafId=null,this.dragging=!1,this.forceRedraw=!1,this.noDiapason=!1,this.hasTabIndex=!0,this.isKey=!1,this.isUpdate=!1,this.isStart=!0,this.isFinish=!1,this.isActive=!1,this.isResize=!1,this.isClick=!1,this.target="base",this.cache={win:window,body:document.body,targetDom:this.targetDom,cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0},"INPUT"!==this.targetDom.nodeName&&console&&console.warn&&console.warn("Base targetDom should be <input>!",input),this.config={className:"",type:"single",min:0,max:100,from:null,to:null,step:1,minInterval:0,maxInterval:0,dragInterval:!1,values:[],pValues:[],fromStick:!1,fromMin:null,fromMax:null,fromShadow:!1,toStick:!1,toMin:null,toMax:null,toShadow:!1,prettifyEnabled:!1,prettifySeparator:" ",prettify:null,forceEdges:!1,keyboard:!0,grid:!1,gridMargin:!0,gridNum:4,gridSnap:!1,hideLabelTrack:!1,hideLabelSlider:!1,prefix:"",postfix:"",maxPostfix:"",decorateBoth:!0,valuesSeparator:" — ",inputValuesSeparator:";",disabled:!1,block:!1,scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};let i=this.targetDom.value;void 0!==i&&""!==i&&(i=e&&e.inputValuesSeparator?i.split(e.inputValuesSeparator):i.split(";"),i[0]&&i[0]==+i[0]&&(i[0]=+i[0]),i[1]&&i[1]==+i[1]&&(i[1]=+i[1]),e&&e.values&&e.values.length?(this.config.from=i[0]&&e.values.indexOf(i[0]),this.config.to=i[1]&&e.values.indexOf(i[1])):(this.config.from=i[0]&&+i[0],this.config.to=i[1]&&+i[1])),this.options=axExtend(this.config,e,this.targetDom,"axRange"),this.targetDom?this.referName=this.targetDom.getAttribute("axRange"):this.referName="",this.handlers={},this.update_check={},this.result={input:this.cache.targetDom,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};const o='<div class="ax-range-label"><span class="ax-range-line" tabindex="0"></span><span class="ax-range-min">0</span><span class="ax-range-max">1</span><span class="ax-range-from">0</span><span class="ax-range-to">0</span><span class="ax-range-single">0</span></div><div class="ax-range-grid">1</div>',a='<div class="ax-range-bar ax-range-bar-single"></div><div class="ax-range-shadow ax-shadow-single"></div><span class="ax-range-handle ax-single"><i></i><i></i><i></i></span>',n='<div class="ax-range-bar"></div><div class="ax-range-shadow ax-shadow-from"></div><div class="ax-range-shadow ax-shadow-to"></div><span class="ax-range-handle ax-from"><i></i><i></i><i></i></span><span class="ax-range-handle ax-to"><i></i><i></i><i></i></span>',r='<div class="ax-disabled-mask"></div>';this.ready=function(t){this.noDiapason=!1,this.coords.p_step=F(this.options.step,!0),this.target="base",this.toggleInput(),l(),D(),t?(this.forceRedraw=!0,E(!0),R()):(this.forceRedraw=!0,E(!0),H()),P()};const l=function(){const t='<div class="ax-range '+s.options.className+'"></div>';s.cache.targetDom.insertAdjacentHTML("beforebegin",t),s.cache.targetDom.setAttribute("readonly","true"),s.cache.cont=s.cache.targetDom.previousElementSibling,s.result.slider=s.cache.cont,s.cache.cont.innerHTML=o,s.cache.label=s.cache.cont.querySelector(".ax-range-label"),s.cache.min=s.cache.cont.querySelector(".ax-range-min"),s.cache.max=s.cache.cont.querySelector(".ax-range-max"),s.cache.from=s.cache.cont.querySelector(".ax-range-from"),s.cache.to=s.cache.cont.querySelector(".ax-range-to"),s.cache.single=s.cache.cont.querySelector(".ax-range-single"),
s.cache.line=s.cache.cont.querySelector(".ax-range-line"),s.cache.grid=s.cache.cont.querySelector(".ax-range-grid"),"single"===s.options.type?(s.cache.cont.insertAdjacentHTML("beforeend",a),s.cache.bar=s.cache.cont.querySelector(".ax-range-bar"),s.cache.edge=s.cache.cont.querySelector(".ax-range-bar-single"),s.cache.s_single=s.cache.cont.querySelector(".ax-single"),s.cache.from.style.visibility="hidden",s.cache.to.style.visibility="hidden",s.cache.shad_single=s.cache.cont.querySelector(".ax-shadow-single")):(s.cache.cont.insertAdjacentHTML("beforeend",n),s.cache.bar=s.cache.cont.querySelector(".ax-range-bar"),s.cache.s_from=s.cache.cont.querySelector(".ax-from"),s.cache.s_to=s.cache.cont.querySelector(".ax-to"),s.cache.shad_from=s.cache.cont.querySelector(".ax-shadow-from"),s.cache.shad_to=s.cache.cont.querySelector(".ax-shadow-to"),h()),s.options.hideLabelSlider&&(s.cache.from.style.display="none",s.cache.to.style.display="none",s.cache.single.style.display="none"),et(),s.options.disabled?(p(),s.cache.targetDom.disabled=!0):(s.cache.targetDom.disabled=!1,c(),m()),s.options.disabled||(s.options.block?p():c()),s.options.dragInterval&&(s.cache.bar.style.cursor="ew-resize")},h=function(){const t=s.options.min,e=s.options.max,i=s.options.from,o=s.options.to;i>t&&o===e?s.cache.s_from.classList.add("ax-last"):o<e&&s.cache.s_to.classList.add("ax-last")},d=function(t){switch(s.target){case"single":s.coords.p_gap=X(s.coords.p_pointer-s.coords.p_single_fake),s.cache.s_single.classList.add("ax-hover");break;case"from":s.coords.p_gap=X(s.coords.p_pointer-s.coords.p_from_fake),s.cache.s_from.classList.add("ax-hover","ax-last"),s.cache.s_to.classList.remove("ax-last");break;case"to":s.coords.p_gap=X(s.coords.p_pointer-s.coords.p_to_fake),s.cache.s_to.classList.add("ax-hover","ax-last"),s.cache.s_from.classList.remove("ax-last");break;case"both":s.coords.p_gap_left=X(s.coords.p_pointer-s.coords.p_from_fake),s.coords.p_gap_right=X(s.coords.p_to_fake-s.coords.p_pointer),s.cache.s_to.classList.remove("ax-last"),s.cache.s_from.classList.remove("ax-last")}},p=function(){s.cache.cont.insertAdjacentHTML("beforeend",r),s.cache.cont.classList.add("ax-disabled")},c=function(){s.cache.cont.classList.remove(".ax-disabled-mask"),s.cache.cont.classList.remove("ax-disabled")};this.remove=function(){this.cache.cont.remove(),this.cache.cont=null,this.cache.win.removeEventListener("keydown",b.bind(this,"keyboard")),this.cache.body.removeEventListener("touchmove",g.bind(this)),this.cache.body.removeEventListener("mousemove",g.bind(this)),this.cache.win.removeEventListener("touchend",f.bind(this)),this.cache.win.removeEventListener("mouseup",f.bind(this)),this.cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.rafId)};const m=function(){s.noDiapason||(s.cache.body.addEventListener("touchmove",g.bind(this)),s.cache.body.addEventListener("mousemove",g.bind(this)),s.cache.win.addEventListener("touchend",f.bind(this)),s.cache.win.addEventListener("mouseup",f.bind(this)),s.cache.line.addEventListener("touchstart",y.bind(this,"click"),{passive:!0}),s.cache.line.addEventListener("mousedown",y.bind(this,"click")),s.cache.line.addEventListener("focus",u.bind(this)),s.options.dragInterval&&"double"===s.options.type?(s.cache.bar.addEventListener("touchstart",x.bind(this,"both"),{passive:!0}),s.cache.bar.addEventListener("mousedown",x.bind(this,"both"))):(s.cache.bar.addEventListener("touchstart",y.bind(this,"click"),{passive:!0}),s.cache.bar.addEventListener("mousedown",y.bind(this,"click"))),"single"===s.options.type?(s.cache.single.addEventListener("touchstart",x.bind(this,"single"),{passive:!0}),s.cache.s_single.addEventListener("touchstart",x.bind(this,"single"),{passive:!0}),s.cache.shad_single.addEventListener("touchstart",y.bind(this,"click"),{passive:!0}),s.cache.single.addEventListener("mousedown",x.bind(this,"single")),s.cache.s_single.addEventListener("mousedown",x.bind(this,"single")),s.cache.edge.addEventListener("mousedown",y.bind(this,"click")),s.cache.shad_single.addEventListener("touchstart",y.bind(this,"click"),{passive:!0})):(s.cache.single.addEventListener("touchstart",x.bind(this,null),{passive:!0}),s.cache.single.addEventListener("mousedown",x.bind(this,null)),s.cache.from.addEventListener("touchstart",x.bind(this,"from"),{passive:!0}),s.cache.s_from.addEventListener("touchstart",x.bind(this,"from"),{passive:!0}),s.cache.to.addEventListener("touchstart",x.bind(this,"to"),{passive:!0}),s.cache.s_to.addEventListener("touchstart",x.bind(this,"to"),{passive:!0}),s.cache.shad_from.addEventListener("touchstart",y.bind(this,"click"),{passive:!0}),s.cache.shad_to.addEventListener("touchstart",y.bind(this,"click"),{passive:!0}),s.cache.from.addEventListener("mousedown",x.bind(this,"from")),s.cache.s_from.addEventListener("mousedown",x.bind(this,"from")),s.cache.to.addEventListener("mousedown",x.bind(this,"to")),s.cache.s_to.addEventListener("mousedown",x.bind(this,"to")),s.cache.shad_from.addEventListener("mousedown",y.bind(this,"click")),s.cache.shad_to.addEventListener("mousedown",y.bind(this,"click"))),s.options.keyboard&&s.cache.line.addEventListener("keydown",b.bind(this,"keyboard")))},u=function(t){if(s.target)s.cache.line.focus();else{let t,e;e="single"===s.options.type?s.cache.single:s.cache.from,t=e.getBoundingClientRect().left,t+=e.getBoundingClientRect().width/2-1,y("single",{preventDefault:function(){},pageX:t})}},g=function(t){if(!s.dragging)return;const e=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;s.coords.x_pointer=e-s.coords.x_gap,E()},f=function(t){if(!s.isActive)return;s.isActive=!1;const e=s.cache.cont.querySelector(".ax-hover");e&&e.classList.remove("ax-hover"),s.forceRedraw=!0,P(),T(),(s.cache.cont.contains(t.target)||s.dragging)&&z(),s.dragging=!1},x=function(t,e){axPreventDefault(e);const i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&w(),t||(t=s.target||"from"),s.target=t,s.isActive=!0,s.dragging=!0,s.coords.x_gap=s.cache.label.getBoundingClientRect().left,s.coords.x_pointer=i-s.coords.x_gap,S(),d(t),s.cache.line.dispatchEvent(new Event("focus")),P())},y=function(t,e){axPreventDefault(e);const i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(s.target=t,s.isClick=!0,s.coords.x_gap=s.cache.label.getBoundingClientRect().left,s.coords.x_pointer=+(i-s.coords.x_gap).toFixed(),s.forceRedraw=!0,E(),s.cache.line.dispatchEvent(new Event("focus")))},b=function(t,e){if(!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey))switch(e.which){case 83:case 65:case 40:case 37:axPreventDefault(e),v(!1);break;case 87:case 68:case 38:case 39:axPreventDefault(e),v(!0)}},v=function(t){let e=s.coords.p_pointer;const i=s.options.step/((s.options.max-s.options.min)/100);t?e+=i:e-=i,s.coords.x_pointer=X(s.coords.w_rs/100*e),s.isKey=!0,E()},D=function(){if(s.options){if(s.options.hideLabelTrack)return s.cache.min.style.display="none",void(s.cache.max.style.display="none");if(s.options.values.length)s.cache.min.innerHTML=K(s.options.pValues[s.options.min]),s.cache.max.innerHTML=K(s.options.pValues[s.options.max]);else{const t=G(s.options.min),e=G(s.options.max);s.result.min_pretty=t,s.result.max_pretty=e,s.cache.min.innerHTML=K(t,s.options.min),s.cache.max.innerHTML=K(e,s.options.max)}s.labels.w_min=s.cache.min.offsetWidth,s.labels.w_max=s.cache.max.offsetWidth}},w=function(){const t=s.result.to-s.result.from;null===s.oldMinInterval&&(s.oldMinInterval=s.options.minInterval),s.options.minInterval=t},T=function(){null!==s.oldMinInterval&&(s.options.minInterval=s.oldMinInterval,s.oldMinInterval=null)},E=function(t){if(!s.options)return;if(s.calcCount++,(10===s.calcCount||t)&&(s.calcCount=0,s.coords.w_rs=s.cache.label.offsetWidth,k()),!s.coords.w_rs)return;S();let e=M();switch("both"===s.target&&(s.coords.p_gap=0,e=M()),"click"===s.target&&(s.coords.p_gap=s.coords.p_handle/2,e=M(),s.options.dragInterval?s.target="both_one":s.target=I(e)),s.target){case"base":const t=(s.options.max-s.options.min)/100,i=(s.result.from-s.options.min)/t,o=(s.result.to-s.options.min)/t;s.coords.p_single_real=X(i),s.coords.p_from_real=X(i),s.coords.p_to_real=X(o),s.coords.p_single_real=W(s.coords.p_single_real,s.options.fromMin,s.options.fromMax),s.coords.p_from_real=W(s.coords.p_from_real,s.options.fromMin,s.options.fromMax),s.coords.p_to_real=W(s.coords.p_to_real,s.options.toMin,s.options.toMax),s.coords.p_single_fake=C(s.coords.p_single_real),s.coords.p_from_fake=C(s.coords.p_from_real),s.coords.p_to_fake=C(s.coords.p_to_real),s.target=null;break;case"single":if(s.options.fromStick)break;s.coords.p_single_real=A(e),s.coords.p_single_real=Y(s.coords.p_single_real),s.coords.p_single_real=W(s.coords.p_single_real,s.options.fromMin,s.options.fromMax),s.coords.p_single_fake=C(s.coords.p_single_real);break;case"from":if(s.options.fromStick)break;s.coords.p_from_real=A(e),s.coords.p_from_real=Y(s.coords.p_from_real),s.coords.p_from_real>s.coords.p_to_real&&(s.coords.p_from_real=s.coords.p_to_real),s.coords.p_from_real=W(s.coords.p_from_real,s.options.fromMin,s.options.fromMax),s.coords.p_from_real=V(s.coords.p_from_real,s.coords.p_to_real,"from"),s.coords.p_from_real=U(s.coords.p_from_real,s.coords.p_to_real,"from"),s.coords.p_from_fake=C(s.coords.p_from_real);break;case"to":if(s.options.toStick)break;s.coords.p_to_real=A(e),s.coords.p_to_real=Y(s.coords.p_to_real),s.coords.p_to_real<s.coords.p_from_real&&(s.coords.p_to_real=s.coords.p_from_real),s.coords.p_to_real=W(s.coords.p_to_real,s.options.toMin,s.options.toMax),s.coords.p_to_real=V(s.coords.p_to_real,s.coords.p_from_real,"to"),s.coords.p_to_real=U(s.coords.p_to_real,s.coords.p_from_real,"to"),s.coords.p_to_fake=C(s.coords.p_to_real);break;case"both":if(s.options.fromStick||s.options.toStick)break;e=X(e+.001*s.coords.p_handle),s.coords.p_from_real=A(e)-s.coords.p_gap_left,s.coords.p_from_real=Y(s.coords.p_from_real),s.coords.p_from_real=W(s.coords.p_from_real,s.options.fromMin,s.options.fromMax),s.coords.p_from_real=V(s.coords.p_from_real,s.coords.p_to_real,"from"),s.coords.p_from_fake=C(s.coords.p_from_real),s.coords.p_to_real=A(e)+s.coords.p_gap_right,s.coords.p_to_real=Y(s.coords.p_to_real),s.coords.p_to_real=W(s.coords.p_to_real,s.options.toMin,s.options.toMax),s.coords.p_to_real=V(s.coords.p_to_real,s.coords.p_from_real,"to"),s.coords.p_to_fake=C(s.coords.p_to_real);break;case"both_one":if(s.options.fromStick||s.options.toStick)break;const a=A(e),n=s.result.from_percent,r=s.result.to_percent,l=r-n,h=l/2;let d=a-h,p=a+h;d<0&&(d=0,p=d+l),p>100&&(p=100,d=p-l),s.coords.p_from_real=Y(d),s.coords.p_from_real=W(s.coords.p_from_real,s.options.fromMin,s.options.fromMax),s.coords.p_from_fake=C(s.coords.p_from_real),s.coords.p_to_real=Y(p),s.coords.p_to_real=W(s.coords.p_to_real,s.options.toMin,s.options.toMax),s.coords.p_to_fake=C(s.coords.p_to_real)}"single"===s.options.type?(s.coords.p_bar_x=s.coords.p_handle/2,s.coords.p_bar_w=s.coords.p_single_fake,s.result.from_percent=s.coords.p_single_real,s.result.from=j(s.coords.p_single_real),s.result.from_pretty=G(s.result.from),s.options.values.length&&(s.result.from_value=s.options.values[s.result.from])):(s.coords.p_bar_x=X(s.coords.p_from_fake+s.coords.p_handle/2),s.coords.p_bar_w=X(s.coords.p_to_fake-s.coords.p_from_fake),s.result.from_percent=s.coords.p_from_real,s.result.from=j(s.coords.p_from_real),s.result.from_pretty=G(s.result.from),s.result.to_percent=s.coords.p_to_real,s.result.to=j(s.coords.p_to_real),s.result.to_pretty=G(s.result.to),s.options.values.length&&(s.result.from_value=s.options.values[s.result.from],s.result.to_value=s.options.values[s.result.to])),L(),$()},S=function(){s.coords.w_rs?(s.coords.x_pointer<0||isNaN(s.coords.x_pointer)?s.coords.x_pointer=0:s.coords.x_pointer>s.coords.w_rs&&(s.coords.x_pointer=s.coords.w_rs),s.coords.p_pointer=X(s.coords.x_pointer/s.coords.w_rs*100)):s.coords.p_pointer=0},A=function(t){const e=100-s.coords.p_handle;return t/e*100},C=function(t){const e=100-s.coords.p_handle;return t/100*e},M=function(){const t=100-s.coords.p_handle;let e=X(s.coords.p_pointer-s.coords.p_gap);return e<0?e=0:e>t&&(e=t),e},k=function(){"single"===s.options.type?s.coords.w_handle=s.cache.s_single.offsetWidth:s.coords.w_handle=s.cache.s_from.offsetWidth,s.coords.p_handle=X(s.coords.w_handle/s.coords.w_rs*100)},I=function(t){if("single"===s.options.type)return"single";{const e=s.coords.p_from_real+(s.coords.p_to_real-s.coords.p_from_real)/2;return t>=e?s.options.toStick?"from":"to":s.options.fromStick?"to":"from"}},L=function(){s.coords.w_rs&&(s.labels.p_min=s.labels.w_min/s.coords.w_rs*100,s.labels.p_max=s.labels.w_max/s.coords.w_rs*100)},$=function(){s.coords.w_rs&&!s.options.hideLabelSlider&&("single"===s.options.type?(s.labels.w_single=s.cache.single.offsetWidth,s.labels.p_single_fake=s.labels.w_single/s.coords.w_rs*100,s.labels.p_single_left=s.coords.p_single_fake+s.coords.p_handle/2-s.labels.p_single_fake/2,s.labels.p_single_left=Z(s.labels.p_single_left,s.labels.p_single_fake)):(s.labels.w_from=s.cache.from.offsetWidth,s.labels.p_from_fake=s.labels.w_from/s.coords.w_rs*100,s.labels.p_from_left=s.coords.p_from_fake+s.coords.p_handle/2-s.labels.p_from_fake/2,s.labels.p_from_left=X(s.labels.p_from_left),s.labels.p_from_left=Z(s.labels.p_from_left,s.labels.p_from_fake),s.labels.w_to=s.cache.to.offsetWidth,s.labels.p_to_fake=s.labels.w_to/s.coords.w_rs*100,s.labels.p_to_left=s.coords.p_to_fake+s.coords.p_handle/2-s.labels.p_to_fake/2,s.labels.p_to_left=X(s.labels.p_to_left),s.labels.p_to_left=Z(s.labels.p_to_left,s.labels.p_to_fake),s.labels.w_single=s.cache.single.offsetWidth,s.labels.p_single_fake=s.labels.w_single/s.coords.w_rs*100,s.labels.p_single_left=(s.labels.p_from_left+s.labels.p_to_left+s.labels.p_to_fake)/2-s.labels.p_single_fake/2,s.labels.p_single_left=X(s.labels.p_single_left),s.labels.p_single_left=Z(s.labels.p_single_left,s.labels.p_single_fake)))},P=function(){s.rafId&&(cancelAnimationFrame(s.rafId),s.rafId=null),clearTimeout(s.updateTm),s.updateTm=null,s.options&&(_(),s.isActive?s.rafId=requestAnimationFrame(P):s.updateTm=setTimeout(P,300))},_=function(){s.coords.w_rs=s.cache.label.offsetWidth,s.coords.w_rs&&(s.coords.w_rs!==s.coords.w_rs_old&&(s.target="base",s.isResize=!0),(s.coords.w_rs!==s.coords.w_rs_old||s.forceRedraw)&&(D(),E(!0),O(),s.options.grid&&(at(),it()),s.forceRedraw=!0,s.coords.w_rs_old=s.coords.w_rs,N()),s.coords.w_rs&&(s.dragging||s.forceRedraw||s.isKey)&&((s.oldFrom!==s.result.from||s.oldTo!==s.result.to||s.forceRedraw||s.isKey)&&(O(),s.cache.bar.style.left=s.coords.p_bar_x+"%",s.cache.bar.style.width=s.coords.p_bar_w+"%","single"===s.options.type?(s.cache.bar.style.left="0",s.cache.bar.style.width=s.coords.p_bar_w+s.coords.p_bar_x+"%",s.cache.s_single.style.left=s.coords.p_single_fake+"%",s.cache.single.style.left=s.labels.p_single_left+"%"):(s.cache.s_from.style.left=s.coords.p_from_fake+"%",s.cache.s_to.style.left=s.coords.p_to_fake+"%",(s.oldFrom!==s.result.from||s.forceRedraw)&&(s.cache.from.style.left=s.labels.p_from_left+"%"),(s.oldTo!==s.result.to||s.forceRedraw)&&(s.cache.to.style.left=s.labels.p_to_left+"%"),s.cache.single.style.left=s.labels.p_single_left+"%"),q(),s.oldFrom===s.result.from&&s.oldTo===s.result.to||s.isStart||(s.cache.targetDom.dispatchEvent(new Event("change")),s.cache.targetDom.dispatchEvent(new Event("input"))),s.oldFrom=s.result.from,s.oldTo=s.result.to,s.isResize||s.isUpdate||s.isStart||s.isFinish||B(),(s.isKey||s.isClick)&&(s.isKey=!1,s.isClick=!1,z()),s.isUpdate=!1,s.isResize=!1,s.isFinish=!1),s.isStart=!1,s.isKey=!1,s.isClick=!1,s.forceRedraw=!1))},O=function(){if(!s.options)return;const t=s.options.values.length,e=s.options.pValues;let i,o,a,n,r;if(!s.options.hideLabelSlider)if("single"===s.options.type)t?(i=K(e[s.result.from]),s.cache.single.innerHTML=i):(n=G(s.result.from),i=K(n,s.result.from),s.cache.single.innerHTML=i),$(),s.labels.p_single_left<s.labels.p_min+1?s.cache.min.style.visibility="hidden":s.cache.min.style.visibility="visible",s.labels.p_single_left+s.labels.p_single_fake>100-s.labels.p_max-1?s.cache.max.style.visibility="hidden":s.cache.max.style.visibility="visible";else{t?(s.options.decorateBoth?(i=K(e[s.result.from]),i+=s.options.valuesSeparator,i+=K(e[s.result.to])):i=K(e[s.result.from]+s.options.valuesSeparator+e[s.result.to]),o=K(e[s.result.from]),a=K(e[s.result.to]),s.cache.single.innerHTML=i,s.cache.from.innerHTML=o,s.cache.to.innerHTML=a):(n=G(s.result.from),r=G(s.result.to),s.options.decorateBoth?(i=K(n,s.result.from),i+=s.options.valuesSeparator,i+=K(r,s.result.to)):i=K(n+s.options.valuesSeparator+r,s.result.to),o=K(n,s.result.from),a=K(r,s.result.to),s.cache.single.innerHTML=i,s.cache.from.innerHTML=o,s.cache.to.innerHTML=a),$();const l=Math.min(s.labels.p_single_left,s.labels.p_from_left),h=s.labels.p_single_left+s.labels.p_single_fake,d=s.labels.p_to_left+s.labels.p_to_fake;let p=Math.max(h,d);s.labels.p_from_left+s.labels.p_from_fake>=s.labels.p_to_left?(s.cache.from.style.visibility="hidden",s.cache.to.style.visibility="hidden",s.cache.single.style.visibility="visible",s.result.from===s.result.to?("from"===s.target?s.cache.from.style.visibility="visible":"to"===s.target?s.cache.to.style.visibility="visible":s.target||(s.cache.from.style.visibility="visible"),s.cache.single.style.visibility="hidden",p=d):(s.cache.from.style.visibility="hidden",s.cache.to.style.visibility="hidden",s.cache.single.style.visibility="visible",p=Math.max(h,d))):(s.cache.from.style.visibility="visible",s.cache.to.style.visibility="visible",s.cache.single.style.visibility="hidden"),l<s.labels.p_min+1?s.cache.min.style.visibility="hidden":s.cache.min.style.visibility="visible",p>100-s.labels.p_max-1?s.cache.max.style.visibility="hidden":s.cache.max.style.visibility="visible"}},N=function(){const t=s.options,e=s.cache,i="number"==typeof t.fromMin&&!isNaN(t.fromMin),o="number"==typeof t.fromMax&&!isNaN(t.fromMax),a="number"==typeof t.toMin&&!isNaN(t.toMin),n="number"==typeof t.toMax&&!isNaN(t.toMax);let r,l,h,d;"single"===t.type?t.fromShadow&&(i||o)?(r=F(i?t.fromMin:t.min),l=F(o?t.fromMax:t.max)-r,r=X(r-s.coords.p_handle/100*r),l=X(l-s.coords.p_handle/100*l),r+=s.coords.p_handle/2,e.shad_single.style.display="block",e.shad_single.style.left=r+"%",e.shad_single.style.width=l+"%"):e.shad_single.style.display="none":(t.fromShadow&&(i||o)?(r=F(i?t.fromMin:t.min),l=F(o?t.fromMax:t.max)-r,r=X(r-s.coords.p_handle/100*r),l=X(l-s.coords.p_handle/100*l),r+=s.coords.p_handle/2,e.shad_from.style.display="block",e.shad_from.style.left=r+"%",e.shad_from.style.width=l+"%"):e.shad_from.style.display="none",t.toShadow&&(a||n)?(h=F(a?t.toMin:t.min),d=F(n?t.toMax:t.max)-h,h=X(h-s.coords.p_handle/100*h),d=X(d-s.coords.p_handle/100*d),h+=s.coords.p_handle/2,e.shad_to.style.display="block",e.shad_to.style.left=h+"%",e.shad_to.style.width=d+"%"):e.shad_to.style.display="none")},q=function(){"single"===s.options.type?(s.options.values.length?s.cache.targetDom.setAttribute("value",s.result.from_value):s.cache.targetDom.setAttribute("value",s.result.from),s.cache.targetDom.dataset.from=s.result.from):(s.options.values.length?s.cache.targetDom.setAttribute("value",s.result.from_value+s.options.inputValuesSeparator+s.result.to_value):s.cache.targetDom.setAttribute("value",s.result.from+s.options.inputValuesSeparator+s.result.to),s.cache.targetDom.dataset.from=s.result.from,s.cache.targetDom.dataset.to=s.result.to)},H=function(){q(),s.options.onStart&&"function"==typeof s.options.onStart&&(s.options.scope?s.options.onStart.call(s.options.scope,s.result):s.options.onStart(s.result))},B=function(){q(),s.options.onChange&&"function"==typeof s.options.onChange&&(s.options.scope?s.options.onChange.call(s.options.scope,s.result):s.options.onChange(s.result))},z=function(){q(),s.options.onFinish&&"function"==typeof s.options.onFinish&&(s.options.scope?s.options.onFinish.call(s.options.scope,s.result):s.options.onFinish(s.result))},R=function(){q(),s.options.onUpdate&&"function"==typeof s.options.onUpdate&&(s.options.scope?s.options.onUpdate.call(s.options.scope,s.result):s.options.onUpdate(s.result))};this.toggleInput=function(){this.cache.targetDom.classList.toggle("ax-range-input"),this.hasTabIndex?this.cache.targetDom.setAttribute("tabindex","-1"):this.cache.targetDom.removeAttribute("tabindex"),this.hasTabIndex=!this.hasTabIndex};const F=function(t,e){let i,o,a=s.options.max-s.options.min,n=a/100;return a?(i=e?t:t-s.options.min,o=i/n,X(o)):(s.noDiapason=!0,0)},j=function(t){let e,i,o=s.options.min,a=s.options.max,n=o.toString().split(".")[1],r=a.toString().split(".")[1],l=0,h=0;if(0===t)return s.options.min;if(100===t)return s.options.max;n&&(e=n.length,l=e),r&&(i=r.length,l=i),e&&i&&(l=e>=i?e:i),o<0&&(h=Math.abs(o),o=+(o+h).toFixed(l),a=+(a+h).toFixed(l));let d,p=(a-o)/100*t+o,c=s.options.step.toString().split(".")[1];return c?p=+p.toFixed(c.length):(p/=s.options.step,p*=s.options.step,p=+p.toFixed(0)),h&&(p-=h),d=c?+p.toFixed(c.length):X(p),d<s.options.min?d=s.options.min:d>s.options.max&&(d=s.options.max),d},Y=function(t){let e=Math.round(t/s.coords.p_step)*s.coords.p_step;return e>100&&(e=100),100===t&&(e=100),X(e)},V=function(t,e,i){let o,a,n=s.options;return n.minInterval?(o=j(t),a=j(e),"from"===i?a-o<n.minInterval&&(o=a-n.minInterval):o-a<n.minInterval&&(o=a+n.minInterval),F(o)):t},U=function(t,e,i){let o,a,n=s.options;return n.maxInterval?(o=j(t),a=j(e),"from"===i?a-o>n.maxInterval&&(o=a-n.maxInterval):o-a>n.maxInterval&&(o=a+n.maxInterval),F(o)):t},W=function(t,e,i){let o=j(t);return"number"!=typeof e&&(e=s.options.min),"number"!=typeof i&&(i=s.options.max),o<e&&(o=e),o>i&&(o=i),F(o)},X=function(t){return t=t.toFixed(20),+t},G=function(t){return s.options.prettifyEnabled?s.options.prettify&&"function"==typeof s.options.prettify?s.options.prettify(t):J(t):t},J=function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+s.options.prettifySeparator)},Z=function(t,e){return s.options.forceEdges?(t<0?t=0:t>100-e&&(t=100-e),X(t)):X(t)};this.validate=function(){let t,e,i=this.options,o=this.result,a=i.values,n=a.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.fromMin&&(i.fromMin=+i.fromMin),"string"==typeof i.fromMax&&(i.fromMax=+i.fromMax),"string"==typeof i.toMin&&(i.toMin=+i.toMin),"string"==typeof i.toMax&&(i.toMax=+i.toMax),"string"==typeof i.gridNum&&(i.gridNum=+i.gridNum),i.max<i.min&&(i.max=i.min),n)for(i.pValues=[],i.min=0,i.max=n-1,i.step=1,i.gridNum=i.max,i.gridSnap=!0,e=0;e<n;e++)t=+a[e],isNaN(t)?t=a[e]:(a[e]=t,t=G(t)),i.pValues.push(t);("number"!=typeof i.from||isNaN(i.from))&&(i.from=i.min),("number"!=typeof i.to||isNaN(i.to))&&(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),s.update_check.from&&(s.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),s.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),"number"==typeof i.fromMin&&i.from<i.fromMin&&(i.from=i.fromMin),"number"==typeof i.fromMax&&i.from>i.fromMax&&(i.from=i.fromMax),"number"==typeof i.toMin&&i.to<i.toMin&&(i.to=i.toMin),"number"==typeof i.toMax&&i.from>i.toMax&&(i.to=i.toMax),o&&(o.min!==i.min&&(o.min=i.min),o.max!==i.max&&(o.max=i.max),(o.from<o.min||o.from>o.max)&&(o.from=i.from),(o.to<o.min||o.to>o.max)&&(o.to=i.to)),("number"!=typeof i.minInterval||isNaN(i.minInterval)||!i.minInterval||i.minInterval<0)&&(i.minInterval=0),("number"!=typeof i.maxInterval||isNaN(i.maxInterval)||!i.maxInterval||i.maxInterval<0)&&(i.maxInterval=0),i.minInterval&&i.minInterval>i.max-i.min&&(i.minInterval=i.max-i.min),i.maxInterval&&i.maxInterval>i.max-i.min&&(i.maxInterval=i.max-i.min)};const K=function(t,e){let i="",o=s.options;return o.prefix&&(i+=o.prefix),i+=t,o.maxPostfix&&(o.values.length&&t===o.pValues[o.max]?(i+=o.maxPostfix,o.postfix&&(i+=" ")):e===o.max&&(i+=o.maxPostfix,o.postfix&&(i+=" "))),o.postfix&&(i+=o.postfix),i},Q=function(){s.result.from=s.options.from,s.result.from_percent=F(s.result.from),s.result.from_pretty=G(s.result.from),s.options.values&&(s.result.from_value=s.options.values[s.result.from])},tt=function(){s.result.to=s.options.to,s.result.to_percent=F(s.result.to),s.result.to_pretty=G(s.result.to),s.options.values&&(s.result.to_value=s.options.values[s.result.to])};this.updateResult=function(){this.result.min=this.options.min,this.result.max=this.options.max,Q(),tt()};const et=function(){if(!s.options.grid)return;let t,e,i,o,a,n=s.options,r=n.max-n.min,l=n.gridNum,h=0,d=0,p=4,c=0,m="";for(at(),n.gridSnap&&(l=r/n.step),l>50&&(l=50),h=X(100/l),l>4&&(p=3),l>7&&(p=2),l>14&&(p=1),l>28&&(p=0),t=0;t<l+1;t++){for(i=p,d=X(h*t),d>100&&(d=100),s.coords.big[t]=d,o=(d-h*(t-1))/(i+1),e=1;e<=i&&0!==d;e++)c=X(d-o*e),m+='<span class="ax-range-grid-pol ax-small" style="left: '+c+'%"></span>';m+='<span class="ax-range-grid-pol" style="left: '+d+'%"></span>',a=j(d),a=n.values.length?n.pValues[a]:G(a),m+='<span class="ax-range-grid-text ax-grid-text-'+t+'" style="left: '+d+'%">'+a+"</span>"}s.coords.big_num=Math.ceil(l+1),s.cache.cont.classList.add("ax-with-grid"),s.cache.grid.innerHTML=m,st()},st=function(){for(let t=0;t<s.coords.big_num;t++)s.cache.grid_labels.push(s.cache.grid.querySelector(".ax-grid-text-"+t));it()},it=function(){const t=[],e=[],i=s.coords.big_num;for(let o=0;o<i;o++)s.coords.big_w[o]=s.cache.grid_labels[o].offsetWidth,s.coords.big_p[o]=X(s.coords.big_w[o]/s.coords.w_rs*100),s.coords.big_x[o]=X(s.coords.big_p[o]/2),t[o]=X(s.coords.big[o]-s.coords.big_x[o]),e[o]=X(t[o]+s.coords.big_p[o]);s.options.forceEdges&&(t[0]<-s.coords.grid_gap&&(t[0]=-s.coords.grid_gap,e[0]=X(t[0]+s.coords.big_p[0]),s.coords.big_x[0]=s.coords.grid_gap),e[i-1]>100+s.coords.grid_gap&&(e[i-1]=100+s.coords.grid_gap,t[i-1]=X(e[i-1]-s.coords.big_p[i-1]),s.coords.big_x[i-1]=X(s.coords.big_p[i-1]-s.coords.grid_gap))),ot(2,t,e),ot(4,t,e);for(let t=0;t<i;t++){const e=s.cache.grid_labels[t];s.coords.big_x[t]!==Number.POSITIVE_INFINITY&&(e.style.marginLeft=-s.coords.big_x[t]+"%")}},ot=function(t,e,i){const o=s.coords.big_num;for(let a=0;a<o;a+=t){let n=a+t/2;if(n>=o)break;const r=s.cache.grid_labels[n];i[a]<=e[n]?r.style.visibility="visible":r.style.visibility="hidden"}},at=function(){s.options.gridMargin&&(s.coords.w_rs=s.cache.label.offsetWidth,s.coords.w_rs&&("single"===s.options.type?s.coords.w_handle=s.cache.s_single.offsetWidth:s.coords.w_handle=s.cache.s_from.offsetWidth,s.coords.p_handle=X(s.coords.w_handle/s.coords.w_rs*100),s.coords.grid_gap=X(s.coords.p_handle/2-.1),s.cache.grid.style.width=X(100-s.coords.p_handle)+"%",s.cache.grid.style.left=s.coords.grid_gap+"%"))};this.init()}init(){if(this.validate(),this.ready(),this.referName)if(axIsEmpty(axRanges))axRanges.push({name:this.referName,instance:this});else for(let t=0;t<axRanges.length;t++){if(axRanges[t].name==this.referName){axRanges[t].instance=this;break}axRanges.push({name:this.referName,instance:this})}}update(t,e){if(this.targetDom)return this.isUpdate=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=Object.assign(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.ready(!0),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}reset(t){this.targetDom&&(this.updateResult(),"reset"in this.handlers&&this.emit("reset",""),t&&t.call(this),this.update())}destroy(t){this.targetDom&&(this.toggleInput(),this.targetDom.removeAttribute("readonly"),this.remove(),this.targetDom=null,this.options=null,"destroy"in this.handlers&&this.emit("destroy",""),t&&t.call(this))}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axPagination{constructor(t,e){return this.options=axExtend({insName:"",listDom:"",count:10,current:1,total:0,firstText:"首页",prevText:"上一页",nextText:"下一页",lastText:"尾页",allPages:!1,data:[],clickDelay:200,template:"",type:"regular",loadingMode:"replace",className:"",lastDel:"",async:"",ajaxType:"post",delay:0,dataExtend:"",onBeforeRendered:function(t){},onRendered:function(t,e,s){},onUpdated:function(t,e,s){},onTurned:function(t,e,s){}},e,t,this.constructor.name),this.targetExist=!!t,this.targetDom=t?axIdToDom(t):axAddElem("div",{class:this.options.className?"ax-pagination "+this.options.className:"ax-pagination"}),this.listDom="",this.options.total&&(this.options.data={length:this.options.total}),this.handlers={},this.preData=[],this.asyncData=[],this.selectData=[],this.itemsNum=0,this.pagesNum=0,this.current=this.options.current,this.loadingDom=axAddElem("div",{class:"ax-pageTurning"}),this.options.template?"#"===this.options.template.trim().substr(0,1)?this.template=document.querySelector(this.options.template).innerHTML:this.template=this.options.template:this.template="",this.pagesDom=axAddElem("div",{class:"ax-core"}),this.pageFirst=axAddElem("a",{href:"###",class:"ax-first"},this.options.firstText),this.pageLast=axAddElem("a",{href:"###",class:"ax-last"},this.options.lastText),this.pagePrev=axAddElem("a",{href:"###",class:"ax-prev"},this.options.prevText),this.pageNext=axAddElem("a",{href:"###",class:"ax-next"},this.options.nextText),this.pageTotal=axAddElem("span",{class:"ax-total"}),this.pageGo=axAddElem("span",{class:"ax-gopage"}),this.group=axAddElem("div",{class:"ax-group"}),this.renderedIndex=0,this.init(this.options.data),this}async init(t){if(axInstance.push(this,this.options.insName,"pagination"),this.dataType=this.getDataType(t),"pageDom"===this.dataType?this.listDom=axIdToDom(this.options.data):this.options.listDom&&(this.listDom=axIdToDom(this.options.listDom)),axIsEmpty(t))return this.listDom&&(this.listDom.innerHTML=""),this.targetDom.innerHTML="",this.current=1,this.pagesNum=1,this.itemsNum=0,!1;let e;if("json"===this.dataType||"sql"===this.dataType){if(!this.template&&"TBODY"!=this.listDom.nodeName)return console.error("The template is required!"),!1;"json"===this.options.async?await this.getJsonData({url:t}):"sql"===this.options.async&&await this.getSqlData({current:this.current}),e=1}else{if("sortList"===this.dataType)t.forEach(t=>{this.preData.push(t.dom)});else if("pureNode"===this.dataType)this.preData=[...t];else if("tplArray"===this.dataType){if(!this.template)return console.error("The template is required!"),!1;this.preData=this.tplToDoms(t)}else"manual"===this.dataType?this.preData={...t}:this.preData=[...this.listDom.childNodes].filter(t=>1==t.nodeType);this.getCurrent(this.preData.length),e=this.current}this.listDom&&"manual"!==this.dataType&&this.renderList(e),this.renderFinish()}getDataType(t){let e="",s=axType(t);return"Object"===s&&t.hasOwnProperty("length")?e="manual":"Array"===s?e=t.length>0&&t[0].hasOwnProperty("dom")?"sortList":t.length>0&&axType(t[0]).includes("Element")?"pureNode":"tplArray":"String"===s&&(e="json"===this.options.async?"json":"sql"===this.options.async?"sql":"pageDom"),e}tplToDoms(t,e=this.template){let s=[];return t.forEach(t=>{let i=axStrToDom(axTplEngine(e,t));s.push(i)}),s}renderTotal(){this.pageTotal.innerHTML="共有"+this.pagesNum+"页, "+this.itemsNum+"条数据"}renderFinish(){this.targetDom.removeAttribute("paging"),this.renderPagesTotal(this.current,()=>{this.renderTotal()}),this.getPagination(),this.listDom&&!this.targetExist&&("TBODY"==this.listDom.nodeName?this.listDom.parentElement.insertAdjacentElement("afterend",this.targetDom):this.listDom.insertAdjacentElement("afterend",this.targetDom)),this.pageFirst.onclick=axDebounce(t=>{this.current<=1?axPreventDefault(t):(this.current=1,
this.currentToRenderList(this.current))},this.options.clickDelay),this.pageLast.onclick=axDebounce(t=>{this.current>=this.pagesNum?axPreventDefault(t):(this.current=this.pagesNum,this.currentToRenderList(this.current))},this.options.clickDelay),this.pagePrev.onclick=axDebounce(t=>{this.current<=1?axPreventDefault(t):(this.current=this.current-1,this.currentToRenderList(this.current))},this.options.clickDelay),this.pageNext.onclick=axDebounce(t=>{this.current>=this.pagesNum?axPreventDefault(t):(this.current=this.current+1,this.currentToRenderList(this.current))},this.options.clickDelay),this.renderedIndex++,this.options.onTurned&&this.options.onTurned.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("turned")&&this.emit("turned",this.current,this.pagesNum,this.getOffset())}getOffset(t=this.current,e=this.itemsNum,s=this.options.count){let i=s*t-e;return e&&i>0?i:s}currentFix(t,e=this.pagesNum){return t?(this.current=t<=1?1:t>=e?e:t,this.current):this.current}getCurrent(t,e,s,i){if(this.itemsNum=i||t,s)this.pagesNum=s;else{let t=this.itemsNum/this.options.count;this.pagesNum=t%1==0?t:Math.floor(t)+1}this.currentFix(e||this.current,this.pagesNum)}renderList(t,e,s){let i=document.createDocumentFragment(),o=e||this.preData,a=this.options.total?o.slice(0,this.options.total):o;this.selectData=a.slice(this.options.count*(t-1),this.options.count*t),this.selectData.forEach((t,e)=>{e+1==this.selectData.length&&this.options.lastDel&&t.querySelector(this.options.lastDel)&&t.removeChild(t.querySelector(this.options.lastDel)),i.appendChild(t)}),this.options.onBeforeRendered&&this.options.onBeforeRendered.call(this,this.selectData,this.asyncData),"beforeRendered"in this.handlers&&this.emit("beforeRendered",this.selectData,this.asyncData),this.listDom.innerHTML="",0===this.selectData.length?new axMessage({content:`有效数据只有${a.length}条，本页没有数据，渲染数据失败！`,iconShow:!0,result:"error"}).show():(this.listDom.appendChild(i),this.options.onRendered&&this.options.onRendered.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("rendered")&&this.emit("rendered",this.current,this.pagesNum,this.getOffset()),s&&s.call(this,this.current,this.pagesNum,this.getOffset()))}renderPagesTotal(t,e){if(t=this.currentFix(t),this.pagesDom.innerHTML="",this.options.allPages)for(let t=1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}else if(this.pagesNum<11)for(let t=1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}else if(t<6){for(let t=1;t<=8;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}else if(this.pagesNum-t<5){for(let t=1;t<=2;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-6;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}else{for(let t=1;t<=2;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let e=t-2;e<=t+2;e++){let t=axAddElem("a",{href:"###","data-page":e},e);this.pagesDom.appendChild(t)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}let s=this.pagesDom.querySelectorAll("[data-page]");return[...s].forEach(t=>{t.onclick=axDebounce(()=>{this.current=~~t.dataset.page,this.currentToRenderList(this.current)},this.options.clickDelay)}),this.setClass(t),e&&e.call(this,t),this.pagesDom}setClass(t){let e=this.pagesDom.querySelectorAll("[data-page]"),s=[...e].filter(e=>~~e.dataset.page==t)[0];s.classList.add("ax-active"),1==~~s.dataset.page?(this.pageFirst.classList.add("ax-disabled"),this.pagePrev.classList.add("ax-disabled"),1==this.pagesNum?(this.pageLast.classList.add("ax-disabled"),this.pageNext.classList.add("ax-disabled")):(this.pageLast.classList.remove("ax-disabled"),this.pageNext.classList.remove("ax-disabled"))):~~s.dataset.page==this.pagesNum?(this.pageLast.classList.add("ax-disabled"),this.pageNext.classList.add("ax-disabled"),this.pageFirst.classList.remove("ax-disabled"),this.pagePrev.classList.remove("ax-disabled")):(this.pageFirst.classList.remove("ax-disabled"),this.pagePrev.classList.remove("ax-disabled"),this.pageLast.classList.remove("ax-disabled"),this.pageNext.classList.remove("ax-disabled"))}getPagination(){let t=document.createDocumentFragment();this.pageGo.innerHTML='跳到</span><input type="text"><button type="button" class="ax-btn">确定</button>';let e=this.pageGo.querySelector("input"),s=this.pageGo.querySelector("button");if(s.onclick=axDebounce(()=>{let t=~~e.value;t<=1?(console.warn("The value is out of range,it has been fixed!"),e.value=1,this.current=1):t>=this.pagesNum?(console.warn("The value is out of range,it has been fixed!"),e.value=this.pagesNum,this.current=this.pagesNum):this.current=t,this.currentToRenderList(this.current)},this.options.clickDelay),e.onkeyup=function(t){"Enter"===t.code&&s.click()},"regular"===this.options.type)t.appendChild(this.pageFirst),t.appendChild(this.pagePrev),t.appendChild(this.pagesDom),t.appendChild(this.pageNext),t.appendChild(this.pageLast);else if("group"===this.options.type)this.group.appendChild(this.pageFirst),this.group.appendChild(this.pagePrev),this.group.appendChild(this.pagesDom),this.group.appendChild(this.pageNext),this.group.appendChild(this.pageLast),t.appendChild(this.group);else if("simple"===this.options.type)t.appendChild(this.pagePrev),t.appendChild(this.pageNext);else if("full"===this.options.type)t.appendChild(this.pageTotal),t.appendChild(this.pageFirst),t.appendChild(this.pagePrev),t.appendChild(this.pagesDom),t.appendChild(this.pageNext),t.appendChild(this.pageLast),t.appendChild(this.pageGo);else if("pagesRight"===this.options.type){let e=axAddElem("div"),s=axAddElem("div",{class:"ax-col ax-align-right"});this.targetDom.classList.add("ax-row"),e.appendChild(this.pageTotal),s.appendChild(this.pageFirst),s.appendChild(this.pagePrev),s.appendChild(this.pagesDom),s.appendChild(this.pageNext),s.appendChild(this.pageLast),s.appendChild(this.pageGo),t.appendChild(e),t.appendChild(s)}else if("pagesLeft"===this.options.type){let e=axAddElem("div"),s=axAddElem("div",{class:"ax-col ax-align-left"});this.targetDom.classList.add("ax-row"),e.appendChild(this.pageTotal),s.appendChild(this.pageFirst),s.appendChild(this.pagePrev),s.appendChild(this.pagesDom),s.appendChild(this.pageNext),s.appendChild(this.pageLast),s.appendChild(this.pageGo),t.appendChild(s),t.appendChild(e)}else t.appendChild(this.pagesDom);this.targetDom.appendChild(t)}getJsonData(t={}){return t.template=t.template||this.template,t.url=t.url||this.options.data,axAjax({url:t.url,type:this.options.ajaxType,before:t=>{this.listDom&&(this.listDom.innerHTML='<div class="ax-pageTurning">'+t.content+"</div>")},success:e=>{let s,i=[];e.content.forEach((e,s)=>{let o,a={index:s};if(t.template||"TBODY"!=this.listDom.nodeName)o=axStrToDom(axTplEngine(t.template,e));else{o=axAddElem("tr");for(let t in e){let s=axAddElem("td",{name:t},e[t]);o.appendChild(s),a.children=[],a.children.push({dom:s,name:t,label:e[t].toString()})}}a.dom=o,this.asyncData.push(a),i.push(o)}),"manual"!==this.dataType&&(this.preData=[...i]),s=this.preData.length,this.getCurrent(s),t.callback&&t.callback.call(this,i,this.asyncData,e.content)}})}getSqlData(t={}){return t.current=t.current||1,t.count=t.count||this.options.count,t.total=t.total||this.options.total,t.template=t.template||this.template,t.url=t.url||this.options.data,axAjax({data:Object.assign({count:t.count,current:t.current,offset:this.getOffset(t.current,t.total,t.count)},this.options.dataExtend),url:t.url,type:this.options.ajaxType,before:t=>{this.listDom&&(this.loadingDom.style="",this.loadingDom.innerHTML=t.content,"overlay"===this.options.loadingMode?this.loadingDom.classList.add("ax-overlay"):(this.listDom.innerHTML="",this.listDom.appendChild(this.loadingDom)),this.listDom.insertAdjacentElement("afterbegin",this.loadingDom),axFadeIn(this.loadingDom,"flex"))},success:e=>{if("object"!=typeof e.content)return console.error("The type of content must be object!"),!1;if(axIsEmpty(e.content.data))return this.listDom&&(this.listDom.innerHTML=""),new axMessage({content:"没有从数据库中获得数据，已停止渲染列表！",iconShow:!0,result:"error"}).show(),!1;"manual"!==this.dataType&&(this.preData=[]),this.asyncData=[];let s,i=[];e.content.data.forEach((e,s)=>{let o,a={index:s};if(t.template||"TBODY"!=this.listDom.nodeName)o=axStrToDom(axTplEngine(t.template,e));else{o=axAddElem("tr"),a.children=[];for(let t in e){let s=axAddElem("td",{name:t},e[t].toString());o.appendChild(s),a.children.push({dom:s,name:t,label:e[t].toString()})}}a.dom=o,this.asyncData.push(a),i.push(o)}),"manual"!==this.dataType&&(this.preData=[...i]),s=this.preData.length,this.getCurrent(s,~~e.content.current,~~e.content.pagesNum,~~e.content.itemsNum),t.callback&&t.callback.call(this,i,this.asyncData,e.content)}})}async currentToRenderList(t,e){this.listDom&&"manual"!==this.dataType&&("sql"===this.options.async?await this.getSqlData({current:t,callback:()=>{this.options.delay?setTimeout(()=>{this.renderList(1)},this.options.delay):this.renderList(1)}}):this.renderList(t)),this.renderPagesTotal(t,e&&e.call(this,t)),this.options.onTurned&&this.options.onTurned.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("turned")&&this.emit("turned",this.current,this.pagesNum,this.getOffset())}first(t){return this.current=1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this}prev(t){return!(this.current<=1)&&(this.current=this.current-1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this)}next(t){return!(this.current>=this.pagesNum)&&(this.current=this.current+1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this)}last(t){return this.current=this.pagesNum,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this}go(t,e){return this.current<=1||this.current>=this.pagesNum?(console.error("The value is out of range!"),!1):(this.current=~~t,this.currentToRenderList(this.current),e&&e.call(this,this.current,this.pagesNum),this)}info(t){let e={current:this.current,pagesNum:this.pagesNum,count:this.options.count,itemsNum:this.itemsNum,selectData:this.selectData};return t&&t.call(this,e),e}updatePages(t,e,s){if(!t)return!1;let i;if(e=e||"remove",i="number"==typeof t?this.preData[t]:t,!i)return!1;"remove"===e&&(this.preData=this.preData.filter(t=>t!=i),this.getCurrent(this.preData.length,this.current,"")),this.currentToRenderList(this.current,()=>{this.renderTotal()}),s&&s.call(this)}async update(t,e,s){return e=e||"overwrite",this.options=axExtend(this.options,t),this.current=this.options.current,this.targetDom.setAttribute("paging",""),this.targetDom.innerHTML="","overwrite"===e&&(this.preData=[]),await this.init(this.options.data),this.options.onUpdated&&this.options.onUpdated.call(this,this.current,this.pagesNum,this.getOffset()),"updated"in this.handlers&&this.emit("updated",this.current,this.pagesNum,this.getOffset()),s&&s.call(this),this}async updateData(t,e,s){return e=e||"overwrite",this.targetDom.setAttribute("paging",""),this.targetDom.innerHTML="","overwrite"===e&&(this.preData=[],this.options.dataExtend=""),"object"==typeof t&&t.url&&t.hasOwnProperty("sql")?(this.options.data=t.url,this.options.dataExtend=t.sql):this.options.data=t,await this.init(this.options.data),this.options.onUpdated&&this.options.onUpdated.call(this,this.current,this.pagesNum,this.getOffset()),"updated"in this.handlers&&this.emit("updated",this.current,this.pagesNum,this.getOffset()),s&&s.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axList{constructor(t,e){return this.targetDom=axIdToDom(t),this.rawOptions={insName:"",names:"",inputDelay:200,clickDelay:200,paginationDom:null,maxCount:1e4,order:"asc",operator:"or",paginationShow:!0,onUpdated:"",onInit:"",pagination:{current:1,count:10,data:[],template:null,async:"",ajaxType:"post",loadingMode:"overlay"}},this.options=axExtend(axClone(this.rawOptions),e,this.targetDom,this.constructor.name),this.handlers={},this.rawData=[],this.preData=[],this.paginationDom=this.options.paginationDom?axIdToDom(this.options.paginationDom):this.targetDom.querySelector(".ax-pagination")||"",this.options.pagination.template?"#"===this.options.pagination.template.trim().substr(0,1)?this.template=document.querySelector(this.options.pagination.template).innerHTML:this.template=this.options.pagination.template:this.template="",this.names=this.options.names.replace(/\s+/g,"").split(","),this.listDom=this.targetDom.querySelector("[list]"),this.searchs=[...this.targetDom.querySelectorAll("[search]")],this.keywords=[...this.targetDom.querySelectorAll("[keyword]")],this.searchVal="",this.sorts=[...this.targetDom.querySelectorAll("[sort]")],this.resets=[...this.targetDom.querySelectorAll("[reset]")],this.filters=[...this.targetDom.querySelectorAll("[filter]")],this.extends=[...this.targetDom.querySelectorAll("[extend]")],this.paginationOpt={},this.pagination=null,this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"list"),this.setPaginationOpt(),this.listDom.children.length>0){let t=[...this.listDom.childNodes].filter(t=>1==t.nodeType);this.getDomArr(t),this.paginationOpt.data=this.preData}else"String"===axType(this.options.pagination.data)&&this.options.pagination.template?"json"===this.options.pagination.async?await axAjax({url:this.options.pagination.data,type:this.options.pagination.ajaxType,success:t=>{let e=[];t.content.forEach(t=>{let s=axStrToDom(axTplEngine(this.template,t));e.push(s)}),this.getDomArr(e),this.paginationOpt.data=this.preData}}):"sql"===this.options.pagination.async&&(["relative","absolute","fixed"].includes(axStyle(this.listDom).position)||(this.listDom.style.position="relative")):(this.preData=this.options.pagination.data,this.rawData=[...this.preData],this.paginationOpt.data=this.options.pagination.data);this.renderFinish(),this.options.onInit&&this.options.onInit.call(this,this.pagination.current,this.pagination.pagesNum)}getDomArr(t){return this.options.names?(t.forEach(t=>{let e={dom:t};this.names.forEach(s=>{t.querySelector("["+s+"]")&&(e[s]=t.querySelector("["+s+"]").innerText.trim())}),this.preData.push(e)}),this.rawData=[...this.preData],!0):(this.preData=t,this.rawData=[...t],!1)}renderFinish(){if(this.pagination=new axPagination(this.paginationDom,this.paginationOpt),!this.options.paginationShow&&(this.pagination.targetDom.remove(),this.pagination.itemsNum>this.paginationOpt.count))return console.error("The maximum length cannot exceed "+this.paginationOpt.count+"!"),!1;let t="sql"===this.paginationOpt.async;this.loadExtend(t),this.loadSort(t),this.loadKeyword(t),this.loadSearch(t),this.loadFilter(t),this.loadReset(t)}setPaginationOpt(){return this.paginationOpt=this.options.pagination,this.paginationOpt.listDom=this.listDom,this.paginationOpt.count=this.options.paginationShow?this.paginationOpt.count:this.options.maxCount,this.paginationOpt}loadExtend(t){0!==this.extends.length&&this.extends.forEach(e=>{let s=e.getAttribute("extend");e.onclick=axDebounce(()=>{this.extend(s,t)},this.options.clickDelay)})}extend(t,e){e?(this.updateSql({dataExtend:{extend:t}}),this.pagination.on("rendered",()=>{axIsEmpty(this.pagination.preData)&&(this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="")})):this.strSearch(t)}loadKeyword(t){0!==this.keywords.length&&this.keywords.forEach(e=>{let s=[...this.preData],i=e.getAttribute("keyword").trim(),o=e.getAttribute("operator")?e.getAttribute("operator").trim():this.options.operator,a="",n=i?i.split(","):[],r=0!==n.length?n:this.names;e.hasAttribute("auto")&&(e.oninput=axDebounce(()=>{let i=e.value;if(0!==n.length){let t={};n.forEach(e=>{t[e]=i}),a=t}else a=i;t?this.sqlSearch(r,i,o):this.keySearch(a,s,o)},this.options.inputDelay))})}loadFilter(t){0!==this.filters.length&&this.filters.forEach(e=>{let s,i=[...this.preData],o=e.getAttribute("operator")?e.getAttribute("operator").trim():this.options.operator;s=t?e.getAttribute("filter"):axAttrToJson(e,"filter"),e.onclick=axDebounce(()=>{this.filter(s,i,o,t)},this.options.clickDelay)})}filter(t,e,s,i){s=s||this.options.operator,e=e||[...this.preData],i?this.updateSql({dataExtend:{filter:t}}):this.keySearch(t,e,s)}loadSearch(t){0!==this.searchs.length&&this.searchs.forEach(e=>{if(0==this.keywords.length)return!1;let s=e.getAttribute("field"),i=this.keywords.filter(t=>t.name==s)[0],o=i.getAttribute("keyword"),a=i.getAttribute("operator")?i.getAttribute("operator").trim():this.options.operator,n=[...this.preData];o=o?o.replace(/\s+/g,"").split(","):this.names,e.onclick=axDebounce(()=>{this.search(o,i.value,n,a,t)},this.options.clickDelay),i.onkeyup=(t=>{"Enter"===t.code&&e.click()})})}search(t,e,s,i,o){if(i=i||this.options.operator,o)this.sqlSearch(t,e,i);else{let o={};s=s||[...this.preData],t.forEach(t=>{o[t]=e}),this.keySearch(o,s,i)}}loadSort(t){if(0!==this.sorts.length)for(let e of this.sorts){let s=e.getAttribute("sort").trim();!t&&this.names.every(t=>t!==s)||(e.onclick=axDebounce(()=>{t?(this.sort(s,"",!0),s.includes(",")||(s.includes("desc")?(e.setAttribute("order","desc"),s=s.replace("desc","asc")):s.includes("asc")&&(e.setAttribute("order","asc"),s=s.replace("asc","desc")))):"desc"===e.getAttribute("order")?(e.setAttribute("order","asc"),this.sort(s,"asc",!1)):"asc"===e.getAttribute("order")?(e.setAttribute("order","desc"),this.sort(s,"desc",!1)):(e.setAttribute("order",this.options.order),this.sort(s,this.options.order,!1)),this.sorts.filter(t=>t!=e).forEach(t=>{t.setAttribute("order","")})},this.options.clickDelay))}}sort(t,e,s){s?this.updateSql({dataExtend:{sort:t}}):this.preSort(t,e)}preSort(t,e,s){if("desc"===e)this.preData.sort(function(e,s){return isNaN(e[t]-s[t])?s[t].localeCompare(e[t],"zh-CN-u-kf-lower"):s[t]-e[t]});else{if("asc"!==e)return!1;this.preData.sort(function(e,s){return isNaN(e[t]-s[t])?e[t].localeCompare(s[t],"zh-CN-u-kf-lower"):e[t]-s[t]})}return this.pagination.updateData(this.preData),this.handlers.hasOwnProperty("sorted")&&this.emit("sorted",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),s&&s.call(this,this.preData,this.pagination.current),this}loadReset(t){0!==this.resets.length&&this.resets.forEach(e=>{e.onclick=axDebounce(()=>{this.reset(t)},this.options.clickDelay)})}reset(t){if(t)this.updateSql({dataExtend:""});else{this.preData=[...this.rawData];let t=axClone(this.rawOptions.pagination);t.data=this.preData,this.updatePages(t)}this.sorts.forEach(t=>{t.setAttribute("order","")}),this.keywords.forEach(t=>{t.value=""}),"reset"in this.handlers&&this.emit("reset",""),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)}keySearch(t,e,s=this.options.operator,i){let o=e.filter(e=>{let i=[];if("object"!=typeof t){for(let t of this.names)i.push(e[t]);return i.toString().includes(t)}{let i=[];for(let s in t)i.push(String(e[s]).includes(t[s]));if("or"===s)return i.some(t=>1==t);if("and"===s)return i.every(t=>1==t)}});if(this.preData=o,axIsEmpty(this.preData))return"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),i&&i.call(this,this.pagination.current,this.pagination.pagesNum),this.preData=[...this.rawData],this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="",!1;this.pagination.updateData(this.preData),"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),i&&i.call(this,this.pagination.current,this.pagination.pagesNum)}strSearch(t,e){if(this.preData=axStrToFilter(t,[...this.preData]),axIsEmpty(this.preData))return"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this.preData=[...this.rawData],this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="",!1;this.pagination.updateData(this.preData),"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),e&&e.call(this,this.pagination.current,this.pagination.pagesNum)}sqlSearch(t,e,s){let i,o="";if(s=s||this.options.operator,0==t.length)return console.error("The length of names array cannot be greater than 0!"),!1;e&&t.forEach((a,n)=>{i=t.length-1!=n?s+" ":"",o+=a+' like "%'+e+'%" '+i}),this.pagination.options.dataExtend="",this.updatePages({dataExtend:{search:o}}),this.pagination.on("rendered",()=>{axIsEmpty(this.pagination.preData)&&(this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="")})}updateSql(t,e){return this.pagination.options.dataExtend="",this.pagination.update(t,"",()=>{this.handlers.hasOwnProperty("updated")&&this.emit("updated",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)}),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this}updatePages(t,e){let s=axExtend(this.options.pagination,t);return this.pagination.update(s,"",()=>{this.handlers.hasOwnProperty("updated")&&this.emit("updated",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)}),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axLightbox{constructor(t,e){this.options=axExtend({insName:"",src:"",gallery:!0,download:!1,autoplay:!1,thumb:{show:!1,placement:"bottom",row:1},zoom:!0,share:!1,btnClass:"ax-lightbox-open",index:0,zIndex:0,onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onDestroy:""},t,e,this.constructor.name),this.handlers={},this.data=[],this.closeArea=[],this.zoomIn=!1,this.button=e?axIdToDom(e):null,this.shown=!1,axInstance.push(this,this.options.insName,"lightbox")}init(){let t=this;this.destroyed=!1,this.data=axCreateData(this.options.src,["src","cover","caption","type"],["media","cover","caption","type"],"figure",["","","","image"],function(t){t.forEach(t=>{t.cover||"image"!=t.type||(t.cover=t.media),t.cover=t.cover?t.cover:""})}),this.setAttribute(),this.createBox(),this.createSlide(),this.data.length>1&&(this.prev=axStrToDom('<span class="ax-prev ax-light"></span>'),this.next=axStrToDom('<span class="ax-next ax-light"></span>'),this.swiper.appendChild(this.prev),this.swiper.appendChild(this.next));let e={zoom:this.options.zoom,lazy:!0,keyboard:!0,mousewheel:!0,initialSlide:this.options.index||0,pagination:{el:this.options.gallery?this.targetDom.querySelector(".ax-pages"):null,type:"fraction"},thumbs:{swiper:""},on:{touchStart:(t,e)=>{t.el.classList.add("ax-grabbing")},touchEnd:(t,e)=>{t.el.classList.remove("ax-grabbing")},zoomChange:(t,e)=>{e>1?this.zoomIn=!0:setTimeout(()=>{this.zoomIn=!1},100)}}},s={lazy:!0,spaceBetween:4,slidesPerView:"auto",mousewheel:!0,grid:{rows:this.options.thumb.row},watchSlidesProgress:!0};return this.options.gallery&&this.options.thumb&&(this.stage.insertAdjacentElement("afterend",this.createThumb()),this.insThumb=new axSwiper(this.thumb.querySelector(".ax-swiper"),s),e.thumbs.swiper=this.insThumb,this.btnList.onclick=(()=>{this.targetDom.classList.toggle("ax-thumb-hide")})),this.options.thumb.show||this.targetDom.classList.add("ax-thumb-hide"),this.options.autoplay&&(e.autoplay={delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!0}),this.insSwiper=new axSwiper(this.swiper,e),document.body.appendChild(this.targetDom),this.data.length>1&&this.options.thumb.row&&this.options.thumb.row>1&&(this.thumb.querySelector(".ax-swiper").style.height=axHeight(this.thumb.querySelector(".ax-slide"),"outer")*this.options.thumb.row+s.spaceBetween*(this.options.thumb.row-1)+"px"),this.options.gallery||this.insSwiper.disable(),axPreventScroll(this.targetDom),this.targetDom.querySelectorAll("[close]").forEach(t=>{t.addEventListener("click",()=>{this.hide()},!1)}),this.options.zoom&&(this.btnZoom.onclick=function(){this.classList.contains("ax-icon-zoomin")?t.insSwiper.zoom.in():t.insSwiper.zoom.out()}),this.options.download&&("image"!=this.data[this.insSwiper.activeIndex].type?(this.btnDownload.href="###",this.btnDownload.classList.add("ax-disabled"),this.btnDownload.removeAttribute("download"),this.btnDownload.removeAttribute("target")):(this.btnDownload.href=this.data[this.insSwiper.activeIndex].media,this.btnDownload.classList.remove("ax-disabled"),this.btnDownload.setAttribute("download",""),this.btnDownload.setAttribute("target","_blank"))),this.options.zoom&&("image"!=this.data[this.insSwiper.activeIndex].type?(this.btnZoom.classList.add("ax-disabled"),this.insSwiper.zoom.disable()):(this.btnZoom.classList.remove("ax-disabled"),this.insSwiper.zoom.enable())),this.options.share&&("image"!=this.data[this.insSwiper.activeIndex].type?this.btnShare.classList.add("ax-disabled"):this.btnShare.classList.remove("ax-disabled")),this.insSwiper.on("slideChangeTransitionEnd",function(){t.options.download&&("image"!=t.data[this.activeIndex].type?(t.btnDownload.href="###",t.btnDownload.classList.add("ax-disabled"),t.btnDownload.removeAttribute("download"),t.btnDownload.removeAttribute("target")):(t.btnDownload.href=t.data[this.activeIndex].media,t.btnDownload.classList.remove("ax-disabled"),t.btnDownload.setAttribute("download",""),t.btnDownload.setAttribute("target","_blank"))),t.options.zoom&&("image"!=t.data[this.activeIndex].type?(t.btnZoom.classList.add("ax-disabled"),t.insSwiper.zoom.disable()):(t.btnZoom.classList.remove("ax-disabled"),t.btnZoom.classList.remove("ax-icon-zoomout"),t.btnZoom.classList.add("ax-icon-zoomin"),t.insSwiper.zoom.enable())),t.options.share&&("image"!=t.data[this.activeIndex].type?t.btnShare.classList.add("ax-disabled"):t.btnShare.classList.remove("ax-disabled")),t.targetDom.querySelectorAll("video,audio").forEach(t=>{t.pause()}),t.zoomIn=!1}),this.insSwiper.on("zoomChange",(t,e)=>{e>1?(this.btnZoom.classList.remove("ax-icon-zoomin"),this.btnZoom.classList.add("ax-icon-zoomout")):(this.btnZoom.classList.remove("ax-icon-zoomout"),this.btnZoom.classList.add("ax-icon-zoomin"))}),this.options.onInit&&this.options.onInit.call(this),"init"in this.handlers&&this.emit("init",""),this}overlayClose(t){this.closeArea=[];let e=!0,s=!0,i=!0;return this.prev&&(e=axIsOutside(t,this.prev)),this.closeArea.push(e),this.next&&(s=axIsOutside(t,this.next)),this.closeArea.push(s),i=!this.options.thumb||axIsOutside(t,this.thumb),this.closeArea.push(i),this.swiperWrapper.querySelectorAll(".ax-media").forEach(e=>{let s=e.firstElementChild;this.closeArea.push(axIsOutside(t,s))}),this.swiperWrapper.querySelectorAll(".ax-caption")&&this.swiperWrapper.querySelectorAll(".ax-caption").forEach(e=>{this.closeArea.push(axIsOutside(t,e))}),this.closeArea.push(axIsOutside(t,this.operate)),this.closeArea.push(axIsOutside(t,this.pages)),this.closeArea}createSlide(){let t=(t,e)=>e&&"video"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <video controls><source src="${t}"></video>\n                    </div>\n                </div>\n                `:e&&"audio"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <audio controls><source src="${t}" ></audio>\n                    </div>\n                </div>\n                `:e&&"iframe"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <iframe src="${t}" frameborder="0" width="100%" height="100%"></iframe>\n                    </div>\n                </div>\n                `:e&&"text"==e?("#"==t.substr(0,1)&&(t=document.querySelector(t).innerHTML),`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <div class="ax-text">${t}</div>\n                    </div>\n                </div>\n                `):`\n                <div class="ax-slide">\n                    <div class="ax-media ax-zoom">\n                        <img data-src="${t}" class="ax-lazy" />\n                        <span class="ax-loading ax-white"><i></i></span>\n                    </div>\n                </div>\n                `;this.data.forEach(e=>{let s=null,i=null;s=axStrToDom(t(e.media,e.type)),i=e.caption?axStrToDom(`<div class="ax-caption">${e.caption}</div>`):null,i&&s.appendChild(i),this.swiperWrapper.appendChild(s)})}createThumb(){return this.thumb=axStrToDom('<div class="ax-thumb"><div class="ax-swiper"><div class="ax-wrapper"></div></div></div>'),this.thumbWrapper=this.thumb.querySelector(".ax-wrapper"),this.data.forEach(t=>{let e=axStrToDom(`\n            <div class="ax-slide">\n                <img data-src="${t.cover}" class="ax-lazy" />\n                <span class="ax-loading ax-white"><i></i></span>\n            </div>\n            `);this.thumbWrapper.appendChild(e)}),this.thumb}createBox(){let t='\n        <div class="ax-lightbox">\n        <div class="ax-overlay"></div>\n        <div class="ax-tools">\n            <div class="ax-pages"></div>\n            <div class="ax-operate"><i class="ax-iconfont ax-icon-close" close></i></div>\n        </div>\n        <div class="ax-stage">\n            <div class="ax-swiper">\n                <div class="ax-wrapper">\n                </div>\n            </div>\n        </div>\n    </div>\n      ';this.targetDom=axStrToDom(t),this.tools=this.targetDom.querySelector(".ax-tools"),this.pages=this.targetDom.querySelector(".ax-pages"),this.operate=this.targetDom.querySelector(".ax-operate"),this.stage=this.targetDom.querySelector(".ax-stage"),this.swiper=this.stage.querySelector(".ax-swiper"),this.swiperWrapper=this.swiper.querySelector(".ax-wrapper"),this.createBtn()}createBtn(){this.btnShare=axStrToDom('<i class="ax-iconfont ax-icon-share-f" share></i>'),this.btnDownload=axStrToDom('<a href="###" class="ax-iconfont ax-icon-download" target="_blank" download></a>'),this.btnZoom=axStrToDom('<i class="ax-iconfont ax-icon-zoomin" zoom></i>'),this.btnList=axStrToDom('<i class="ax-iconfont ax-icon-list" list></i>'),this.options.thumb&&this.operate.insertAdjacentElement("afterbegin",this.btnList),this.options.download&&this.operate.insertAdjacentElement("afterbegin",this.btnDownload),this.options.zoom&&this.operate.insertAdjacentElement("afterbegin",this.btnZoom),this.options.share&&this.operate.insertAdjacentElement("afterbegin",this.btnShare)}setAttribute(){for(let t=0,e=this.data.length;t<e;t++){this.data[t].hasOwnProperty("type")&&["iframe","video","text"].includes(this.data[t].type)&&(this.options.thumb=!1);break}this.data.length<2&&this.options.thumb,this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}update(t,e){return this.destroyed?this:(this.options=axExtend(this.options,t),this.init(),
this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update",""),e&&e.call(this),this)}show(t){return this.destroyed||this.shown||!this.targetDom||axIsVnode(this.targetDom)?this:(this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),this.targetDom.style.visibility="visible",this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),t&&t.call(this),this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown",""),this.targetDom.onclick=(t=>{this.overlayClose(t);let e=this.closeArea.includes(!1);e||this.zoomIn||this.hide()}),this.shown=!0,this)}hide(t){return this.destroyed||!this.shown?this:(this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.targetDom.classList.remove("ax-show"),this.targetDom.addEventListener("transitionend",()=>{this.targetDom.remove()},!1),this.shown=!1,this.targetDom.querySelectorAll("video,audio").forEach(t=>{t.pause()}),t&&t.call(this),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden",""),this)}destroy(){return this.targetDom.remove(),callback&&callback.call(this),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}(()=>{let t=t=>{let e=axIdToDom(t),s=[{}],i=e.nodeName;return"A"==i?e.hasAttribute("href")&&-1==e.getAttribute("href").indexOf("##")&&(s[0].media=e.getAttribute("href"),s[0].cover=e.getAttribute("href")):"IMG"==i&&e.hasAttribute("src")&&(s[0].media=e.getAttribute("src"),s[0].cover=e.getAttribute("src")),e.hasAttribute("type")?s[0].type=e.getAttribute("type"):s[0].type="image",e.hasAttribute("title")?s[0].caption=e.getAttribute("title"):e.hasAttribute("alt")?s[0].caption=e.getAttribute("alt"):s[0].caption="",s},e=[],s=[...document.querySelectorAll("[axLightbox]")].filter(t=>t.getAttribute("axLightbox").includes("insName")),i={};for(let t=0,e=s.length;t<e;t++){let e=s[t],o=axAttrToJson(e,"axLightbox").insName;o&&(i.hasOwnProperty(o)?i[o].push(e):i[o]=[e])}for(let s in i){let o=0;i[s].forEach(i=>{i.slideIndex=o;let a=[],n=axAttrToJson(i,"axLightbox").src;a=n?axCreateData(n,["src","cover","caption","type"],"figure",["media","cover","caption","type"],["","","","image"],function(t){t.forEach(t=>{t.cover||"image"!=t.type||(t.cover=t.media),t.cover=t.cover?t.cover:""})}):t(i),o+=a.length,axIsEmpty(e)?e.push({name:s,data:a}):(e.forEach(t=>{t.name==s&&t.data.push(...a)}),e.some(t=>t.name==s)||e.push({name:s,data:a}))})}e.forEach(t=>{new axLightbox({insName:t.name,src:t.data})}),document.querySelectorAll("[axLightbox]").forEach(e=>{let s=axAttrToJson(e,"axLightbox"),i=s.insName;if(i){let t=axInstance.find(i,"lightbox");e.onclick=(s=>{axPreventDefault(s),t&&(t.init(),t.insSwiper.slideTo(e.slideIndex,0),t.show())})}else s.src?e.onclick=(t=>{axPreventDefault(t),new axLightbox("",e).init().show()}):e.onclick=(s=>{axPreventDefault(s),new axLightbox({src:t(e)}).init().show()})})})();class axLazyload{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",offset:"0px",visible:[0,.5,1],parent:null,animation:"ax-fadeIn",dataName:"src",onBefore:"",onShow:"",onShowing:"",onShown:"",onAllShown:"",onIn:"",onOut:"",onAdd:"",onRemove:""},e,this.targetDom,this.constructor.name),this.handlers={},this.items=[],this.shownNum=0,["VIDEO","AUDIO","IMG","IFRAME"].includes(this.targetDom.nodeName)?this.type="single":this.type="multiple",this.parent=this.options.parent?axIdToDom(this.options.parent):this.options.parent,this.init(),this}init(){return axInstance.push(this,this.options.insName,"lazyload"),this.interactOpt(),this.active(),this}active(){this.createInteract(),"single"===this.type?this.items.push(this.targetDom):"multiple"===this.type&&(this.items=[...this.targetDom.querySelectorAll("[data-"+this.options.dataName+"]")]);let t=!this.options.onBefore||this.options.onBefore.call(this,this.items);return t&&this.items.forEach(t=>{t.lazyload={observed:!0},this.interact.observe(t)}),this}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.parent,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}createInteract(){this.interact=new IntersectionObserver(t=>{t.forEach(t=>{let e=[t.target,t];t.isIntersecting?t.target.hasAttribute("data-"+this.options.dataName)&&(t.target.classList.add(this.options.animation),"VIDEO"===t.target.nodeName||"AUDIO"===t.target.nodeName?(t.target.src=t.target.dataset[this.options.dataName],t.target.querySelector("source").setAttribute("src",t.target.dataset[this.options.dataName])):t.target.setAttribute("src",t.target.dataset[this.options.dataName]),t.target.removeAttribute("data-"+this.options.dataName),0===t.intersectionRatio?(t.target.lazyload.state="show",this.handlers.hasOwnProperty("show")&&this.emit("show",...e),this.options.onShow&&this.options.onShow.call(this,...e)):1===t.intersectionRatio?(t.target.lazyload.state="shown",this.handlers.hasOwnProperty("shown")&&this.emit("shown",...e),this.options.onShown&&this.options.onShown.call(this,...e),this.shownNum++,this.interact.unobserve(t.target)):(t.target.lazyload.state="showing",this.handlers.hasOwnProperty("showing")&&this.emit("showing",...e),this.options.onShowing&&this.options.onShowing.call(this,...e)),this.handlers.hasOwnProperty("in")&&this.emit("in",...e),this.options.onIn&&this.options.onIn.call(this,...e),this.shownNum>=this.items.length&&(this.handlers.hasOwnProperty("allShown")&&this.emit("allShown",this.items),this.options.onAllShown&&this.options.onAllShown.call(this,this.items))):(this.handlers.hasOwnProperty("out")&&this.emit("out",...e),this.options.onOut&&this.options.onOut.call(this,...e))})},this.interactOpt())}getDoms(t){let e=axType(t),s=[];return"Array"===e?s=t.map(t=>axIdToDom(t)).filter(Boolean):"String"===e&&(s=axAllToDoms(t).filter(Boolean)),s}add(t,e){let s=this.getDoms(t);s.forEach(t=>{t.lazyload?new axMessage({content:`媒体文件${t.dataset.src||t.src}已经处于监听状态，不需要添加监听操作！`,iconShow:!0,result:"warning"}).show():(t.lazyload={observed:!0},this.interact.observe(t),!this.items.includes(t)&&this.items.push(t))}),this.handlers.hasOwnProperty("add")&&this.emit("add",s),this.options.onAdd&&this.options.onAdd.call(this,s),e&&e.call(this,s)}remove(t,e){let s=this.getDoms(t);s.forEach(t=>{this.items.includes(t)&&(t.lazyload?(Reflect.deleteProperty(t,"lazyload"),this.interact.unobserve(t)):new axMessage({content:`媒体文件${t.dataset.src||t.src}还未被监听，不需要取消监听操作！`,iconShow:!0,result:"warning"}).show())}),this.handlers.hasOwnProperty("remove")&&this.emit("remove",s),this.options.onRemove&&this.options.onRemove.call(this,s),e&&e.call(this,s)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axInfinite{constructor(t,e){if(this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",type:"list",offset:"0px",visible:[0],url:"",urlMax:20,data:[],template:null,selector:"",trigger:"scroll",parent:null,animation:"ax-fadeIn",start:0,count:10,finishText:"没有更多内容了",nextBtn:'<button class="ax-btn ax-btn-primary ax-longer">查看更多</button>',ajaxType:"post",active:""},e,this.targetDom,this.constructor.name),this.handlers={},this.start=this.options.start,this.data=this.options.data,this.loadStatus=this.targetDom.querySelector(".ax-infinite-status")?this.targetDom.querySelector(".ax-infinite-status"):axAddElem("div",{class:"ax-infinite-status"}),this.loadingDiv=axAddElem("div",{class:"ax-infinite-loading"},'<span class="ax-loading"><i></i></span>'),this.resultDiv=axAddElem("div",{class:"ax-infinite-tips"}),this.nextDiv=axAddElem("div",{class:"ax-infinite-next"},this.options.nextBtn),this.nextButton=this.nextDiv.firstElementChild,this.loadStatus.insertAdjacentElement("afterbegin",this.loadingDiv),this.loadStatus.appendChild(this.resultDiv),this.url=[],"string"==typeof this.options.url)if(this.options.url.indexOf("{")>0&&this.options.url.indexOf("}")>0){let t=~~this.options.url.match(/\{(\S*)\}/)[1],e=`{${t}}`;for(let s=t;s<=t+this.options.urlMax;s++)this.url.push(this.options.url.replace(e,s))}else if("pagination"===this.options.url){let t=this.loadStatus.querySelectorAll("[data-page]");[...t].forEach(t=>{this.url.push(t.href)})}else this.options.url&&(this.url=[this.options.url]);else"Array"==axType(this.options.url)&&(this.url=this.options.url);this.options.template?"#"==this.options.template.trim().substr(0,1)?this.template=document.querySelector(this.options.template).innerHTML:this.template=this.options.template:this.template="",this.items=[],this.init()}init(){axInstance.push(this,this.options.insName,"infinite"),"image"==this.options.type||this.targetDom.classList.contains("ax-infinite")||this.targetDom.classList.add("ax-infinite"),this.interactOpt(),"scroll"==this.options.trigger?this.active():"clicks"==this.options.trigger&&(this.loadStatus.appendChild(this.nextDiv),this.loadStatus.setAttribute("preloading",""),this.targetDom.appendChild(this.loadStatus),this.nextButton.onclick=(()=>{this.loadStatus.removeAttribute("preloading",""),this.loadStatus.removeAttribute("loaded",""),this.loadStatus.setAttribute("loading",""),"pages"==this.options.type?this.getAsyncData("page",{start:this.start}):this.options.url&&this.options.template&&("json"==this.options.type?this.getAsyncData("json",{start:this.start}):"sql"==this.options.type&&this.getAsyncData("sql",{start:this.start,count:this.options.count}))}))}active(t,e){if(axIsEmpty(t)||("Array"==axType(t)?this.url.push(...t):this.url.push(t)),"pages"==this.options.type)this.asyncInteract("page");else if(!axIsEmpty(this.url)&&this.options.template)"json"==this.options.type?this.asyncInteract("json"):"sql"==this.options.type&&this.asyncInteract("sql");else if("list"==this.options.type){axIsEmpty(this.data)||this.renderList(this.data);let t=[...this.targetDom.childNodes].filter(t=>1==t.nodeType);t.forEach(t=>{axOffset(t).top>window.innerHeight&&(t.setAttribute("infinite",""),this.items.push(t))}),this.listInteract(),this.items.forEach(t=>{this.listInteract().observe(t)})}e&&e.call(this),this.options.active&&this.options.active.call(this),"activated"in this.handlers&&this.emit("activated","")}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.options.parent,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}listInteract(){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.hasAttribute("infinite")&&(e.target.classList.add(this.options.animation),e.target.removeAttribute("infinite"),t.unobserve(e.target)),"shown"in this.handlers&&this.emit("shown",e.target))})},this.interactOpt());return t}asyncInteract(t){this.targetDom.appendChild(this.loadStatus),this.asyncObserver=new IntersectionObserver(e=>{e[0].isIntersecting&&("page"==t||"json"===t?this.getAsyncData(t,{start:this.start}):"sql"===t&&this.getAsyncData("sql",{start:this.start,count:this.options.count}))},this.interactOpt()),this.asyncObserver.observe(this.loadStatus)}itemInteract(){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.hasAttribute("infinite")&&(e.target.classList.add(this.options.animation),e.target.removeAttribute("infinite"),t.unobserve(e.target),"shown"in this.handlers&&this.emit("shown",e.target))})},this.interactOpt());return t}renderList(t){let e=document.createDocumentFragment();t.forEach(t=>{let s=axStrToDom(axTplEngine(this.template,t));s.setAttribute("infinite",""),this.items.push(s),e.appendChild(s)}),this.targetDom.appendChild(e),"list"==!this.options.type&&this.targetDom.appendChild(this.loadStatus)}loadFinish(){"clicks"!=this.options.trigger&&this.asyncObserver.disconnect(),this.loadStatus.removeAttribute("loading"),this.loadStatus.removeAttribute("loaded"),this.loadStatus.setAttribute("finish",""),this.loadingDiv&&this.loadingDiv.remove(),this.nextDiv&&this.nextDiv.remove(),this.resultDiv.innerHTML=this.options.finishText,"finished"in this.handlers&&this.emit("finished","")}getAsyncData(t="json",e,s){return axAjax({data:"sql"===t?{start:e.start,count:e.count}:"",type:this.options.ajaxType,url:"sql"===t?this.options.url:this.url[e.start],selector:this.options.selector,error:t=>{"404"==t.status?new axMessage({content:"已经没有更多内容了！",result:"warning",iconShow:!0}).show():console.error(`发生错误：${t.status}，可能是地址错误！`),this.loadFinish()},opened:t=>{this.contentXhr=t.xhr},success:i=>{"page"===t?(this.targetDom.insertAdjacentHTML("beforeEnd",i.content),this.targetDom.appendChild(this.loadStatus),this.start++,this.start>=this.url.length&&this.loadFinish()):(this.itemInteract(),"json"===t?(this.renderList(i.content),this.targetDom.appendChild(this.loadStatus),this.start++,this.start>=this.url.length&&this.loadFinish()):"sql"===t&&(this.renderList(i.content.data),this.targetDom.appendChild(this.loadStatus),this.start+=e.count,this.start>=i.content.total&&this.loadFinish())),"clicks"==this.options.trigger&&(this.loadStatus.removeAttribute("loading",""),this.loadStatus.setAttribute("loaded","")),this.items.forEach(t=>{this.itemInteract().observe(t)}),this.handlers.hasOwnProperty("loaded")&&this.emit("loaded",i.content),s&&s(i.content)}})}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axProgress{constructor(t,e){let s;return this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",type:"line",color:"",gradient:!1,linecap:"round",size:"",range:[0,100],value:0,duration:"",rotate:!1,trackShow:!0,labelFormat:"",labelShow:!0,lablePlace:"",labelText:{unit:"%",tips:"当前进度",complete:"完成!"},started:"",completed:"",processing:""},e,this.targetDom,this.constructor.name),this.handlers={},this.circleWidth=251.2,this.semiWidth=125.6,this.gapWidth=167.6,s="circle"==this.options.type?this.circleWidth-this.options.value/this.options.range[1]*this.circleWidth:"semicircle"==this.options.type?this.semiWidth-this.options.value/this.options.range[1]*this.semiWidth:"gapcircle"==this.options.type?this.gapWidth-this.options.value/this.options.range[1]*this.gapWidth:Math.abs(this.options.value/(this.options.range[1]-this.options.range[0])*100),this.trueValue=this.getDecimals(s),this.value=this.options.value,this.complete=this.value==this.options.range[1],this.completeDom=axAddElem("span",{complete:""},`${this.options.labelText.complete}`),this.init(),this}init(){return axInstance.push(this,this.options.insName,"progress"),this.getTrueValue(this.options.value),this.createHtml(),this.setAttribute(),this.hasComplete(),this.options.started&&this.options.started.call(this),"started"in this.handlers&&this.emit("started",""),this}hasComplete(){this.complete?(this.targetDom.setAttribute("complete","true"),this.labelDom&&this.labelDom.appendChild(this.completeDom),this.options.completed&&this.options.completed.call(this),"completed"in this.handlers&&this.emit("completed","")):this.targetDom.removeAttribute("complete")}createAnimation(){let t,e=t=>3*t+200;t=void 0!==this.options.duration&&"number"==typeof this.options.duration?this.options.duration:e(Math.abs(this.barDiffer));let s=(new Date).getTime(),i=()=>{this.complete&&(this.complete=!1,this.hasComplete());let e=(new Date).getTime()-s,o=e/t,a=axCurves.easeOut(o),n=this.lastValue+this.valueDiffer*a,r=this.lastTrueValue+this.barDiffer*a;if(e<=t){let t=this.getDecimals(n),e=this.getDecimals(r);"line"==this.options.type?this.bar.style.width=e+"%":this.bar.setAttribute("stroke-dashoffset",e),this.progressDom&&(this.progressDom.innerText=Math.trunc(n)),this.options.processing&&this.options.processing.call(this,t,e),"processing"in this.handlers&&this.emit("processing",t,e)}else"line"==this.options.type?this.bar.style.width=this.trueValue+"%":this.bar.setAttribute("stroke-dashoffset",this.trueValue),this.progressDom&&(this.progressDom.innerText=this.value),this.complete=this.value>=this.options.range[1];let l=requestAnimationFrame(i);e>t&&(cancelAnimationFrame(l),this.hasComplete(),this.value<=0&&(this.options.started&&this.options.started.call(this),"started"in this.handlers&&this.emit("started","")))};i()}getDecimals(t){return Math.floor(100*t)/100}getTrueValue(t){t<this.options.range[0]?t=this.options.range[0]:t>this.options.range[1]&&(t=this.options.range[1]),this.valueDiffer=t-this.value,this.lastValue=this.value,this.value=t,"circle"==this.options.type?(this.barDiffer=this.circleWidth-t/this.options.range[1]*this.circleWidth-this.trueValue,this.lastTrueValue=this.trueValue,this.trueValue=this.circleWidth-t/this.options.range[1]*this.circleWidth,this.trueValue>this.circleWidth?this.trueValue=this.circleWidth:this.trueValue=this.getDecimals(this.trueValue)):"semicircle"==this.options.type?(this.barDiffer=this.semiWidth-t/this.options.range[1]*this.semiWidth-this.trueValue,this.lastTrueValue=this.trueValue,this.trueValue=this.semiWidth-t/this.options.range[1]*this.semiWidth,this.trueValue>this.semiWidth?this.trueValue=this.semiWidth:this.trueValue=this.getDecimals(this.trueValue)):"gapcircle"==this.options.type?(this.barDiffer=this.gapWidth-t/this.options.range[1]*this.gapWidth-this.trueValue,this.lastTrueValue=this.trueValue,this.trueValue=this.gapWidth-t/this.options.range[1]*this.gapWidth,this.trueValue>this.gapWidth?this.trueValue=this.gapWidth:this.trueValue=this.getDecimals(this.trueValue)):"line"==this.options.type&&(this.barDiffer=Math.abs(t/(this.options.range[1]-this.options.range[0])*100)-this.trueValue,this.lastTrueValue=this.trueValue,this.trueValue=Math.abs(t/(this.options.range[1]-this.options.range[0])*100),this.trueValue>100?this.trueValue=100:this.trueValue=this.getDecimals(this.trueValue))}setAttribute(){this.targetDom.setAttribute("linecap",this.options.linecap),this.targetDom.setAttribute("type",this.options.type),this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.color&&this.targetDom.setAttribute("color",this.options.color),this.options.gradient&&this.targetDom.setAttribute("gradient",""),!this.options.trackShow&&this.targetDom.setAttribute("track","false"),this.options.rotate&&(this.wrapper.classList.add("ax-rotate360"),this.wrapper.style.animationIterationCount="infinite")}createHtml(){let t;if("line"==this.options.type)this.wrapper=axAddElem("div",{track:""}),this.bar=axAddElem("div",{bar:"",style:`width:${this.trueValue}%`}),this.labelFormat=this.options.labelFormat?this.options.labelFormat:"<span label><i progress></i><i unit></i></span>";else{this.labelFormat=this.options.labelFormat?this.options.labelFormat:"<div label><div tips></div><div result><i progress></i><i unit></i></div></div>";let e="";this.options.gradient&&("primary"==this.options.color?e='\n                <linearGradient id="svgbar-primary" >\n                    <stop offset="0%" style="stop-color:var(--color-primary);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-primary-like);" ></stop>\n                </linearGradient>\n              ':"secondary"==this.options.color?e='\n                <linearGradient id="svgbar-secondary" >\n                    <stop offset="0%" style="stop-color:var(--color-secondary);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-secondary-like);" ></stop>\n                </linearGradient>\n              ':"danger"==this.options.color?e='\n                <linearGradient id="svgbar-danger" >\n                    <stop offset="0%" style="stop-color:var(--color-danger);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-danger-like);" ></stop>\n                </linearGradient>\n              ':"success"==this.options.color?e='\n                <linearGradient id="svgbar-success" >\n                    <stop offset="0%" style="stop-color:var(--color-success);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-success-like);" ></stop>\n                </linearGradient>\n              ':"warning"==this.options.color?e='\n            <linearGradient id="svgbar-warning" >\n                <stop offset="0%" style="stop-color:var(--color-warning);" ></stop>\n                <stop offset="100%" style="stop-color:var(--color-warning-like);" ></stop>\n            </linearGradient>\n          ':"info"==this.options.color?e='\n                <linearGradient id="svgbar-info" >\n                    <stop offset="0%" style="stop-color:var(--color-info);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-info-like);" ></stop>\n                </linearGradient>\n              ':"ad"==this.options.color&&(e='\n                <linearGradient id="svgbar-ad" >\n                    <stop offset="0%" style="stop-color:var(--color-ad);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-ad-like);"></stop>\n                </linearGradient>\n              ')),"circle"==this.options.type?t=`<svg viewBox="0 0 100 100">\n                            ${e}\n                            ${this.options.trackShow?'<path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0  a 40 40 0 1 1 -80 0" track></path>':""}\n                            <path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0  a 40 40 0 1 1 -80 0" bar stroke-dasharray=${this.circleWidth} stroke-linecap=${this.options.linecap}  stroke-dashoffset=${this.trueValue}></path>\n                       </svg>\n                        `:"semicircle"==this.options.type?t=`<svg viewBox="0 0 100 60">\n                            ${e}\n                            ${this.options.trackShow?`<path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0" track stroke-linecap=${this.options.linecap}></path>`:""}\n                            <path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0" bar stroke-dasharray=${this.semiWidth} stroke-linecap=${this.options.linecap} stroke-dashoffset=${this.trueValue}></path>\n                       </svg>\n                        `:"gapcircle"==this.options.type&&(t=`<svg viewBox="0 0 100 80">\n                            ${e}\n                            ${this.options.trackShow?`<path d="M15.367,70.026C11.954,64.137,10,57.296,10,49.999 C10,27.909,27.909,10,50,10c22.092,0,40,17.909,40,39.999c0,7.295-1.952,14.134-5.363,20.022" track stroke-linecap=${this.options.linecap}></path>`:""}\n                            <path d="M15.367,70.026C11.954,64.137,10,57.296,10,49.999 C10,27.909,27.909,10,50,10c22.092,0,40,17.909,40,39.999c0,7.295-1.952,14.134-5.363,20.022" bar stroke-dasharray=${this.gapWidth} stroke-linecap=${this.options.linecap} stroke-dashoffset=${this.trueValue}></path>\n                       </svg>\n                        `)}if(this.options.labelShow){if(this.options.labelPlace){let t=axIdToDom(this.options.labelPlace);t.insertAdjacentHTML("beforeEnd",this.labelFormat),this.labelDom=t.querySelector("[label]")}else this.targetDom.insertAdjacentHTML("beforeEnd",this.labelFormat),this.labelDom=this.targetDom.querySelector("[label]");this.progressDom=this.labelDom.querySelector("[progress]"),this.unitDom=this.labelDom.querySelector("[unit]"),this.tipsDom=this.labelDom.querySelector("[tips]"),this.progressDom&&(this.progressDom.innerHTML=this.value),this.unitDom&&(this.unitDom.innerHTML=this.options.labelText.unit),this.tipsDom&&(this.tipsDom.innerHTML=this.options.labelText.tips)}"line"==this.options.type?(this.wrapper.appendChild(this.bar),this.targetDom.insertAdjacentElement("afterBegin",this.wrapper)):(this.targetDom.insertAdjacentHTML("afterBegin",t),this.wrapper=this.targetDom.querySelector("svg"),this.bar=this.wrapper.querySelector("[bar]"),this.track=this.wrapper.querySelector("[track]"))}set(t,e){return this.getTrueValue(t),this.value!=this.lastValue&&(this.createAnimation(),e&&e.call(this),"seted"in this.handlers&&this.emit("seted",this.value,this.trueValue),this)}get(){return{value:this.value,trueValue:this.trueValue,lastValue:this.lastValue,lastTrueValue:this.lastTrueValue,complete:this.complete}}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axInput{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"text",name:"",value:"",limit:0,placeholder:"",width:"",height:"",size:"",className:"",props:"",toolsShow:!0,extend:"",clearShow:!1,onClear:"",onSet:"",onReset:"",onInit:"",onExceed:"",onInput:""},e,this.targetDom,this.constructor.name),this.handlers={},this.output={name:this.options.name},this.createElem(),this.setAttribute(),this.addExtend(this.options.extend),axInstance.push(this,this.options.insName,"input")}createElem(){let t=()=>{"textarea"==this.options.type?this.field=axAddElem("textarea",{name:this.options.name,placeholder:this.options.placeholder}):"button"==this.options.type?this.field=axAddElem("button","",this.options.value):this.field=axAddElem("input",{type:this.options.type,name:this.options.name,placeholder:this.options.placeholder})};if(this.targetDom?"INPUT"==this.targetDom.nodeName||"TEXTAREA"==this.targetDom.nodeName||"BUTTON"==this.targetDom.nodeName?(this.parent=this.targetDom.parentElement,this.field=this.targetDom):(this.parent=this.targetDom,t()):(this.parent=axAddElem("div",{class:"ax-form-wrapper"}),t()),this.parent.appendChild(this.field),this.parent.querySelector(".ax-pos-right")?this.tools=this.parent.querySelector(".ax-pos-right"):this.tools=axAddElem("span",{class:"ax-pos-right"}),this.tools.querySelector("[clear]")?this.clearBtn=this.tools.querySelector("[clear]"):(this.clearBtn=axAddElem("a",{href:"###",class:"ax-iconfont ax-icon-close",clear:""}),this.options.clearShow&&this.tools.appendChild(this.clearBtn)),this.clearBtn&&(this.clearBtn.onclick=(()=>{this.clear()}),this.clearBtn.clear=!0),this.options.toolsShow&&this.parent.appendChild(this.tools),this.options.limit){this.limit=axAddElem("div",{class:"ax-form-limit"},`已输入<i have>0</i>个字符,还可以输入<i remainder>${this.options.limit}</i>个字`);let t=this.limit.querySelector("[have]"),e=this.limit.querySelector("[remainder]");this.parent.appendChild(this.limit),this.field.oninput=(()=>{let s=this.intercept(this.field.value);this.field.value=s.text,t&&(t.innerHTML=s.have),e&&(e.innerHTML=s.remainder),this.options.onInput&&this.options.onInput.call(this,this.output),"input"in this.handlers&&this.emit("input",this.output)})}this.options.value&&this.set(this.options.value),this.output.dom=this.field,this.output.parent=this.parent,this.output.type=this.options.type,this.options.onInit&&this.options.onInit.call(this,this.output)}setAttribute(){this.options.className&&this.field.setAttribute("class",this.options.className),this.options.width&&(this.field.style.width=this.options.width),this.options.height&&(this.field.style.height=this.options.height),this.options.size&&this.field.classList.add(`ax-${this.options.size}`);for(let t in this.options.props)this.field.setAttribute(t,this.options.props[t])}addExtend(t){if(!this.options.toolsShow)return!1;let e=t=>{let e=axAddElem(t.node||"a",{class:t.icon},t.text);if(e.setAttribute(t.name,""),t.props)for(let e in t.props)this.field.setAttribute(e,t.props[e]);this.tools.appendChild(e),t.callback&&t.callback.call(this,e,this.field)};Array.isArray(t)?t.forEach(t=>{e(t)}):e(t)}intercept(t){let e=t.length,s={};return e>=this.options.limit&&this.options.limit?(s={text:t.substring(0,this.options.limit),have:this.options.limit,remainder:0},this.limit&&this.limit.classList.add("ax-color-danger"),this.options.onExceed&&this.options.onExceed.call(this,this.output),"exceed"in this.handlers&&this.emit("exceed",this.output)):(this.limit&&this.limit.classList.remove("ax-color-danger"),s={text:t,have:t.length,remainder:Math.abs(this.options.limit-e)}),s}set(t,e){Array.isArray(t)?t=JSON.stringify(t[0]):"string"!=typeof t&&(t=JSON.stringify(t));let s=t.replace(/<[^>]+>/g,"").trim(),i=this.intercept(s);return this.field.value=i.text,this.limit&&(this.limit.querySelector("[have]")&&(this.limit.querySelector("[have]").innerHTML=i.have),this.limit.querySelector("[remainder]")&&(this.limit.querySelector("[remainder]").innerHTML=i.remainder)),this.output.value=this.field.value,e&&e.call(this,this.field,i.text,i.remainder),this.options.onSet&&this.options.onSet.call(this,this.field,i.text,i.remainder),"set"in this.handlers&&this.emit("set",this.field,i.text,i.remainder),this}getValues(){return this.field.value}clear(t){this.set(""),t&&t.call(this,this.field),this.options.onClear&&this.options.onClear.call(this,this.field),"clear"in this.handlers&&this.emit("clear",this.field)}reset(t){this.set(this.options.value),t&&t.call(this,this.field),this.options.onReset&&this.options.onReset.call(this,this.field),"reset"in this.handlers&&this.emit("reset",this.field)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axCheckbox{constructor(t,e){return this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"checkbox",style:"beautify",name:"",children:"",value:"",limit:0,separator:",",size:"",parentClass:"",childClass:"",props:"",display:"",gap:"",columns:0,clearShow:!0,onClear:"",onSet:"",onReset:"",onAddChecked:"",onExceed:"",onInit:"",onChange:""},e,this.targetDom,this.constructor.name),this.handlers={},this.output={children:[]},this.getChildren(),this.name=this.options.name,this.trueLimit=this.children.length<=this.options.limit?this.children.length:this.options.limit,this.createParent(),this.setAttribute(),axIsEmpty(this.options.value)||this.set(this.options.value),axInstance.push(this,this.options.insName,"checkbox"),this}getChildren(){Array.isArray(this.options.children)?"object"==typeof this.options.children[0]?(this.options.children.forEach(t=>{t.hasOwnProperty("value")||(t.value=t.label)}),this.children=this.options.children):this.children=this.options.children.map(t=>({label:t,value:t})):"object"==typeof this.options.children?(this.options.children.hasOwnProperty("value")||(this.options.children.value=this.options.children.label),this.children=[this.options.children]):this.children=[{label:this.options.children,value:this.options.children}]}createParent(){this.targetDom&&"INPUT"!=this.targetDom.nodeName?this.parent=this.targetDom:(this.parent=axAddElem("div",{class:"ax-form-wrapper"}),"INPUT"==this.targetDom.nodeName&&(this.hidden=this.targetDom,this.hidden.insertAdjacentElement("beforeBegin",this.parent),this.name=this.targetDom.name,"hidden"!=this.hidden.type&&(this.hidden.style.display="none"))),this.children.length>0&&this.children.forEach(t=>{this.createElem(t)});let t=this.output.children.filter(t=>t.checked);for(let e=0,s=t.length;e<s;e++){let s=t[e],i=s.dom.querySelector("input");if("radio"==this.options.type){if(e>0){s.checked=!1;break}i.setAttribute("checked",""),s.checked=!0}else"checkbox"==this.options.type&&(e<this.trueLimit||!this.trueLimit?(i.setAttribute("checked",""),s.checked=!0):s.checked=!1)}this.options.limit&&(this.limit=axAddElem("div",{class:"ax-form-limit"},`已选择<i have>0</i>项,还可以选择<i remainder>${this.options.limit}</i>项`),this.resetLimit(),this.parent.insertAdjacentElement("afterend",this.limit)),this.output.name=this.name,this.output.parent=this.parent,this.output.type=this.options.type,this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),this.output.children.forEach(t=>{let e=t.dom.querySelector("input");e.onchange=(()=>{this.change(t)})}),this.options.onInit&&this.options.onInit.call(this,this.output)}createElem(t){
let e=`<label class="ax-${"beautify"==this.options.style?this.options.type:this.options.style}"><input name="${this.name+"_ax_alt"}" value="${t.value}" ${t.disabled?"disabled":""} type="${this.options.type}"><u></u>${t.label?"<i>"+t.label+"</i>":""}</label>`,s=axStrToDom(axTplEngine(e,t)),i=axAddElem("div");this.options.childClass&&axClass.add(i,this.options.childClass),this.options.size&&s.classList.add(`ax-${this.options.size}`);for(let e in t.props)s.setAttribute(e,t.props[e]);"grid"==this.options.display||"block"==this.options.display?(i.appendChild(s),this.parent.appendChild(i)):this.parent.appendChild(s);let o={dom:s,label:t.label,value:t.value,checked:!!t.checked&&t.checked,disabled:!!t.disabled&&t.disabled};return this.output.children.push(o),t.callback&&t.callback.call(this,o),s}setAttribute(){this.options.parentClass&&axClass.add(this.parent,this.options.parentClass);for(let t in this.options.props)this.parent.setAttribute(t,this.options.props[t]);"grid"==this.options.display&&(this.parent.classList.add("ax-grid"),this.options.columns&&this.parent.classList.add(`ax-grid-${this.options.columns}`),this.options.gap&&(this.parent.style.gridColumnGap=this.options.gap))}change(t){let e=t.dom.querySelector("input"),s=t.value;if(!s)return!1;if(e.checked){if("radio"==this.options.type){let t=this.output.children.find(t=>t.checked);t&&(t.checked=!1)}t.checked=!0}else t.checked=!1;let i=this.output.children.filter(t=>t.checked);this.trueLimit&&i.length>this.trueLimit&&(e.checked=!1,t.checked=!1),this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator),this.hidden.onchange&&this.hidden.onchange()),this.resetLimit(),this.intercept(),this.options.onChange&&this.options.onChange.call(this,t),"change"in this.handlers&&this.emit("change",t)}intercept(){let t=this.output.children.filter(t=>t.checked).length,e=!1;return!!this.trueLimit&&(t>=this.trueLimit?(e=!0,this.options.onExceed&&this.options.onExceed.call(this,this.output),"exceed"in this.handlers&&this.emit("exceed",this.output)):e=!1,e)}resetLimit(){if(!this.trueLimit)return!1;let t=this.output.children.filter(t=>t.checked).length,e=this.limit.querySelector("[have]"),s=this.limit.querySelector("[remainder]");t>=this.trueLimit?(this.limit&&this.limit.classList.add("ax-color-danger"),e.innerHTML=this.trueLimit,s.innerHTML=0):(this.limit&&this.limit.classList.remove("ax-color-danger"),e.innerHTML=t,s.innerHTML=this.trueLimit-t)}set(t,e){if("radio"==this.options.type){let e,s,i="";i=Array.isArray(t)?t[0]:t,i?(e=this.output.children.find(t=>t.value==i),s=this.output.children.filter(t=>t.value!=i),e&&(e.checked=!0,e.dom.querySelector("input").checked=!0),s.forEach(t=>{t.checked=!1,t.dom.querySelector("input").checked=!1})):(e=this.output.children.find(t=>t.checked),e&&(e.checked=!1,e.dom.querySelector("input").checked=!1))}else if("checkbox"==this.options.type){let e;e=Array.isArray(t)?t:"string"==typeof t?t.split(this.options.separator):[t],e=e.filter(Boolean),this.trueLimit&&e.length>this.trueLimit&&(e=e.slice(0,this.trueLimit)),this.output.children.forEach(t=>{let s=t.dom.querySelector("input");e.includes(t.value)?(t.checked=!0,s.checked=!0):(t.checked=!1,s.checked=!1)})}return this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),this.resetLimit(),e&&e.call(this,this.output),this.options.onSet&&this.options.onSet.call(this,this.output),"set"in this.handlers&&this.emit("set",this.output),this}addChecked(t,e){if("radio"==this.options.type)return console.error("Do not use this method of addChecked() in type of radio!"),!1;let s=[];s=Array.isArray(t)?t:[t],s=s.filter(Boolean);for(let t=0,e=s.length;t<e&&!this.intercept();t++){let e=s[t],i=this.output.children.find(t=>t.value==e);i.dom.querySelector("input").checked=!0,i.checked=!0,this.resetLimit()}this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),e&&e.call(this,s,this.output),this.options.onAddChecked&&this.options.onAddChecked.call(this,s,this.output),"addChecked"in this.handlers&&this.emit("addChecked",s,this.output)}checkedAll(t){this.output.children.forEach(t=>{t.dom.querySelector("input").checked=!0,t.checked=!0}),this.resetLimit(),this.output.value=this.getValues(),t&&t.call(this,this.output),this.options.onCheckedAll&&this.options.onCheckedAll.call(this,this.output),"checkedAll"in this.handlers&&this.emit("checkedAll",this.output)}getValues(t,e){t=t||"array",e=e||this.options.separator;let s=[];return this.output.children.forEach(e=>{e.checked&&("json"==t?s.push({label:e.label,value:e.value}):s.push(e.value))}),"string"==t&&(s=s.join(e)),s}reset(t){let e;if(this.options.value)e=this.options.value;else{let t=this.options.children.filter(t=>t.checked);e=[],t.forEach(t=>{e.push(t.value)})}this.set(e),t&&t.call(this,this.output),this.options.onReset&&this.options.onReset.call(this,this.output),"reset"in this.handlers&&this.emit("reset",this.output)}clear(t){this.output.children.forEach(t=>{t.checked&&(t.checked=!1,t.dom.querySelector("input").checked=!1)}),this.output.value=[],this.resetLimit(),t&&t.call(this,this.output),this.options.onClear&&this.options.onClear.call(this,this.output),"clear"in this.handlers&&this.emit("clear",this.output)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axCheckAll{constructor(t,e){if(this.targetDom=t?axIdToDom(t):"",!this.targetDom)return!1;this.options=axExtend({checkDom:"",clearDom:"",separator:",",includeDisabled:!0,onInit:"",onChecked:"",onCheckAll:"",onClearAll:""},e,this.targetDom,this.constructor.name),this.handlers={},this.checkDom=this.options.checkDom?axIdToDom(this.options.checkDom):"",this.clearDom=this.options.clearDom?axIdToDom(this.options.clearDom):"",this.list=[],this.listAvailable=[],this.toggleType="",this.state="",this.toggleBtns=[],this.name="",this.init()}init(){return this.getOptionsList(),0!==this.list.length&&(this.observeToggle(),this.observeList(),this.options.onInit&&this.options.onInit.call(this),this)}observeList(){this.setLinkage(),this.listAvailable.forEach(t=>{t.field.addEventListener("change",()=>{this.setLinkage()},!1)})}observeToggle(){this.checkDom&&"checkbox"===this.checkDom.type?(this.toggleType="checkbox",this.toggleBtns=[this.checkDom],this.checkDom.checked&&this.checkAll(),this.checkDom.addEventListener("change",()=>{this.checkDom.checked?this.checkAll():this.clearAll()},!1)):this.checkDom&&"radio"===this.checkDom.type?(this.toggleType="radio",this.toggleBtns=[...document.querySelectorAll(this.options.checkDom.replace("[","[name="))],1==axMultiValues(this.options.checkDom,"radio","string")&&this.checkAll(),this.toggleBtns.forEach(t=>{t.addEventListener("change",()=>{let t=axMultiValues(this.options.checkDom,"radio","string");1==t?this.checkAll():this.clearAll()},!1)})):(this.toggleType="button",this.checkDom&&(this.toggleBtns.push(this.checkDom),this.checkDom.onclick=(()=>{this.checkAll()})),this.clearDom&&(this.toggleBtns.push(this.clearDom),this.clearDom.onclick=(()=>{this.clearAll()})))}setLinkage(){let t=axMultiValues(this.name,"checkbox","array");if(0===t.length){if(this.state="cleared",this.toggleBtns.forEach(t=>{t.removeAttribute("checking")}),this.checkDom&&"checkbox"===this.toggleType)this.checkDom.checked=!1;else if(this.toggleType="radio"){let t=this.toggleBtns.find(t=>t.checked);t&&(t.checked=!1)}this.options.onClearAll&&this.options.onClearAll.call(this),"clearAll"in this.handlers&&this.emit("clearAll","")}else if(t.length===this.listAvailable.length){if(this.state="checked",this.toggleBtns.forEach(t=>{t.removeAttribute("checking")}),this.checkDom&&"checkbox"===this.toggleType)this.checkDom.checked=!0;else if(this.toggleType="radio"){let t=this.toggleBtns.find(t=>1==t.value);t&&(t.checked=!0)}this.options.onCheckAll&&this.options.onCheckAll.call(this),"checkAll"in this.handlers&&this.emit("checkAll","")}else this.state="checking",this.checkDom&&"checkbox"===this.toggleType?(this.checkDom.checked=!1,this.checkDom.setAttribute("checking","")):(this.toggleType="radio")&&this.toggleBtns.forEach(t=>{t.checked&&(t.checked=!1),1==t.value&&t.setAttribute("checking","")})}getOptionsList(t=this.options.includeDisabled){return[...this.targetDom.querySelectorAll("label")].forEach(e=>{let s=e.querySelector("input");t?this.list.push({dom:e,field:s,name:s.name,value:s.value}):e.field.disabled||this.list.push({dom:e,field:s,name:s.name,value:s.value})}),this.list.find(t=>!t.name)&&console.error("Checkbox must have name attribute!"),this.list.some(t=>t.name!=this.list[0].name)&&console.error("All names need to be consistent!"),this.list.find(t=>!t.value||!t.field.hasAttribute("value"))&&console.error("Checkbox must have a value!"),this.listAvailable=t?this.list.filter(t=>!t.field.disabled):this.list,this.name=this.listAvailable[0].name,this.list}getValues(t,e){t=t||"array",e=e||this.options.separator;let s=this.list.filter(t=>t.field.checked),i=s.map(t=>t.field.value);return"string"===t?i.join(e):"array"===t?i:""}checked(t,e){let s=[];if("string"==typeof t)s=t.split(this.options.separator);else{if(!Array.isArray(t))return!1;s=t}return s.forEach(t=>{let e=this.list.find(e=>e.value==t);e&&(e.field.checked=!0)}),this.setLinkage(),e&&e.call(this,s),this.options.onChecked&&this.options.onChecked.call(this,s),"checked"in this.handlers&&this.emit("checked",s),this}checkAll(t){return this.state="checked",this.list.forEach(t=>{t.field.disabled||(t.field.checked=!0)}),this.toggleBtns.forEach(t=>{t.removeAttribute("checking")}),t&&t.call(this),this.options.onCheckAll&&this.options.onCheckAll.call(this),"checkAll"in this.handlers&&this.emit("checkAll",""),this}clearAll(t){return this.state="cleared",this.list.forEach(t=>{t.field.checked&&(t.field.checked=!1)}),this.toggleBtns.forEach(t=>{t.removeAttribute("checking")}),t&&t.call(this),this.options.onClearAll&&this.options.onClearAll.call(this),"clearAll"in this.handlers&&this.emit("clearAll",""),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axForm{constructor(t,e){return this.targetDom=t?axIdToDom(t):null,this.form,this.output=[],this.handlers={},this.targetDom?"FORM"==this.targetDom.nodeName?this.form=this.targetDom:(this.form=axAddElem("form"),this.targetDom.appendChild(this.form)):this.form=axAddElem("form"),this.init(e),this}init(t){return this.setAttribute(t),t.rows.forEach(e=>{this.createSection(e,t.style)}),t.onInit&&t.onInit.call(this,this.output),axInstance.push(this,t.insName,"form"),this}createTpl(t,e){let s="",i="",o="";if(t.title&&t.title.show&&(s=t.title.html?t.title.html:`<div class="ax-form-label${t.title.className?" "+t.title.className:""}">${t.title.text?t.title.text:""}</div>`),i="emulate"==e?'<div class="ax-break-line"></div>':"fit"==e?'<div class="ax-break ax-hide-tel"></div><div class="ax-break-line ax-hide-pad ax-hide-pc"></div>':'<div class="ax-break"></div>',!axIsEmpty(t.props))for(let e in t.props)o+=` ${e}="${t.props[e]}" `;return`\n                    <section${o}>\n                    ${t.before||""}\n                        <div class="ax-form-group">\n                            <div class="ax-flex-row">\n                                ${s}\n                                <div class="ax-form-con">\n                                    <div class="ax-form-input"></div>\n                                </div>\n                                ${t.tools?t.tools:""}\n                            </div>\n                        </div>\n                        ${t.after||""}\n                        ${i}\n                    </section >\n                    `}setAttribute(t){if("emulate"==t.style?this.form.classList.add("ax-emulate"):"fit"==t.style&&this.form.classList.add("ax-fit-tel"),t.className&&this.form.classList.add(t.className),!axIsEmpty(t.props))for(let e in t.props)this.form.setAttribute(e,t.props[e])}createCols(t,e,s,i,o,a){t.forEach(t=>{let n,r;"grid"==s?(e.classList.add("ax-grid"),n=axAddElem("div"),i&&e.classList.add("ax-grid-"+i),e.style.gridGap=o,r=n,e.appendChild(n),a(t,n)):"flex"==s?(e.classList.add("ax-row"),n=axAddElem("div",{class:"ax-col"}),r=n,e.appendChild(n),a(t,n)):(n=e,r=a(t,n)),t.prefix&&r.insertAdjacentHTML("beforebegin",t.prefix),t.suffix&&r.insertAdjacentHTML("afterend",t.suffix)})}createSection(t,e){let s=axStrToDom(this.createTpl(t,e)),i=s.querySelector(".ax-form-input");axIsEmpty(t.cols)?this.createItem(t,i):this.createCols(t.cols,i,t.display,t.columns,t.gap,(t,e)=>this.createItem(t,e)),this.form.appendChild(s)}createItem(t,e){let s,i={};if("select"==t.type)s=axAddElem("select",{name:t.name||"",...t.props}),t.className&&s.setAttribute("class",t.className),e.appendChild(s),t.options&&t.options.length>0&&t.options.forEach(t=>{let e=axAddElem("option",{value:t.value||""},t.label);t.checked&&e.setAttribute("selected",""),t.disabled&&e.setAttribute("disabled",""),s.appendChild(e),t.callback&&t.callback.call(this,e,t)});else if("radio"==t.type){for(let s in t.props)e.setAttribute(s,t.props[s]);t.className&&e.setAttribute("class",t.className),s=[],this.createCols(t.options,e,t.display,t.columns,t.gap,(e,i)=>{let o=axAddElem("input",{type:"radio",name:t.name||"",value:e.value||""}),a=axAddElem("label",{class:"ax-radio"},`<u></u><i> ${e.label}</i>`);return e.checked&&(o.checked=!0),e.disabled&&(o.disabled=!0),a.insertAdjacentElement("afterBegin",o),i.appendChild(a),s.push(o),a})}else if("checkbox"==t.type){for(let s in t.props)e.setAttribute(s,t.props[s]);t.className&&e.setAttribute("class",t.className),s=[],this.createCols(t.options,e,t.display,t.columns,t.gap,(e,i)=>{let o=axAddElem("input",{type:"checkbox",name:t.name||"",value:e.value||""}),a=axAddElem("label",{class:"ax-checkbox"},`<u></u><i> ${e.label}</i>`);return e.checked&&(o.checked=!0),e.disabled&&(o.disabled=!0),a.insertAdjacentElement("afterBegin",o),i.appendChild(a),s.push(o),a})}else"html"==t.type?(s=axAddElem("div",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"a"==t.type?(s=axAddElem("a",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"button"==t.type?(s=axAddElem("button",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"textarea"==t.type?(s=axAddElem("textarea",{name:t.name||"",value:t.value||"",...t.props}),t.readonly&&(s.readonly=!0),t.disabled&&(s.disabled=!0),t.className&&s.setAttribute("class",t.className),t.placeholder&&s.setAttribute("placeholder",t.placeholder),e.appendChild(s)):(s=axAddElem("input",{type:t.type,name:t.name||"",value:t.value||"",...t.props}),t.readonly&&(s.readonly=!0),t.disabled&&(s.disabled=!0),t.className&&s.setAttribute("class",t.className),t.placeholder&&s.setAttribute("placeholder",t.placeholder),e.appendChild(s));return i.name=t.name||"",i.value=t.value||"",i.field=s,i.parent=e,this.output.push(i),t.callback&&t.callback.call(this,i),s}get(t="string",e=","){let s=[];return this.output.forEach(t=>{s.push(t.field)}),s=s.flat(2).filter(t=>["INPUT","SELECT","TEXTAREA"].includes(t.nodeName)&&t.name),axSerialize(s,t,e)}update(t,e){return this.form.innerHTML="",this.output=[],this.init(t),t.onUpdate&&t.onUpdate.call(this,this.output),e&&e.call(this,this.output),"updated"in this.handlers&&this.emit("updated",this.output),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axDodge{constructor(t,e){return this.targetDom=axIdToDom(t),!!this.targetDom&&(this.inputDom=this.targetDom.querySelector("input,textarea"),!!this.inputDom&&(this.options=axExtend({insName:"",placeholder:"请输入...",onInit:"",onSet:"",onClear:""},e,this.targetDom,this.constructor.name),this.handlers={},this.isFocus=!1,this.focusEvent=(()=>{this.inputDom.focus(),this.targetDom.classList.add("ax-active"),this.inputDom.removeAttribute("readonly"),this.isFocus=!0}),this.blurEvent=(()=>{this.inputDom.blur(),this.inputDom.value?this.targetDom.classList.add("ax-active"):this.targetDom.classList.remove("ax-active"),this.inputDom.setAttribute("readonly",""),this.isFocus=!1}),void this.init()))}init(){axInstance.push(this,this.options.insName,"dodge"),this.setAttribute(),this.labelDom=axAddElem("label");let t=this.inputDom.getAttribute("placeholder");return t?(this.labelDom.innerHTML=t,this.inputDom.removeAttribute("placeholder")):this.labelDom.innerHTML=this.options.placeholder,this.targetDom.appendChild(this.labelDom),this.inputDom.addEventListener("focus",this.focusEvent,!1),this.inputDom.addEventListener("blur",this.blurEvent,!1),this.labelDom.onclick=(()=>{this.focusEvent()}),this.inputDom.value&&this.focusEvent(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){this.inputDom.setAttribute("readonly",""),this.inputDom.classList.contains("ax-lg")&&this.targetDom.classList.add("ax-lg"),!this.targetDom.classList.contains("ax-dodge")&&this.targetDom.classList.add("ax-dodge")}set(t,e){return t?(this.inputDom.value=t,this.focusEvent()):this.inputDom.focus(),this.options.onSet&&this.options.onSet.call(this,t),this.handlers.hasOwnProperty("set")&&this.emit("set",t),e&&e.call(this,t),this}clear(t){return this.inputDom.value="",this.inputDom.blur(),this.blurEvent(),this.options.onClear&&this.options.onClear.call(this),this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axPanel{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",type:"panel",display:"",expanded:!0,headerClosable:!1,arrow:{enable:!0,rotate:180,iconClose:"ax-icon-down",iconOpen:"ax-icon-down",position:"end"},onInit:"",onCollapsed:"",onExpanded:"",onRemove:"",onRestore:""},e,this.targetDom,this.constructor.name),this.handlers={},this.location={parent:this.targetDom.parentElement,brother:this.targetDom.nextElementSibling},this.expanded=!0,this.init()}init(){return axInstance.push(this,this.options.insName,"panel"),this.headerDom=this.targetDom.querySelector(".ax-panel-header"),this.bodyDom=this.targetDom.querySelector(".ax-panel-body"),this.headerDom.querySelector("[arrow]")?this.arrowDom=this.headerDom.querySelector("[arrow]"):this.options.arrow.enable&&(this.arrowDom=axAddElem("i",{arrow:"",class:`ax-iconfont ${this.options.arrow.iconOpen}`}),"begin"===this.options.arrow.position?this.headerDom.insertAdjacentElement("afterbegin",this.arrowDom):"end"===this.options.arrow.position&&this.headerDom.insertAdjacentElement("beforeend",this.arrowDom)),this.setAttribute(),this.options.expanded&&!axIsVisible(this.bodyDom)?this.expand():!this.options.expanded&&axIsVisible(this.bodyDom)&&this.collapse(),this.options.headerClosable?this.headerDom.onclick=(()=>{axIsVisible(this.bodyDom)?this.collapse():this.expand()}):this.arrowDom&&(this.arrowDom.onclick=(()=>{axIsVisible(this.bodyDom)?this.collapse():this.expand()})),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){!this.targetDom.classList.contains("ax-panel")&&this.targetDom.classList.add("ax-panel"),"box"===this.targetDom.getAttribute("type")?this.options.type="box":"box"===this.options.type&&this.targetDom.setAttribute("type",this.options.type),this.options.lamp&&this.targetDom.setAttribute("lamp",this.options.lamp),this.options.headerClosable&&this.targetDom.setAttribute("headerClosable","")}expand(t){if(this.expanded)return!1;this.arrowDom&&(this.options.arrow.iconClose===this.options.arrow.iconOpen?this.arrowDom.classList.remove(`ax-deg${this.options.arrow.rotate}`):(this.arrowDom.classList.remove(this.options.arrow.iconClose),this.arrowDom.classList.add(this.options.arrow.iconOpen))),axSlideDown(this.bodyDom,this.options.display,()=>{this.expanded=!0,this.options.onExpanded&&this.options.onExpanded.call(this),this.handlers.hasOwnProperty("expanded")&&this.emit("expanded","")}),t&&t.call(this)}collapse(t){if(!this.expanded)return!1;this.arrowDom&&(this.options.arrow.iconClose===this.options.arrow.iconOpen?this.arrowDom.classList.add(`ax-deg${this.options.arrow.rotate}`):(this.arrowDom.classList.remove(this.options.arrow.iconOpen),this.arrowDom.classList.add(this.options.arrow.iconClose))),axSlideUp(this.bodyDom,this.options.display,()=>{this.expanded=!1,this.options.onCollapsed&&this.options.onCollapsed.call(this),this.handlers.hasOwnProperty("collapsed")&&this.emit("collapsed","")}),t&&t.call(this)}remove(t){if(axIsVnode(this.targetDom))return!1;this.targetDom.remove(),this.options.onRemove&&this.options.onRemove.call(this),this.handlers.hasOwnProperty("remove")&&this.emit("remove",""),t&&t.call(this)}restore(t){if(!axIsVnode(this.targetDom))return!1;this.location.brother?this.location.brother.insertAdjacentElement("beforebegin",this.targetDom):this.location.parent.appendChild(this.targetDom),this.options.onRestore&&this.options.onRestore.call(this),this.handlers.hasOwnProperty("restore")&&this.emit("restore",""),t&&t.call(this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axRipple{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",duration:0,removeTime:800,theme:"dark"},e,this.targetDom,this.constructor.name),this.init()}init(){axInstance.push(this,this.options.insName,"ripple"),!this.targetDom.classList.contains("ax-ripple")&&this.targetDom.classList.add("ax-ripple"),this.targetDom.setAttribute("theme",this.options.theme);let t=axWidth(this.targetDom,"inner"),e=axHeight(this.targetDom,"inner"),s=Math.max(t,e);return this.targetDom.addEventListener("click",t=>{let e=t.clientX-(axOffset(this.targetDom).left-document.documentElement.scrollLeft),i=t.clientY-(axOffset(this.targetDom).top-document.documentElement.scrollTop),o=axAddElem("u",{style:`left: ${e}px;top: ${i}px; width: ${s}px;height: ${s}px${this.options.duration?";animation-duration:"+this.options.duration+"ms":""}`,class:this.options.theme});this.targetDom.appendChild(o),setTimeout(()=>{o.parentNode.removeChild(o)},this.options.removeTime)},!1),this}}class axShortcut{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",shape:"",placement:"right-bottom",gap:{side:"",bottom:"",top:""},size:"",threshold:400,scrollTo:0,onInit:""},e,this.targetDom,this.constructor.name),this.totopEvent=(()=>{let t=this.totop.querySelector("a"),e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e>=this.options.threshold?t.classList.add("ax-show"):t.classList.remove("ax-show")}),this.init()}init(){if(axInstance.push(this,this.options.insName,"shortcut"),this.setAttribute(),this.children=[...this.targetDom.children],0===this.children.length)return!1;this.totop=this.targetDom.querySelector("[totop]");for(let t of this.children){let e=t.querySelector("[pop]");new axHover(t,{enter:()=>{t.classList.add("ax-active"),e&&axFadeIn(e)},leave:()=>{t.classList.remove("ax-active"),e&&axFadeOut(e)}})}return this.totop&&(this.totop.addEventListener("click",()=>{axScrollTo(this.options.scrollTo)},!1),window.addEventListener("scroll",this.totopEvent,!1)),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){!this.targetDom.classList.contains("ax-shortcut")&&this.targetDom.classList.add("ax-shortcut"),this.options.shape&&this.targetDom.setAttribute("shape",this.options.shape),this.options.placement&&this.targetDom.setAttribute("placement",this.options.placement),this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.gap.side&&(this.options.placement.includes("left")?(this.targetDom.style.left=this.options.gap.side,this.targetDom.style.right="auto"):this.targetDom.style.right=this.options.gap.side),this.options.gap.bottom&&this.options.placement.includes("bottom")&&(this.targetDom.style.bottom=this.options.gap.bottom),this.options.gap.top&&(this.targetDom.style.top=this.options.gap.top,this.targetDom.style.bottom="auto")}}class axSpy{constructor(t,e){return!axIsEmpty(t)&&(this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",offset:"0px",visible:[0,.5,1],parent:null,distance:0,spySelector:"",navSelector:"",btnSelector:"",duration:0,interval:500,repeat:!0,active:"",in:"",out:"",rel:"",onBefore:"",onShow:"",onShowing:"",onShown:"",onIn:"",onOut:"",onAdd:"",onRemove:""},e,this.targetDom,this.constructor.name),this.handlers={},this.navDom=this.options.navSelector?axIdToDom(this.options.navSelector):null,this.btnDoms=this.navDom&&this.options.btnSelector?this.navDom.querySelectorAll(this.options.btnSelector):[],this.items=[],this.parentDom=this.options.parent?axIdToDom(this.options.parent):this.options.parent,this.options.active.trim().startsWith("[")&&this.options.active.trim().endsWith("]")?(this.isAttr=!0,this.active=this.options.active.replace("[","").replace("]","").replace(" ","")):(this.activeIsAttr=!1,this.active=this.options.active),this.init(),this)}init(){axInstance.push(this,this.options.insName,"spy"),this.interactOpt(),this.interact=new IntersectionObserver(t=>{t.forEach(t=>{let e=[t.target,t.target.spy,t];t.isIntersecting?(t.target.spy.in&&axClass.add(t.target,t.target.spy.in,e=>!t.target.classList.contains(e)),0===t.intersectionRatio?(t.target.spy.state="show",this.handlers.hasOwnProperty("show")&&this.emit("show",...e),this.options.onShow&&this.options.onShow.call(this,...e)):1===t.intersectionRatio?(t.target.spy.state="shown",this.handlers.hasOwnProperty("shown")&&this.emit("shown",...e),this.options.onShown&&this.options.onShown.call(this,...e),this.setActiveOnly(t.target),this.options.repeat||this.interact.unobserve(t.target)):(t.target.spy.state="showing",this.handlers.hasOwnProperty("showing")&&this.emit("showing",...e),this.options.onShowing&&this.options.onShowing.call(this,...e)),this.handlers.hasOwnProperty("in")&&this.emit("in",...e),this.options.onIn&&this.options.onIn.call(this,...e)):(t.target.spy.state="hidden",this.options.repeat&&axDebounce(()=>{t.target.spy.out&&axClass.add(t.target,t.target.spy.out),t.target.spy.in&&axClass.del(t.target,t.target.spy.in),this.active&&t.target.spy.rel.forEach(t=>{this.isAttr?t.removeAttribute(this.active):axClass.del(t,this.active)})},this.options.interval)(),this.handlers.hasOwnProperty("out")&&this.emit("out",...e),this.options.onOut&&this.options.onOut.call(this,...e))})},this.interactOpt()),this.options.spySelector?this.items=[...this.targetDom.querySelectorAll(this.options.spySelector)]:this.items.push(this.targetDom);let t=!this.options.onBefore||this.options.onBefore.call(this,this.items);return t&&this.items.forEach(t=>{this.setSpyAttr(t),this.interact.observe(t)}),this}setActiveOnly(t){if(this.active){t.spy.rel.forEach(t=>{this.isAttr?t.setAttribute(this.active,""):axClass.add(t,this.active,e=>!t.classList.contains(e))});let e=this.items.filter(e=>e!==t&&e.spy),s=e.map(t=>t.spy.rel).flat(1/0);s.forEach(t=>{this.isAttr?t.removeAttribute(this.active):axClass.del(t,this.active)})}}setSpyAttr(t){if(!axType(t).includes("HTML"))return!1;let e=axAttrToJson(t,"spy");t.spy={observed:!0,rel:this.getRels(t),in:e.in||this.options.in,out:e.out||this.options.out}}getRels(t){let e=[],s=[],i=[],o=[];if(t.id)if(this.btnDoms.length>0&&this.btnDoms[0].hasAttribute("href")){let t=this.btnDoms.find(t=>t.getAttribute("href")===`#${t.id}`);t&&e.push(t)}else e=[...document.querySelectorAll(`[href='#${t.id}']`)];else{let s=this.items.findIndex(e=>e==t);-1!==s&&this.btnDoms[s]&&e.push(this.btnDoms[s])}if(t.hasAttribute("spy")){let e=axAttrToJson(t,"spy");e.rel&&(s=axAllToDoms(e.rel))}return this.options.rel&&(i=axAllToDoms(this.options.rel)),o=[...e,...s,...i].filter(Boolean),o.forEach(e=>{e.onclick=(e=>{axPreventDefault(e),axScrollTo(t,{parent:this.parentDom,duration:this.options.duration,offset:this.options.distance})})}),o}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.parentDom,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}getDoms(t){let e=axType(t),s=[];return"Array"===e?s=t.map(t=>axIdToDom(t)).filter(Boolean):"String"===e&&(s=axAllToDoms(t).filter(Boolean)),s}add(t,e){let s=this.getDoms(t);s.forEach(t=>{t.spy?new axMessage({content:`媒体文件${t.dataset.src||t.src}已经处于监听状态，不需要添加监听操作！`,iconShow:!0,result:"warning"}).show():(this.setSpyAttr(t),this.interact.observe(t),!this.items.includes(t)&&this.items.push(t))}),this.handlers.hasOwnProperty("add")&&this.emit("add",s),this.options.onAdd&&this.options.onAdd.call(this,s),e&&e.call(this,s)}remove(t,e){let s=this.getDoms(t);s.forEach(t=>{this.items.includes(t)&&(t.spy?(Reflect.deleteProperty(t,"spy"),this.interact.unobserve(t)):new axMessage({content:`媒体文件${t.dataset.src||t.src}还未被监听，不需要取消监听操作！`,iconShow:!0,result:"warning"}).show())}),this.handlers.hasOwnProperty("remove")&&this.emit("remove",s),this.options.onRemove&&this.options.onRemove.call(this,s),e&&e.call(this,s)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axInit=(t,e=document)=>{let s=axIdToDom(e);if(axIsEmpty(t)||t.includes("other")){let t=[...s.querySelectorAll(".ax-pos-left")];for(let e of t)"INPUT"!=e.nextElementSibling.nodeName&&"TEXTAREA"!=e.nextElementSibling.nodeName||(e.nextElementSibling.style.paddingLeft=`${axWidth(e,"outer")/10}rem`);let e=[...s.querySelectorAll(".ax-pos-right [clear]")].filter(t=>!t.clear),i=function(){let t=this.parentElement.previousElementSibling;"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName||(t.value="")};for(let t of e)t.clear=!0,t.addEventListener("click",i,!1)}let i=[],o=["axAccordion","axAlert","axAmount","axCheckbox","axCheckAll","axComplete","axDate","axDialog","axDodge","axDrawer","axDropdown","axInfinite","axInput","axLazyload","axList","axMenu","axMore","axPanel","axPagination","axPopup","axProgress","axRange","axRipple","axSelect","axShare","axShortcut","axSpy","axStick","axSwiper","axTab","axTags","axTooltip","axUpload","axTree","axRate"],a=t=>{axIsEmpty(t)||(t=t.map(t=>t.startsWith("ax")?t:"ax"+t.slice(0,1).toUpperCase()+t.slice(1)));let e=t||o,i=e.map(t=>`[${t}]`).join(","),a=[...s.querySelectorAll(i)],n=e.map(t=>{let e=a.filter(e=>e.attributes.hasOwnProperty(t.toLowerCase())&&!e[t]);return{module:t,nodeList:e}});return n},n=t=>{for(let e of t)if(0!==e.nodeList.length)if(["axDialog","axDrawer","axPopup"].includes(e.module))r(e.module,e.nodeList);else{let t="dom";"axMessage"===e.module?t="":"axSwiper"===e.module&&(t="dom,axAttrToJson(dom, 'axSwiper')"),e.nodeList.forEach(s=>{let i=new Function("dom",`try {return new ${e.module}(${t})} catch(e) {}`)(s);i&&(s[e.module]=!0)})}},r=(t,e)=>{let s=(e,i)=>{e.forEach(e=>{let o,a="dom";"axDialog"!==t&&"axDrawer"!==t||(a="'',dom"),o=new Function("dom",`try {return new ${t}(${a})} catch(e) {}`)(e),o&&(e[t]=!0),i&&o&&(o.targetDom.style.zIndex=parseInt(getComputedStyle(i.targetDom).zIndex)+1);let n=o.content.querySelectorAll(`[${t}]`);n.length>0&&s(n,o)})};s(e)};if(axIsEmpty(t))i=a();else{let e=axType(t);"String"===e?"other"!==t&&(i=a([t])):"Array"===e&&(t=t.filter(t=>"other"!==t),i=a(t))}i.length>0&&n(i)};axInit();